  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (3.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 08:44:57.724256"], ["updated_at", "2019-06-02 08:44:57.724256"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 08:44:57.737093"], ["updated_at", "2019-06-02 08:44:57.737093"]]
  [1m[36mLogBook::Record Create (2.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "6d023863488beb53732fe857a8cd77b8"], ["action", "create"], ["created_at", "2019-06-02 08:44:57.753560"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 25ms (Views: 0.2ms | ActiveRecord: 4.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 08:44:57.777923"], ["updated_at", "2019-06-02 08:44:57.777923"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 3], ["record_changes", "{\"email\":[null,\"admin\"],\"name\":[null,\"user\"]}"], ["request_uuid", "6d023863488beb53732fe857a8cd77b8"], ["action", "create"], ["created_at", "2019-06-02 08:44:57.779589"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 08:44:57.784033"], ["updated_at", "2019-06-02 08:44:57.784033"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "44846d52f0dd1cf11067312d285334d2"], ["action", "register"], ["created_at", "2019-06-02 08:44:57.785552"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 08:44:57.796365"], ["updated_at", "2019-06-02 08:44:57.796365"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 5], ["record_changes", "{\"email\":[null,\"admin\"],\"name\":[null,\"user\"]}"], ["request_uuid", "44846d52f0dd1cf11067312d285334d2"], ["action", "register"], ["created_at", "2019-06-02 08:44:57.798351"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (4.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (1.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-02 08:44:57.851755"], ["updated_at", "2019-06-02 08:44:57.851755"]]
  [1m[36mLogBook::Record Create (3.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "fa50ceb1f56d02e4c3db0e3643ad22c1"], ["action", "register"], ["created_at", "2019-06-02 08:44:57.857008"]]
  [1m[36mUserWithAll Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-02 08:44:57.861967"], ["updated_at", "2019-06-02 08:44:57.861967"]]
  [1m[36mLogBook::Record Create (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "fa50ceb1f56d02e4c3db0e3643ad22c1"], ["action", "register"], ["created_at", "2019-06-02 08:44:57.865611"]]
  [1m[36mUserWithAll Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-02 08:44:57.869977"], ["updated_at", "2019-06-02 08:44:57.869977"]]
  [1m[36mLogBook::Record Create (0.9ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "fa50ceb1f56d02e4c3db0e3643ad22c1"], ["action", "register"], ["created_at", "2019-06-02 08:44:57.875089"]]
  [1m[36mUserWithAll Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-02 08:44:57.878693"], ["updated_at", "2019-06-02 08:44:57.878693"]]
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "fa50ceb1f56d02e4c3db0e3643ad22c1"], ["action", "register"], ["created_at", "2019-06-02 08:44:57.885522"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 86ms (Views: 0.2ms | ActiveRecord: 18.0ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 08:44:57.910592"], ["updated_at", "2019-06-02 08:44:57.910592"]]
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 9], ["record_changes", "{\"email\":[null,\"admin\"],\"name\":[null,\"user\"]}"], ["request_uuid", "fa50ceb1f56d02e4c3db0e3643ad22c1"], ["action", "register"], ["created_at", "2019-06-02 08:44:57.913011"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-02 08:44:57.922404"], ["updated_at", "2019-06-02 08:44:57.922404"]]
  [1m[36mLogBook::Record Create (1.1ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "e98d218dc8c493d08faa813096185063"], ["action", "register"], ["created_at", "2019-06-02 08:44:57.924727"]]
  [1m[36mUserWithAll Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", "2019-06-02 08:44:57.927272"], ["updated_at", "2019-06-02 08:44:57.927272"]]
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "e98d218dc8c493d08faa813096185063"], ["action", "register"], ["created_at", "2019-06-02 08:44:57.930948"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", "2019-06-02 08:44:57.932992"], ["updated_at", "2019-06-02 08:44:57.932992"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "e98d218dc8c493d08faa813096185063"], ["action", "register"], ["created_at", "2019-06-02 08:44:57.935223"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", "2019-06-02 08:44:57.936699"], ["updated_at", "2019-06-02 08:44:57.936699"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "e98d218dc8c493d08faa813096185063"], ["action", "register"], ["created_at", "2019-06-02 08:44:57.938285"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "records" WHERE "records"."request_uuid" = $1 LIMIT $2[0m  [["request_uuid", "e98d218dc8c493d08faa813096185063"], ["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "e98d218dc8c493d08faa813096185063"]]
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Update (1.1ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"10\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"11\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"10\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"11\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["id", 10]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Destroy (0.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 11]]
  [1m[36mLogBook::Record Destroy (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 12]]
  [1m[36mLogBook::Record Destroy (0.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 13]]
Completed 200 OK in 58ms (Views: 0.2ms | ActiveRecord: 11.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 08:44:57.986289"], ["updated_at", "2019-06-02 08:44:57.986289"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "User"], ["subject_id", 13], ["record_changes", "{\"email\":[null,\"admin\"],\"name\":[null,\"user\"]}"], ["request_uuid", "e98d218dc8c493d08faa813096185063"], ["action", "register"], ["created_at", "2019-06-02 08:44:57.988405"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-02 08:44:57.999760"], ["updated_at", "2019-06-02 08:44:57.999760"]]
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["request_uuid", "bcffc853c8e1719bfe7b4b9df0e2b28f"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.002151"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", "2019-06-02 08:44:58.003962"], ["updated_at", "2019-06-02 08:44:58.003962"]]
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "bcffc853c8e1719bfe7b4b9df0e2b28f"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.005941"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", "2019-06-02 08:44:58.007847"], ["updated_at", "2019-06-02 08:44:58.007847"]]
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "bcffc853c8e1719bfe7b4b9df0e2b28f"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.010326"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", "2019-06-02 08:44:58.013788"], ["updated_at", "2019-06-02 08:44:58.013788"]]
  [1m[36mLogBook::Record Create (1.1ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User3\",\"company_name\":null}"], ["request_uuid", "bcffc853c8e1719bfe7b4b9df0e2b28f"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.016332"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "records" WHERE "records"."request_uuid" = $1 LIMIT $2[0m  [["request_uuid", "bcffc853c8e1719bfe7b4b9df0e2b28f"], ["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "bcffc853c8e1719bfe7b4b9df0e2b28f"]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Update (0.3ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"users\":{\"14\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"15\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"14\":{\"name\":\"User1\",\"company_name\":null},\"15\":{\"name\":\"User2\",\"company_name\":null},\"16\":{\"name\":\"User3\",\"company_name\":null}}}"], ["id", 15]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Destroy (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 16]]
  [1m[36mLogBook::Record Destroy (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 17]]
  [1m[36mLogBook::Record Destroy (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 18]]
Completed 200 OK in 44ms (Views: 0.1ms | ActiveRecord: 8.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 08:44:58.045201"], ["updated_at", "2019-06-02 08:44:58.045201"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "User"], ["subject_id", 17], ["record_changes", "{\"email\":[null,\"admin\"],\"name\":[null,\"user\"]}"], ["request_uuid", "bcffc853c8e1719bfe7b4b9df0e2b28f"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.046947"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "something"], ["created_at", "2019-06-02 08:44:58.049542"], ["updated_at", "2019-06-02 08:44:58.049542"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"name\":[null,\"something\"]}"], ["request_uuid", "bcffc853c8e1719bfe7b4b9df0e2b28f"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.051820"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#update as HTML
  Parameters: {"company"=>{"name"=>"something else"}, "id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.2ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["name", "something else"], ["updated_at", "2019-06-02 08:44:58.058011"], ["id", 4]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"name\":[\"something\",\"something else\"]}"], ["request_uuid", "5497cee3558a7a0348ca101024fea6e1"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.060597"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.4ms)[0m  [1m[33mUPDATE "companies" SET "description" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["description", "Something third"], ["updated_at", "2019-06-02 08:44:58.062827"], ["id", 4]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"description\":[null,\"Something third\"]}"], ["request_uuid", "5497cee3558a7a0348ca101024fea6e1"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.064925"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "records" WHERE "records"."request_uuid" = $1 LIMIT $2[0m  [["request_uuid", "5497cee3558a7a0348ca101024fea6e1"], ["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "5497cee3558a7a0348ca101024fea6e1"]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mLogBook::Record Destroy (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 22]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Update (0.4ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1 WHERE "records"."id" = $2[0m  [["record_changes", "{\"name\":[\"something\",\"something else\"],\"description\":[null,\"Something third\"]}"], ["id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 23ms (Views: 0.1ms | ActiveRecord: 3.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 08:44:58.086447"], ["updated_at", "2019-06-02 08:44:58.086447"]]
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["subject_type", "User"], ["subject_id", 18], ["record_changes", "{\"email\":[null,\"admin\"],\"name\":[null,\"user\"]}"], ["request_uuid", "5497cee3558a7a0348ca101024fea6e1"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.088949"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-02 08:44:58.106325"], ["updated_at", "2019-06-02 08:44:58.106325"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.107589"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 5], ["created_at", "2019-06-02 08:44:58.108540"], ["updated_at", "2019-06-02 08:44:58.108540"]]
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserWithAll"], ["subject_id", 19], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.109903"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 5], ["created_at", "2019-06-02 08:44:58.111605"], ["updated_at", "2019-06-02 08:44:58.111605"]]
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserWithAll"], ["subject_id", 20], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.113229"]]
  [1m[36mCompanyInfo Create (3.9ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 5], ["created_at", "2019-06-02 08:44:58.114631"], ["updated_at", "2019-06-02 08:44:58.114631"]]
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.119740"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "records" WHERE "records"."request_uuid" = $1 LIMIT $2[0m  [["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"], ["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mCompanyInfo Load (0.2ms)[0m  [1m[34mSELECT  "company_infos".* FROM "company_infos" WHERE "company_infos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Update (0.4ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["id", 24]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Destroy (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 25]]
  [1m[36mLogBook::Record Destroy (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 26]]
Completed 200 OK in 38ms (Views: 0.1ms | ActiveRecord: 12.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", "2019-06-02 08:44:58.138482"], ["updated_at", "2019-06-02 08:44:58.138482"]]
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 21], ["record_changes", "{\"email\":[null,\"admin\"]}"], ["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.141726"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 21], ["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"], ["created_at", "2019-06-02 08:44:58.144367"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:44:58.155908"], ["updated_at", "2019-06-02 08:44:58.155908"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.157729"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:44:58.163538"], ["updated_at", "2019-06-02 08:44:58.163538"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.164843"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:44:58.168882"], ["updated_at", "2019-06-02 08:44:58.168882"]]
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.170168"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", "2019-06-02 08:44:58.171962"], ["id", 24]]
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[\"test\",\"test1\"]}"], ["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.173072"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:44:58.177350"], ["updated_at", "2019-06-02 08:44:58.177350"]]
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 25], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.181010"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 25]]
  [1m[36mLogBook::Record Create (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 25], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.185033"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:44:58.197718"], ["updated_at", "2019-06-02 08:44:58.197718"]]
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 26], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.199045"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaTrue Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:44:58.209030"], ["updated_at", "2019-06-02 08:44:58.209030"]]
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaTrue"], ["subject_id", 27], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.213348"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaSymbol Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:44:58.232855"], ["updated_at", "2019-06-02 08:44:58.232855"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaSymbol"], ["subject_id", 28], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.234566"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaProc Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:44:58.245137"], ["updated_at", "2019-06-02 08:44:58.245137"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaProc"], ["subject_id", 29], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.248407"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:44:58.262618"], ["updated_at", "2019-06-02 08:44:58.262618"]]
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 30], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.264643"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:44:58.267764"], ["updated_at", "2019-06-02 08:44:58.267764"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 30], ["subject_type", "UserOnly"], ["subject_id", 31], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.269370"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", "2019-06-02 08:44:58.274202"], ["updated_at", "2019-06-02 08:44:58.274202"]]
  [1m[36mLogBook::Record Create (2.9ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 6], ["record_changes", "{\"name\":[null,\"company\"]}"], ["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.276084"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserWithCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 6], ["created_at", "2019-06-02 08:44:58.298707"], ["updated_at", "2019-06-02 08:44:58.298707"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserWithCompany"], ["subject_id", 32], ["parent_type", "Company"], ["parent_id", 6], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,6]}"], ["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.301065"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:44:58.305101"], ["updated_at", "2019-06-02 08:44:58.305101"]]
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 33], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.306340"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["name", "test1"], ["updated_at", "2019-06-02 08:44:58.308209"], ["id", 33]]
  [1m[36mLogBook::Record Create (1.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "UserOnly"], ["author_id", 33], ["subject_type", "UserOnly"], ["subject_id", 33], ["request_uuid", "8952c09a2df6c7bb9cde7fce88357283"], ["action", "register"], ["created_at", "2019-06-02 08:44:58.309562"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (4.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (3.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", "2019-06-02 08:48:04.065976"], ["updated_at", "2019-06-02 08:48:04.065976"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["request_uuid", "4d498786-e7c4-4f82-bec1-f91901f7053b"], ["created_at", "2019-06-02 08:48:04.089949"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (8.6ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (13.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 08:48:17.434538"], ["updated_at", "2019-06-02 08:48:17.434538"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 08:48:17.452581"], ["updated_at", "2019-06-02 08:48:17.452581"]]
  [1m[36mLogBook::Record Create (0.9ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "4b8a708eed79270526cbc8534ec4efe7"], ["action", "create"], ["created_at", "2019-06-02 08:48:17.480974"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 34ms (Views: 0.2ms | ActiveRecord: 3.5ms)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (3.0ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 08:48:17.517322"], ["updated_at", "2019-06-02 08:48:17.517322"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 3], ["record_changes", "{\"email\":[null,\"admin\"],\"name\":[null,\"user\"]}"], ["request_uuid", "4b8a708eed79270526cbc8534ec4efe7"], ["action", "create"], ["created_at", "2019-06-02 08:48:17.518742"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 08:48:17.522989"], ["updated_at", "2019-06-02 08:48:17.522989"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "48c5a7e44d3f1517a08cac9f1032ec0a"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.525178"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 08:48:17.533639"], ["updated_at", "2019-06-02 08:48:17.533639"]]
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 5], ["record_changes", "{\"email\":[null,\"admin\"],\"name\":[null,\"user\"]}"], ["request_uuid", "48c5a7e44d3f1517a08cac9f1032ec0a"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.534994"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.6ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-02 08:48:17.594482"], ["updated_at", "2019-06-02 08:48:17.594482"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "9cc97f05eb2f3ef88b73a756a386774f"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.596289"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-02 08:48:17.597537"], ["updated_at", "2019-06-02 08:48:17.597537"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "9cc97f05eb2f3ef88b73a756a386774f"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.599032"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-02 08:48:17.600288"], ["updated_at", "2019-06-02 08:48:17.600288"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "9cc97f05eb2f3ef88b73a756a386774f"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.601545"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-02 08:48:17.602745"], ["updated_at", "2019-06-02 08:48:17.602745"]]
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "9cc97f05eb2f3ef88b73a756a386774f"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.604078"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 67ms (Views: 0.2ms | ActiveRecord: 11.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 08:48:17.661224"], ["updated_at", "2019-06-02 08:48:17.661224"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 9], ["record_changes", "{\"email\":[null,\"admin\"],\"name\":[null,\"user\"]}"], ["request_uuid", "9cc97f05eb2f3ef88b73a756a386774f"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.663085"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (1.1ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-02 08:48:17.669940"], ["updated_at", "2019-06-02 08:48:17.669940"]]
  [1m[36mLogBook::Record Create (1.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "5c3893a449de95326202a27b521eec82"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.673076"]]
  [1m[36mUserWithAll Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", "2019-06-02 08:48:17.680434"], ["updated_at", "2019-06-02 08:48:17.680434"]]
  [1m[36mLogBook::Record Create (0.9ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "5c3893a449de95326202a27b521eec82"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.685175"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", "2019-06-02 08:48:17.688823"], ["updated_at", "2019-06-02 08:48:17.688823"]]
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "5c3893a449de95326202a27b521eec82"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.690550"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", "2019-06-02 08:48:17.693786"], ["updated_at", "2019-06-02 08:48:17.693786"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "5c3893a449de95326202a27b521eec82"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.695524"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "records" WHERE "records"."request_uuid" = $1 LIMIT $2[0m  [["request_uuid", "5c3893a449de95326202a27b521eec82"], ["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "5c3893a449de95326202a27b521eec82"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Update (1.5ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"10\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"11\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"10\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"11\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["id", 10]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Destroy (1.1ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 11]]
  [1m[36mLogBook::Record Destroy (1.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 12]]
  [1m[36mLogBook::Record Destroy (0.6ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 13]]
Completed 200 OK in 56ms (Views: 0.1ms | ActiveRecord: 13.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 08:48:17.731362"], ["updated_at", "2019-06-02 08:48:17.731362"]]
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "User"], ["subject_id", 13], ["record_changes", "{\"email\":[null,\"admin\"],\"name\":[null,\"user\"]}"], ["request_uuid", "5c3893a449de95326202a27b521eec82"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.732819"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-02 08:48:17.738380"], ["updated_at", "2019-06-02 08:48:17.738380"]]
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["request_uuid", "792aabf44d5a4a22a5e1ea87427658e1"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.739650"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", "2019-06-02 08:48:17.742357"], ["updated_at", "2019-06-02 08:48:17.742357"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "792aabf44d5a4a22a5e1ea87427658e1"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.744080"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", "2019-06-02 08:48:17.745451"], ["updated_at", "2019-06-02 08:48:17.745451"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "792aabf44d5a4a22a5e1ea87427658e1"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.747022"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", "2019-06-02 08:48:17.748184"], ["updated_at", "2019-06-02 08:48:17.748184"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User3\",\"company_name\":null}"], ["request_uuid", "792aabf44d5a4a22a5e1ea87427658e1"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.749564"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "records" WHERE "records"."request_uuid" = $1 LIMIT $2[0m  [["request_uuid", "792aabf44d5a4a22a5e1ea87427658e1"], ["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "792aabf44d5a4a22a5e1ea87427658e1"]]
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Update (0.4ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"users\":{\"14\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"15\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"14\":{\"name\":\"User1\",\"company_name\":null},\"15\":{\"name\":\"User2\",\"company_name\":null},\"16\":{\"name\":\"User3\",\"company_name\":null}}}"], ["id", 15]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Destroy (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 16]]
  [1m[36mLogBook::Record Destroy (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 17]]
  [1m[36mLogBook::Record Destroy (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 18]]
Completed 200 OK in 44ms (Views: 0.1ms | ActiveRecord: 9.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 08:48:17.788160"], ["updated_at", "2019-06-02 08:48:17.788160"]]
  [1m[36mLogBook::Record Create (1.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "User"], ["subject_id", 17], ["record_changes", "{\"email\":[null,\"admin\"],\"name\":[null,\"user\"]}"], ["request_uuid", "792aabf44d5a4a22a5e1ea87427658e1"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.790329"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "something"], ["created_at", "2019-06-02 08:48:17.793585"], ["updated_at", "2019-06-02 08:48:17.793585"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"name\":[null,\"something\"]}"], ["request_uuid", "792aabf44d5a4a22a5e1ea87427658e1"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.794914"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#update as HTML
  Parameters: {"company"=>{"name"=>"something else"}, "id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.2ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["name", "something else"], ["updated_at", "2019-06-02 08:48:17.800105"], ["id", 4]]
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"name\":[\"something\",\"something else\"]}"], ["request_uuid", "8645a333246cd9801155def1a02cb04d"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.801483"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.4ms)[0m  [1m[33mUPDATE "companies" SET "description" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["description", "Something third"], ["updated_at", "2019-06-02 08:48:17.803204"], ["id", 4]]
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"description\":[null,\"Something third\"]}"], ["request_uuid", "8645a333246cd9801155def1a02cb04d"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.805199"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "records" WHERE "records"."request_uuid" = $1 LIMIT $2[0m  [["request_uuid", "8645a333246cd9801155def1a02cb04d"], ["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "8645a333246cd9801155def1a02cb04d"]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mLogBook::Record Destroy (0.6ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 22]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Update (0.4ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1 WHERE "records"."id" = $2[0m  [["record_changes", "{\"name\":[\"something\",\"something else\"],\"description\":[null,\"Something third\"]}"], ["id", 21]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 25ms (Views: 0.2ms | ActiveRecord: 6.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 08:48:17.830644"], ["updated_at", "2019-06-02 08:48:17.830644"]]
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["subject_type", "User"], ["subject_id", 18], ["record_changes", "{\"email\":[null,\"admin\"],\"name\":[null,\"user\"]}"], ["request_uuid", "8645a333246cd9801155def1a02cb04d"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.832033"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-02 08:48:17.863669"], ["updated_at", "2019-06-02 08:48:17.863669"]]
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.865127"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 5], ["created_at", "2019-06-02 08:48:17.866641"], ["updated_at", "2019-06-02 08:48:17.866641"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserWithAll"], ["subject_id", 19], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.868296"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 5], ["created_at", "2019-06-02 08:48:17.869524"], ["updated_at", "2019-06-02 08:48:17.869524"]]
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserWithAll"], ["subject_id", 20], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.870825"]]
  [1m[36mCompanyInfo Create (0.7ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 5], ["created_at", "2019-06-02 08:48:17.872118"], ["updated_at", "2019-06-02 08:48:17.872118"]]
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.874522"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "records" WHERE "records"."request_uuid" = $1 LIMIT $2[0m  [["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"], ["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mCompanyInfo Load (0.2ms)[0m  [1m[34mSELECT  "company_infos".* FROM "company_infos" WHERE "company_infos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Update (0.6ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["id", 24]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Destroy (0.4ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 25]]
  [1m[36mLogBook::Record Destroy (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 26]]
Completed 200 OK in 54ms (Views: 0.2ms | ActiveRecord: 16.0ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", "2019-06-02 08:48:17.903647"], ["updated_at", "2019-06-02 08:48:17.903647"]]
  [1m[36mLogBook::Record Create (1.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 21], ["record_changes", "{\"email\":[null,\"admin\"]}"], ["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.906682"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 21], ["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"], ["created_at", "2019-06-02 08:48:17.910842"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:48:17.927514"], ["updated_at", "2019-06-02 08:48:17.927514"]]
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.929130"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:48:17.933648"], ["updated_at", "2019-06-02 08:48:17.933648"]]
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.935212"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:48:17.944199"], ["updated_at", "2019-06-02 08:48:17.944199"]]
  [1m[36mLogBook::Record Create (1.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.949940"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", "2019-06-02 08:48:17.956280"], ["id", 24]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[\"test\",\"test1\"]}"], ["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.958374"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:48:17.962967"], ["updated_at", "2019-06-02 08:48:17.962967"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 25], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.964522"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 25]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 25], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.967879"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:48:17.979027"], ["updated_at", "2019-06-02 08:48:17.979027"]]
  [1m[36mLogBook::Record Create (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 26], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"], ["action", "register"], ["created_at", "2019-06-02 08:48:17.987141"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaTrue Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:48:18.003212"], ["updated_at", "2019-06-02 08:48:18.003212"]]
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaTrue"], ["subject_id", 27], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"], ["action", "register"], ["created_at", "2019-06-02 08:48:18.005459"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaSymbol Create (2.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:48:18.019538"], ["updated_at", "2019-06-02 08:48:18.019538"]]
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaSymbol"], ["subject_id", 28], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"], ["action", "register"], ["created_at", "2019-06-02 08:48:18.044395"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaProc Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:48:18.081658"], ["updated_at", "2019-06-02 08:48:18.081658"]]
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaProc"], ["subject_id", 29], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"], ["action", "register"], ["created_at", "2019-06-02 08:48:18.088384"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:48:18.096822"], ["updated_at", "2019-06-02 08:48:18.096822"]]
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 30], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"], ["action", "register"], ["created_at", "2019-06-02 08:48:18.098567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:48:18.101653"], ["updated_at", "2019-06-02 08:48:18.101653"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 30], ["subject_type", "UserOnly"], ["subject_id", 31], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"], ["action", "register"], ["created_at", "2019-06-02 08:48:18.103333"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", "2019-06-02 08:48:18.110803"], ["updated_at", "2019-06-02 08:48:18.110803"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 6], ["record_changes", "{\"name\":[null,\"company\"]}"], ["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"], ["action", "register"], ["created_at", "2019-06-02 08:48:18.112378"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserWithCompany Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 6], ["created_at", "2019-06-02 08:48:18.122203"], ["updated_at", "2019-06-02 08:48:18.122203"]]
  [1m[36mLogBook::Record Create (3.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserWithCompany"], ["subject_id", 32], ["parent_type", "Company"], ["parent_id", 6], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,6]}"], ["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"], ["action", "register"], ["created_at", "2019-06-02 08:48:18.125735"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:48:18.140677"], ["updated_at", "2019-06-02 08:48:18.140677"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 33], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"], ["action", "register"], ["created_at", "2019-06-02 08:48:18.143218"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["name", "test1"], ["updated_at", "2019-06-02 08:48:18.145488"], ["id", 33]]
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "UserOnly"], ["author_id", 33], ["subject_type", "UserOnly"], ["subject_id", 33], ["request_uuid", "9ea4a9e94339909ac43e831bb00f9679"], ["action", "register"], ["created_at", "2019-06-02 08:48:18.146686"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (7.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 08:48:47.739684"], ["updated_at", "2019-06-02 08:48:47.739684"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 08:48:47.756455"], ["updated_at", "2019-06-02 08:48:47.756455"]]
  [1m[36mLogBook::Record Create (1.1ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "a1a09258fb8fd148c15f5042e8f02f2f"], ["action", "create"], ["created_at", "2019-06-02 08:48:47.779505"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 28ms (Views: 0.2ms | ActiveRecord: 3.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 08:48:47.796943"], ["updated_at", "2019-06-02 08:48:47.796943"]]
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 3], ["record_changes", "{\"email\":[null,\"admin\"],\"name\":[null,\"user\"]}"], ["request_uuid", "a1a09258fb8fd148c15f5042e8f02f2f"], ["action", "create"], ["created_at", "2019-06-02 08:48:47.798797"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 08:48:47.803558"], ["updated_at", "2019-06-02 08:48:47.803558"]]
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "f3a220d3d583a9d0f68f26f14b3be0bf"], ["action", "register"], ["created_at", "2019-06-02 08:48:47.804775"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 08:48:47.811834"], ["updated_at", "2019-06-02 08:48:47.811834"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 5], ["record_changes", "{\"email\":[null,\"admin\"],\"name\":[null,\"user\"]}"], ["request_uuid", "f3a220d3d583a9d0f68f26f14b3be0bf"], ["action", "register"], ["created_at", "2019-06-02 08:48:47.813211"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.7ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-02 08:48:47.846687"], ["updated_at", "2019-06-02 08:48:47.846687"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "9dfb357ffe0133280e05745aec52389b"], ["action", "register"], ["created_at", "2019-06-02 08:48:47.849366"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-02 08:48:47.850576"], ["updated_at", "2019-06-02 08:48:47.850576"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "9dfb357ffe0133280e05745aec52389b"], ["action", "register"], ["created_at", "2019-06-02 08:48:47.851932"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-02 08:48:47.853197"], ["updated_at", "2019-06-02 08:48:47.853197"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "9dfb357ffe0133280e05745aec52389b"], ["action", "register"], ["created_at", "2019-06-02 08:48:47.854767"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-02 08:48:47.855960"], ["updated_at", "2019-06-02 08:48:47.855960"]]
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "9dfb357ffe0133280e05745aec52389b"], ["action", "register"], ["created_at", "2019-06-02 08:48:47.857265"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 42ms (Views: 0.1ms | ActiveRecord: 5.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.9ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 08:48:47.899184"], ["updated_at", "2019-06-02 08:48:47.899184"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 9], ["record_changes", "{\"email\":[null,\"admin\"],\"name\":[null,\"user\"]}"], ["request_uuid", "9dfb357ffe0133280e05745aec52389b"], ["action", "register"], ["created_at", "2019-06-02 08:48:47.901909"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-02 08:48:47.909548"], ["updated_at", "2019-06-02 08:48:47.909548"]]
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "ac662e52a42227e981f957156cd408cf"], ["action", "register"], ["created_at", "2019-06-02 08:48:47.911376"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", "2019-06-02 08:48:47.913017"], ["updated_at", "2019-06-02 08:48:47.913017"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "ac662e52a42227e981f957156cd408cf"], ["action", "register"], ["created_at", "2019-06-02 08:48:47.918563"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", "2019-06-02 08:48:47.919856"], ["updated_at", "2019-06-02 08:48:47.919856"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "ac662e52a42227e981f957156cd408cf"], ["action", "register"], ["created_at", "2019-06-02 08:48:47.921468"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", "2019-06-02 08:48:47.922639"], ["updated_at", "2019-06-02 08:48:47.922639"]]
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "ac662e52a42227e981f957156cd408cf"], ["action", "register"], ["created_at", "2019-06-02 08:48:47.923900"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "records" WHERE "records"."request_uuid" = $1 LIMIT $2[0m  [["request_uuid", "ac662e52a42227e981f957156cd408cf"], ["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "ac662e52a42227e981f957156cd408cf"]]
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Update (0.3ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"10\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"11\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"10\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"11\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["id", 10]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Destroy (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 11]]
  [1m[36mLogBook::Record Destroy (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 12]]
  [1m[36mLogBook::Record Destroy (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 13]]
Completed 200 OK in 36ms (Views: 0.2ms | ActiveRecord: 7.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 08:48:47.948669"], ["updated_at", "2019-06-02 08:48:47.948669"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "User"], ["subject_id", 13], ["record_changes", "{\"email\":[null,\"admin\"],\"name\":[null,\"user\"]}"], ["request_uuid", "ac662e52a42227e981f957156cd408cf"], ["action", "register"], ["created_at", "2019-06-02 08:48:47.950146"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-02 08:48:47.955002"], ["updated_at", "2019-06-02 08:48:47.955002"]]
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["request_uuid", "8a2a65bd1b79805ff783d9e2dbbcddfc"], ["action", "register"], ["created_at", "2019-06-02 08:48:47.956087"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", "2019-06-02 08:48:47.956977"], ["updated_at", "2019-06-02 08:48:47.956977"]]
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "8a2a65bd1b79805ff783d9e2dbbcddfc"], ["action", "register"], ["created_at", "2019-06-02 08:48:47.958167"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", "2019-06-02 08:48:47.959159"], ["updated_at", "2019-06-02 08:48:47.959159"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "8a2a65bd1b79805ff783d9e2dbbcddfc"], ["action", "register"], ["created_at", "2019-06-02 08:48:47.960346"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", "2019-06-02 08:48:47.961719"], ["updated_at", "2019-06-02 08:48:47.961719"]]
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User3\",\"company_name\":null}"], ["request_uuid", "8a2a65bd1b79805ff783d9e2dbbcddfc"], ["action", "register"], ["created_at", "2019-06-02 08:48:47.963442"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "records" WHERE "records"."request_uuid" = $1 LIMIT $2[0m  [["request_uuid", "8a2a65bd1b79805ff783d9e2dbbcddfc"], ["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "8a2a65bd1b79805ff783d9e2dbbcddfc"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Update (0.2ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"users\":{\"14\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"15\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"14\":{\"name\":\"User1\",\"company_name\":null},\"15\":{\"name\":\"User2\",\"company_name\":null},\"16\":{\"name\":\"User3\",\"company_name\":null}}}"], ["id", 15]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Destroy (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 16]]
  [1m[36mLogBook::Record Destroy (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 17]]
  [1m[36mLogBook::Record Destroy (0.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 18]]
Completed 200 OK in 22ms (Views: 0.1ms | ActiveRecord: 4.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 08:48:47.980390"], ["updated_at", "2019-06-02 08:48:47.980390"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "User"], ["subject_id", 17], ["record_changes", "{\"email\":[null,\"admin\"],\"name\":[null,\"user\"]}"], ["request_uuid", "8a2a65bd1b79805ff783d9e2dbbcddfc"], ["action", "register"], ["created_at", "2019-06-02 08:48:47.982141"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "something"], ["created_at", "2019-06-02 08:48:47.983820"], ["updated_at", "2019-06-02 08:48:47.983820"]]
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"name\":[null,\"something\"]}"], ["request_uuid", "8a2a65bd1b79805ff783d9e2dbbcddfc"], ["action", "register"], ["created_at", "2019-06-02 08:48:47.984883"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#update as HTML
  Parameters: {"company"=>{"name"=>"something else"}, "id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.2ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["name", "something else"], ["updated_at", "2019-06-02 08:48:47.989582"], ["id", 4]]
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"name\":[\"something\",\"something else\"]}"], ["request_uuid", "aadc8b7772f3cfdcd6567994d94d8959"], ["action", "register"], ["created_at", "2019-06-02 08:48:47.990909"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.7ms)[0m  [1m[33mUPDATE "companies" SET "description" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["description", "Something third"], ["updated_at", "2019-06-02 08:48:47.992424"], ["id", 4]]
  [1m[36mLogBook::Record Create (1.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"description\":[null,\"Something third\"]}"], ["request_uuid", "aadc8b7772f3cfdcd6567994d94d8959"], ["action", "register"], ["created_at", "2019-06-02 08:48:47.996395"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "records" WHERE "records"."request_uuid" = $1 LIMIT $2[0m  [["request_uuid", "aadc8b7772f3cfdcd6567994d94d8959"], ["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "aadc8b7772f3cfdcd6567994d94d8959"]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mLogBook::Record Destroy (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 22]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Update (0.2ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1 WHERE "records"."id" = $2[0m  [["record_changes", "{\"name\":[\"something\",\"something else\"],\"description\":[null,\"Something third\"]}"], ["id", 21]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 22ms (Views: 0.1ms | ActiveRecord: 4.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 08:48:48.015496"], ["updated_at", "2019-06-02 08:48:48.015496"]]
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["subject_type", "User"], ["subject_id", 18], ["record_changes", "{\"email\":[null,\"admin\"],\"name\":[null,\"user\"]}"], ["request_uuid", "aadc8b7772f3cfdcd6567994d94d8959"], ["action", "register"], ["created_at", "2019-06-02 08:48:48.017523"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-02 08:48:48.042970"], ["updated_at", "2019-06-02 08:48:48.042970"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["request_uuid", "f340ab65d7e1775700fdf184ed09754f"], ["action", "register"], ["created_at", "2019-06-02 08:48:48.044912"]]
  [1m[36mUserWithAll Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 5], ["created_at", "2019-06-02 08:48:48.046341"], ["updated_at", "2019-06-02 08:48:48.046341"]]
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserWithAll"], ["subject_id", 19], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "f340ab65d7e1775700fdf184ed09754f"], ["action", "register"], ["created_at", "2019-06-02 08:48:48.048582"]]
  [1m[36mUserWithAll Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 5], ["created_at", "2019-06-02 08:48:48.050811"], ["updated_at", "2019-06-02 08:48:48.050811"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserWithAll"], ["subject_id", 20], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "f340ab65d7e1775700fdf184ed09754f"], ["action", "register"], ["created_at", "2019-06-02 08:48:48.053119"]]
  [1m[36mCompanyInfo Create (0.7ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 5], ["created_at", "2019-06-02 08:48:48.054516"], ["updated_at", "2019-06-02 08:48:48.054516"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "f340ab65d7e1775700fdf184ed09754f"], ["action", "register"], ["created_at", "2019-06-02 08:48:48.056203"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "records" WHERE "records"."request_uuid" = $1 LIMIT $2[0m  [["request_uuid", "f340ab65d7e1775700fdf184ed09754f"], ["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "f340ab65d7e1775700fdf184ed09754f"]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mCompanyInfo Load (0.2ms)[0m  [1m[34mSELECT  "company_infos".* FROM "company_infos" WHERE "company_infos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Update (0.3ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["id", 24]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Destroy (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 25]]
  [1m[36mLogBook::Record Destroy (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 26]]
Completed 200 OK in 45ms (Views: 0.1ms | ActiveRecord: 11.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", "2019-06-02 08:48:48.069477"], ["updated_at", "2019-06-02 08:48:48.069477"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 21], ["record_changes", "{\"email\":[null,\"admin\"]}"], ["request_uuid", "f340ab65d7e1775700fdf184ed09754f"], ["action", "register"], ["created_at", "2019-06-02 08:48:48.070970"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 21], ["request_uuid", "f340ab65d7e1775700fdf184ed09754f"], ["created_at", "2019-06-02 08:48:48.072578"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:49:22.885603"], ["updated_at", "2019-06-02 08:49:22.885603"]]
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "f340ab65d7e1775700fdf184ed09754f"], ["action", "register"], ["created_at", "2019-06-02 08:49:22.889843"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:49:22.896196"], ["updated_at", "2019-06-02 08:49:22.896196"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "f340ab65d7e1775700fdf184ed09754f"], ["action", "register"], ["created_at", "2019-06-02 08:49:22.897906"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:49:22.903247"], ["updated_at", "2019-06-02 08:49:22.903247"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "f340ab65d7e1775700fdf184ed09754f"], ["action", "register"], ["created_at", "2019-06-02 08:49:22.904942"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", "2019-06-02 08:49:22.908413"], ["id", 24]]
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[\"test\",\"test1\"]}"], ["request_uuid", "f340ab65d7e1775700fdf184ed09754f"], ["action", "register"], ["created_at", "2019-06-02 08:49:22.910661"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:49:22.915752"], ["updated_at", "2019-06-02 08:49:22.915752"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 25], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "f340ab65d7e1775700fdf184ed09754f"], ["action", "register"], ["created_at", "2019-06-02 08:49:22.917331"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 25]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 25], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "f340ab65d7e1775700fdf184ed09754f"], ["action", "register"], ["created_at", "2019-06-02 08:49:22.920621"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:49:22.927212"], ["updated_at", "2019-06-02 08:49:22.927212"]]
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 26], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "f340ab65d7e1775700fdf184ed09754f"], ["action", "register"], ["created_at", "2019-06-02 08:49:22.929346"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaTrue Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:49:22.953405"], ["updated_at", "2019-06-02 08:49:22.953405"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaTrue"], ["subject_id", 27], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "f340ab65d7e1775700fdf184ed09754f"], ["action", "register"], ["created_at", "2019-06-02 08:49:22.955235"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaSymbol Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:49:22.967708"], ["updated_at", "2019-06-02 08:49:22.967708"]]
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaSymbol"], ["subject_id", 28], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "f340ab65d7e1775700fdf184ed09754f"], ["action", "register"], ["created_at", "2019-06-02 08:49:22.969700"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (3.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaProc Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:49:22.986268"], ["updated_at", "2019-06-02 08:49:22.986268"]]
  [1m[36mLogBook::Record Create (3.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaProc"], ["subject_id", 29], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "f340ab65d7e1775700fdf184ed09754f"], ["action", "register"], ["created_at", "2019-06-02 08:49:22.988376"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:49:22.998828"], ["updated_at", "2019-06-02 08:49:22.998828"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 30], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "f340ab65d7e1775700fdf184ed09754f"], ["action", "register"], ["created_at", "2019-06-02 08:49:23.000512"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:49:23.002915"], ["updated_at", "2019-06-02 08:49:23.002915"]]
  [1m[36mLogBook::Record Create (1.1ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 30], ["subject_type", "UserOnly"], ["subject_id", 31], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "f340ab65d7e1775700fdf184ed09754f"], ["action", "register"], ["created_at", "2019-06-02 08:49:23.004365"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (2.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", "2019-06-02 08:49:23.017648"], ["updated_at", "2019-06-02 08:49:23.017648"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 6], ["record_changes", "{\"name\":[null,\"company\"]}"], ["request_uuid", "f340ab65d7e1775700fdf184ed09754f"], ["action", "register"], ["created_at", "2019-06-02 08:49:23.019147"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserWithCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 6], ["created_at", "2019-06-02 08:49:23.029081"], ["updated_at", "2019-06-02 08:49:23.029081"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserWithCompany"], ["subject_id", 32], ["parent_type", "Company"], ["parent_id", 6], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,6]}"], ["request_uuid", "f340ab65d7e1775700fdf184ed09754f"], ["action", "register"], ["created_at", "2019-06-02 08:49:23.030886"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-02 08:49:23.035344"], ["updated_at", "2019-06-02 08:49:23.035344"]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 33], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "f340ab65d7e1775700fdf184ed09754f"], ["action", "register"], ["created_at", "2019-06-02 08:49:23.037055"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["name", "test1"], ["updated_at", "2019-06-02 08:49:23.039705"], ["id", 33]]
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "UserOnly"], ["author_id", 33], ["subject_type", "UserOnly"], ["subject_id", 33], ["request_uuid", "f340ab65d7e1775700fdf184ed09754f"], ["action", "register"], ["created_at", "2019-06-02 08:49:23.041349"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", "2019-06-02 09:12:17.906736"], ["updated_at", "2019-06-02 09:12:17.906736"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["request_uuid", "47c09fc2-8f61-45db-8f36-3cb2270185ed"], ["created_at", "2019-06-02 09:12:17.928214"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", "2019-06-02 09:13:15.327424"], ["updated_at", "2019-06-02 09:13:15.327424"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.1ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["request_uuid", "65920c52-f4bb-469f-83aa-e1dc5c6ef7e3"], ["created_at", "2019-06-02 09:13:30.406984"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", "2019-06-02 09:13:58.801010"], ["updated_at", "2019-06-02 09:13:58.801010"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.9ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["request_uuid", "d7751fb3-ae87-41a5-b4ba-2ec643d5b420"], ["created_at", "2019-06-02 09:14:02.041887"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (3.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (15.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:15:08.117527"], ["updated_at", "2019-06-02 09:15:08.117527"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 09:15:09.808901"], ["updated_at", "2019-06-02 09:15:09.808901"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 1606ms (ActiveRecord: 0.9ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:15:11.424478"], ["updated_at", "2019-06-02 09:15:11.424478"]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:15:34.384464"], ["updated_at", "2019-06-02 09:15:34.384464"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:15:35.520280"], ["updated_at", "2019-06-02 09:15:35.520280"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:15:35.996753"], ["updated_at", "2019-06-02 09:15:35.996753"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:15:36.412239"], ["updated_at", "2019-06-02 09:15:36.412239"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:15:36.847228"], ["updated_at", "2019-06-02 09:15:36.847228"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (10.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:16:01.794475"], ["updated_at", "2019-06-02 09:16:01.794475"]]
  [1m[35m (3.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (4.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (5.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:17:50.371086"], ["updated_at", "2019-06-02 09:17:50.371086"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 09:20:15.388931"], ["updated_at", "2019-06-02 09:20:15.388931"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 569ms (Views: 0.4ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:20:21.915356"], ["updated_at", "2019-06-02 09:20:21.915356"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (14.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (4.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:21:04.902003"], ["updated_at", "2019-06-02 09:21:04.902003"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 09:21:44.667296"], ["updated_at", "2019-06-02 09:21:44.667296"]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 1153ms (ActiveRecord: 1.3ms)
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (5.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:21:56.072172"], ["updated_at", "2019-06-02 09:21:56.072172"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 09:22:33.884557"], ["updated_at", "2019-06-02 09:22:33.884557"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 25954ms (ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (12.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:23:29.311712"], ["updated_at", "2019-06-02 09:23:29.311712"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 09:23:31.074802"], ["updated_at", "2019-06-02 09:23:31.074802"]]
  [1m[35m (4.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (9.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:24:47.253937"], ["updated_at", "2019-06-02 09:24:47.253937"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 09:24:47.267830"], ["updated_at", "2019-06-02 09:24:47.267830"]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 94972ms (ActiveRecord: 0.8ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (13.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:26:28.740828"], ["updated_at", "2019-06-02 09:26:28.740828"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 09:26:28.753707"], ["updated_at", "2019-06-02 09:26:28.753707"]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 6660ms (ActiveRecord: 1.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:27:14.234384"], ["updated_at", "2019-06-02 09:27:14.234384"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 09:27:14.249680"], ["updated_at", "2019-06-02 09:27:14.249680"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 50378ms (Views: 0.3ms | ActiveRecord: 2.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:28:10.985534"], ["updated_at", "2019-06-02 09:28:10.985534"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 09:28:11.009373"], ["updated_at", "2019-06-02 09:28:11.009373"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5403ms (Views: 0.4ms | ActiveRecord: 2.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (3.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:29:51.100496"], ["updated_at", "2019-06-02 09:29:51.100496"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 09:29:55.217716"], ["updated_at", "2019-06-02 09:29:55.217716"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13280ms (Views: 0.3ms | ActiveRecord: 10.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (10.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:43:07.293036"], ["updated_at", "2019-06-02 09:43:07.293036"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 09:43:07.308556"], ["updated_at", "2019-06-02 09:43:07.308556"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 29ms (Views: 0.4ms | ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:43:31.940936"], ["updated_at", "2019-06-02 09:43:31.940936"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 09:43:31.957285"], ["updated_at", "2019-06-02 09:43:31.957285"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 18ms (Views: 0.1ms | ActiveRecord: 2.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (5.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:44:18.860378"], ["updated_at", "2019-06-02 09:44:18.860378"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 09:44:18.878358"], ["updated_at", "2019-06-02 09:44:18.878358"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "a3a3228df4bbaf5f284e2f449972378d"], ["action", "users#create"], ["created_at", "2019-06-02 09:44:18.905301"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 32ms (Views: 0.1ms | ActiveRecord: 7.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (7.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:45:32.289699"], ["updated_at", "2019-06-02 09:45:32.289699"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 09:45:32.302745"], ["updated_at", "2019-06-02 09:45:32.302745"]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 28ms (ActiveRecord: 2.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (6.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:46:02.164207"], ["updated_at", "2019-06-02 09:46:02.164207"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 09:46:02.181631"], ["updated_at", "2019-06-02 09:46:02.181631"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "46c92fafc62b7c8922ae88cf0bc7bb97"], ["action", "users#create"], ["created_at", "2019-06-02 09:46:02.205254"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 27ms (Views: 0.1ms | ActiveRecord: 3.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (11.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (6.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:46:38.470831"], ["updated_at", "2019-06-02 09:46:38.470831"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 09:46:38.484567"], ["updated_at", "2019-06-02 09:46:38.484567"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (3.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "6f9eaf27363bd0a73e7c343c2ef91f69"], ["action", "users#create"], ["created_at", "2019-06-02 09:46:38.504265"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 27ms (Views: 0.3ms | ActiveRecord: 5.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:46:38.523568"], ["updated_at", "2019-06-02 09:46:38.523568"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 09:46:38.528221"], ["updated_at", "2019-06-02 09:46:38.528221"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "af617915c8e2f2c58f46c9403ef530fc"], ["action", "register"], ["created_at", "2019-06-02 09:46:38.530727"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:48:09.392387"], ["updated_at", "2019-06-02 09:48:09.392387"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 09:48:09.407884"], ["updated_at", "2019-06-02 09:48:09.407884"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "f560c872faa08588c18696c267e8eb5b"], ["action", "users#create"], ["created_at", "2019-06-02 09:48:09.431828"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 30ms (Views: 0.1ms | ActiveRecord: 3.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:48:09.447471"], ["updated_at", "2019-06-02 09:48:09.447471"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-02 09:48:09.451719"], ["updated_at", "2019-06-02 09:48:09.451719"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "3fb3a5a74a9232b094ec1bee15c3872b"], ["action", "register"], ["created_at", "2019-06-02 09:48:09.453698"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (5.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:48:55.377522"], ["updated_at", "2019-06-02 09:48:55.377522"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-02 09:48:55.445155"], ["updated_at", "2019-06-02 09:48:55.445155"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-02 09:48:55.456472"], ["updated_at", "2019-06-02 09:48:55.456472"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 60ms (ActiveRecord: 4.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:49:29.997843"], ["updated_at", "2019-06-02 09:49:29.997843"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-02 09:49:30.039736"], ["updated_at", "2019-06-02 09:49:30.039736"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-02 09:49:30.051130"], ["updated_at", "2019-06-02 09:49:30.051130"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 51ms (ActiveRecord: 4.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:49:39.807484"], ["updated_at", "2019-06-02 09:49:39.807484"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-02 09:49:39.849825"], ["updated_at", "2019-06-02 09:49:39.849825"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-02 09:49:39.860919"], ["updated_at", "2019-06-02 09:49:39.860919"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-02 09:49:39.862375"], ["updated_at", "2019-06-02 09:49:39.862375"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-02 09:49:39.863477"], ["updated_at", "2019-06-02 09:49:39.863477"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "4ebae1dc9b0f38c436044238113695ec"], ["action", "companies#create"], ["created_at", "2019-06-02 09:49:39.866078"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "4ebae1dc9b0f38c436044238113695ec"], ["action", "companies#create"], ["created_at", "2019-06-02 09:49:39.868222"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "4ebae1dc9b0f38c436044238113695ec"], ["action", "companies#create"], ["created_at", "2019-06-02 09:49:39.869673"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "4ebae1dc9b0f38c436044238113695ec"], ["action", "companies#create"], ["created_at", "2019-06-02 09:49:39.871033"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 52ms (Views: 0.1ms | ActiveRecord: 8.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:49:55.310061"], ["updated_at", "2019-06-02 09:49:55.310061"]]
  [1m[35m (1.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-02 09:49:55.351797"], ["updated_at", "2019-06-02 09:49:55.351797"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-02 09:49:55.365966"], ["updated_at", "2019-06-02 09:49:55.365966"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-02 09:49:55.367480"], ["updated_at", "2019-06-02 09:49:55.367480"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-02 09:49:55.368584"], ["updated_at", "2019-06-02 09:49:55.368584"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "92ec6b332a39458e149a8ff0d01d9d4e"], ["action", "companies#create"], ["created_at", "2019-06-02 09:49:55.370682"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "92ec6b332a39458e149a8ff0d01d9d4e"], ["action", "companies#create"], ["created_at", "2019-06-02 09:49:55.372605"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "92ec6b332a39458e149a8ff0d01d9d4e"], ["action", "companies#create"], ["created_at", "2019-06-02 09:49:55.374069"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "92ec6b332a39458e149a8ff0d01d9d4e"], ["action", "companies#create"], ["created_at", "2019-06-02 09:49:55.375559"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 52ms (Views: 0.1ms | ActiveRecord: 8.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:49:55.415017"], ["updated_at", "2019-06-02 09:49:55.415017"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-02 09:49:55.422723"], ["updated_at", "2019-06-02 09:49:55.422723"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", "2019-06-02 09:49:55.424010"], ["updated_at", "2019-06-02 09:49:55.424010"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", "2019-06-02 09:49:55.425272"], ["updated_at", "2019-06-02 09:49:55.425272"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", "2019-06-02 09:49:55.426651"], ["updated_at", "2019-06-02 09:49:55.426651"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 2], ["request_uuid", "995c87dbab34435ea06a74d33638581c"], ["action", "companies#create"], ["created_at", "2019-06-02 09:49:55.429865"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "995c87dbab34435ea06a74d33638581c"], ["action", "companies#create"], ["created_at", "2019-06-02 09:49:55.431999"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "995c87dbab34435ea06a74d33638581c"], ["action", "companies#create"], ["created_at", "2019-06-02 09:49:55.434163"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User3\",\"company_name\":null}"], ["request_uuid", "995c87dbab34435ea06a74d33638581c"], ["action", "companies#create"], ["created_at", "2019-06-02 09:49:55.436447"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 5.0ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:49:55.444735"], ["updated_at", "2019-06-02 09:49:55.444735"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "something"], ["created_at", "2019-06-02 09:49:55.447280"], ["updated_at", "2019-06-02 09:49:55.447280"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#update as HTML
  Parameters: {"company"=>{"name"=>"something else"}, "id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.2ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["name", "something else"], ["updated_at", "2019-06-02 09:49:55.452401"], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.2ms)[0m  [1m[33mUPDATE "companies" SET "description" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["description", "Something third"], ["updated_at", "2019-06-02 09:49:55.454147"], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "{\"name\":[\"something\",\"something else\"],\"description\":[null,\"Something third\"]}"], ["request_uuid", "dac77655806faee77a1acaadb6d8b27a"], ["action", "companies#update"], ["created_at", "2019-06-02 09:49:55.455803"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:49:55.465765"], ["updated_at", "2019-06-02 09:49:55.465765"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-02 09:49:55.482075"], ["updated_at", "2019-06-02 09:49:55.482075"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 4], ["created_at", "2019-06-02 09:49:55.483566"], ["updated_at", "2019-06-02 09:49:55.483566"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 4], ["created_at", "2019-06-02 09:49:55.485111"], ["updated_at", "2019-06-02 09:49:55.485111"]]
  [1m[36mCompanyInfo Create (0.6ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 4], ["created_at", "2019-06-02 09:49:55.486452"], ["updated_at", "2019-06-02 09:49:55.486452"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 10], ["subject_type", "Company"], ["subject_id", 4], ["request_uuid", "fd4df36609ace9e98a5b2731f49998d5"], ["action", "companies#create"], ["created_at", "2019-06-02 09:49:55.488807"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 10], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 4], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,4]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "fd4df36609ace9e98a5b2731f49998d5"], ["action", "companies#create"], ["created_at", "2019-06-02 09:49:55.490100"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 10], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 4], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,4]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "fd4df36609ace9e98a5b2731f49998d5"], ["action", "companies#create"], ["created_at", "2019-06-02 09:49:55.491832"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 10], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 4], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,4]}"], ["request_uuid", "fd4df36609ace9e98a5b2731f49998d5"], ["action", "companies#create"], ["created_at", "2019-06-02 09:49:55.493698"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 27ms (Views: 0.1ms | ActiveRecord: 6.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (2.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-02 09:50:07.900562"], ["updated_at", "2019-06-02 09:50:07.900562"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-02 09:50:07.953638"], ["updated_at", "2019-06-02 09:50:07.953638"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-02 09:50:07.964274"], ["updated_at", "2019-06-02 09:50:07.964274"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-02 09:50:07.965534"], ["updated_at", "2019-06-02 09:50:07.965534"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-02 09:50:07.966885"], ["updated_at", "2019-06-02 09:50:07.966885"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "787e7c2d2a396614323227aaca8b2e58"], ["action", "companies#create"], ["created_at", "2019-06-02 09:50:07.969588"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "787e7c2d2a396614323227aaca8b2e58"], ["action", "companies#create"], ["created_at", "2019-06-02 09:50:07.971415"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "787e7c2d2a396614323227aaca8b2e58"], ["action", "companies#create"], ["created_at", "2019-06-02 09:50:07.972787"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "787e7c2d2a396614323227aaca8b2e58"], ["action", "companies#create"], ["created_at", "2019-06-02 09:50:07.974324"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 57ms (Views: 0.2ms | ActiveRecord: 8.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (44.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (17.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (4.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (4.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (3.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-09 09:01:34.123296"], ["updated_at", "2019-06-09 09:01:34.123296"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (1.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-09 09:01:34.174951"], ["updated_at", "2019-06-09 09:01:34.174951"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-09 09:01:34.189629"], ["updated_at", "2019-06-09 09:01:34.189629"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-09 09:01:34.191005"], ["updated_at", "2019-06-09 09:01:34.191005"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-09 09:01:34.192034"], ["updated_at", "2019-06-09 09:01:34.192034"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (3.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "046e9744ffec07d0a8d6f5a550758d5c"], ["action", "companies#create"], ["created_at", "2019-06-09 09:01:53.217850"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "046e9744ffec07d0a8d6f5a550758d5c"], ["action", "companies#create"], ["created_at", "2019-06-09 09:01:53.223630"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "046e9744ffec07d0a8d6f5a550758d5c"], ["action", "companies#create"], ["created_at", "2019-06-09 09:01:53.226227"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "046e9744ffec07d0a8d6f5a550758d5c"], ["action", "companies#create"], ["created_at", "2019-06-09 09:01:53.228391"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 19090ms (Views: 0.1ms | ActiveRecord: 11.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (7.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-09 09:02:17.309268"], ["updated_at", "2019-06-09 09:02:17.309268"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-09 09:02:17.356183"], ["updated_at", "2019-06-09 09:02:17.356183"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-09 09:02:17.367453"], ["updated_at", "2019-06-09 09:02:17.367453"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-09 09:02:17.368783"], ["updated_at", "2019-06-09 09:02:17.368783"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-09 09:02:17.369853"], ["updated_at", "2019-06-09 09:02:17.369853"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "dd86b22436e63e736d34460e0d09ce86"], ["action", "companies#create"], ["created_at", "2019-06-09 09:02:26.175464"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "dd86b22436e63e736d34460e0d09ce86"], ["action", "companies#create"], ["created_at", "2019-06-09 09:02:26.178698"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "dd86b22436e63e736d34460e0d09ce86"], ["action", "companies#create"], ["created_at", "2019-06-09 09:02:26.181295"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "dd86b22436e63e736d34460e0d09ce86"], ["action", "companies#create"], ["created_at", "2019-06-09 09:02:26.185926"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8860ms (Views: 0.1ms | ActiveRecord: 8.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-09 09:02:26.215118"], ["updated_at", "2019-06-09 09:02:26.215118"]]
  [1m[35m (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-09 09:02:26.237367"], ["updated_at", "2019-06-09 09:02:26.237367"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", "2019-06-09 09:02:26.238797"], ["updated_at", "2019-06-09 09:02:26.238797"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", "2019-06-09 09:02:26.240131"], ["updated_at", "2019-06-09 09:02:26.240131"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", "2019-06-09 09:02:26.241615"], ["updated_at", "2019-06-09 09:02:26.241615"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 2], ["request_uuid", "ffb9085dff50332259b4b75b7b263a06"], ["action", "companies#create"], ["created_at", "2019-06-09 09:02:34.223829"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "ffb9085dff50332259b4b75b7b263a06"], ["action", "companies#create"], ["created_at", "2019-06-09 09:02:34.225973"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "ffb9085dff50332259b4b75b7b263a06"], ["action", "companies#create"], ["created_at", "2019-06-09 09:02:34.228252"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User3\",\"company_name\":null}"], ["request_uuid", "ffb9085dff50332259b4b75b7b263a06"], ["action", "companies#create"], ["created_at", "2019-06-09 09:02:34.230621"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8001ms (Views: 0.2ms | ActiveRecord: 4.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-09 09:02:34.241330"], ["updated_at", "2019-06-09 09:02:34.241330"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "something"], ["created_at", "2019-06-09 09:02:34.244166"], ["updated_at", "2019-06-09 09:02:34.244166"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#update as HTML
  Parameters: {"company"=>{"name"=>"something else"}, "id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.9ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["name", "something else"], ["updated_at", "2019-06-09 09:02:34.250763"], ["id", 3]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.5ms)[0m  [1m[33mUPDATE "companies" SET "description" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["description", "Something third"], ["updated_at", "2019-06-09 09:02:34.254879"], ["id", 3]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "{\"name\":[\"something\",\"something else\"],\"description\":[null,\"Something third\"]}"], ["request_uuid", "57831425ee9056372c2d0108b9fa50f5"], ["action", "companies#update"], ["created_at", "2019-06-09 09:02:34.927256"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 681ms (Views: 0.3ms | ActiveRecord: 3.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-09 09:02:34.941980"], ["updated_at", "2019-06-09 09:02:34.941980"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-09 09:02:34.962811"], ["updated_at", "2019-06-09 09:02:34.962811"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 4], ["created_at", "2019-06-09 09:02:34.964488"], ["updated_at", "2019-06-09 09:02:34.964488"]]
  [1m[36mUserWithAll Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 4], ["created_at", "2019-06-09 09:02:34.966052"], ["updated_at", "2019-06-09 09:02:34.966052"]]
  [1m[36mCompanyInfo Create (2.2ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 4], ["created_at", "2019-06-09 09:02:34.969057"], ["updated_at", "2019-06-09 09:02:34.969057"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 10], ["subject_type", "Company"], ["subject_id", 4], ["request_uuid", "b8f4ed61fa38a0d9f344738f8c7affd0"], ["action", "companies#create"], ["created_at", "2019-06-09 09:02:35.451536"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 10], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 4], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,4]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "b8f4ed61fa38a0d9f344738f8c7affd0"], ["action", "companies#create"], ["created_at", "2019-06-09 09:02:35.453780"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 10], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 4], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,4]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "b8f4ed61fa38a0d9f344738f8c7affd0"], ["action", "companies#create"], ["created_at", "2019-06-09 09:02:35.456213"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 10], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 4], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,4]}"], ["request_uuid", "b8f4ed61fa38a0d9f344738f8c7affd0"], ["action", "companies#create"], ["created_at", "2019-06-09 09:02:35.457911"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 513ms (Views: 0.3ms | ActiveRecord: 9.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (6.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (2.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-09 09:02:48.017068"], ["updated_at", "2019-06-09 09:02:48.017068"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-09 09:02:48.080780"], ["updated_at", "2019-06-09 09:02:48.080780"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-09 09:02:48.091882"], ["updated_at", "2019-06-09 09:02:48.091882"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-09 09:02:48.093186"], ["updated_at", "2019-06-09 09:02:48.093186"]]
  [1m[36mUserWithAll Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-09 09:02:48.094738"], ["updated_at", "2019-06-09 09:02:48.094738"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "2fb088d67018d945fe59d8f5c433ad97"], ["action", "companies#create"], ["created_at", "2019-06-09 09:02:48.913397"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "2fb088d67018d945fe59d8f5c433ad97"], ["action", "companies#create"], ["created_at", "2019-06-09 09:02:48.916540"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "2fb088d67018d945fe59d8f5c433ad97"], ["action", "companies#create"], ["created_at", "2019-06-09 09:02:48.918440"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "2fb088d67018d945fe59d8f5c433ad97"], ["action", "companies#create"], ["created_at", "2019-06-09 09:02:48.920231"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 872ms (Views: 0.1ms | ActiveRecord: 8.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (3.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-09 09:39:44.389477"], ["updated_at", "2019-06-09 09:39:44.389477"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.6ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-09 09:39:44.436050"], ["updated_at", "2019-06-09 09:39:44.436050"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 36ms (ActiveRecord: 2.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (8.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-09 09:40:09.792415"], ["updated_at", "2019-06-09 09:40:09.792415"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-09 09:40:09.835692"], ["updated_at", "2019-06-09 09:40:09.835692"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 33ms (ActiveRecord: 3.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (12.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-09 09:40:33.908732"], ["updated_at", "2019-06-09 09:40:33.908732"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-09 09:40:33.949954"], ["updated_at", "2019-06-09 09:40:33.949954"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 32ms (ActiveRecord: 4.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-09 09:40:46.306348"], ["updated_at", "2019-06-09 09:40:46.306348"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (1.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-09 09:40:46.347505"], ["updated_at", "2019-06-09 09:40:46.347505"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-09 09:40:46.351219"], ["updated_at", "2019-06-09 09:40:46.351219"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-09 09:40:46.352374"], ["updated_at", "2019-06-09 09:40:46.352374"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-09 09:40:46.353273"], ["updated_at", "2019-06-09 09:40:46.353273"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 69752ms (Views: 0.2ms | ActiveRecord: 4.5ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (7.8ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-09 09:45:03.618374"], ["updated_at", "2019-06-09 09:45:03.618374"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.8ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-09 09:45:03.662700"], ["updated_at", "2019-06-09 09:45:03.662700"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-09 09:45:03.664606"], ["updated_at", "2019-06-09 09:45:03.664606"]]
  [1m[36mUserWithAll Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-09 09:45:03.666024"], ["updated_at", "2019-06-09 09:45:03.666024"]]
  [1m[36mUserWithAll Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-09 09:45:03.667939"], ["updated_at", "2019-06-09 09:45:03.667939"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "e827ad48b645f215e4b2a3c6b085f809"], ["action", "companies#create"], ["created_at", "2019-06-09 09:45:04.547828"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "e827ad48b645f215e4b2a3c6b085f809"], ["action", "companies#create"], ["created_at", "2019-06-09 09:45:04.552808"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "e827ad48b645f215e4b2a3c6b085f809"], ["action", "companies#create"], ["created_at", "2019-06-09 09:45:04.555530"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "e827ad48b645f215e4b2a3c6b085f809"], ["action", "companies#create"], ["created_at", "2019-06-09 09:45:04.557806"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 928ms (Views: 0.1ms | ActiveRecord: 11.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (9.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-09 09:45:22.555378"], ["updated_at", "2019-06-09 09:45:22.555378"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-09 09:45:22.589125"], ["updated_at", "2019-06-09 09:45:22.589125"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-09 09:45:22.590694"], ["updated_at", "2019-06-09 09:45:22.590694"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-09 09:45:22.591726"], ["updated_at", "2019-06-09 09:45:22.591726"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-09 09:45:22.592896"], ["updated_at", "2019-06-09 09:45:22.592896"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "0e2fbfd0ec7660418af40583b336246b"], ["action", "companies#create"], ["created_at", "2019-06-09 09:45:24.600775"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "0e2fbfd0ec7660418af40583b336246b"], ["action", "companies#create"], ["created_at", "2019-06-09 09:45:24.604715"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "0e2fbfd0ec7660418af40583b336246b"], ["action", "companies#create"], ["created_at", "2019-06-09 09:45:24.607015"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "0e2fbfd0ec7660418af40583b336246b"], ["action", "companies#create"], ["created_at", "2019-06-09 09:45:24.609892"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 2045ms (Views: 0.2ms | ActiveRecord: 7.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-09 09:45:30.596464"], ["updated_at", "2019-06-09 09:45:30.596464"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-09 09:45:30.631282"], ["updated_at", "2019-06-09 09:45:30.631282"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-09 09:45:30.632768"], ["updated_at", "2019-06-09 09:45:30.632768"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-09 09:45:30.633829"], ["updated_at", "2019-06-09 09:45:30.633829"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-09 09:45:30.634822"], ["updated_at", "2019-06-09 09:45:30.634822"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "ed0d33b01f0bb0f1f2fb7708402d481f"], ["action", "companies#create"], ["created_at", "2019-06-09 09:45:34.554253"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "ed0d33b01f0bb0f1f2fb7708402d481f"], ["action", "companies#create"], ["created_at", "2019-06-09 09:45:34.557684"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "ed0d33b01f0bb0f1f2fb7708402d481f"], ["action", "companies#create"], ["created_at", "2019-06-09 09:45:34.560669"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "ed0d33b01f0bb0f1f2fb7708402d481f"], ["action", "companies#create"], ["created_at", "2019-06-09 09:45:34.563600"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3959ms (Views: 0.1ms | ActiveRecord: 8.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-09 09:45:38.042477"], ["updated_at", "2019-06-09 09:45:38.042477"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-09 09:45:38.086334"], ["updated_at", "2019-06-09 09:45:38.086334"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-09 09:45:38.087829"], ["updated_at", "2019-06-09 09:45:38.087829"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-09 09:45:38.089004"], ["updated_at", "2019-06-09 09:45:38.089004"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-09 09:45:38.089959"], ["updated_at", "2019-06-09 09:45:38.089959"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.9ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "fc4e147e8f87d524cea8a82cca7550c7"], ["action", "companies#create"], ["created_at", "2019-06-09 09:45:40.071775"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "fc4e147e8f87d524cea8a82cca7550c7"], ["action", "companies#create"], ["created_at", "2019-06-09 09:45:40.075269"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "fc4e147e8f87d524cea8a82cca7550c7"], ["action", "companies#create"], ["created_at", "2019-06-09 09:45:40.077866"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "fc4e147e8f87d524cea8a82cca7550c7"], ["action", "companies#create"], ["created_at", "2019-06-09 09:45:40.081382"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 2027ms (Views: 0.2ms | ActiveRecord: 8.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (20.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (8.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (5.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 06:23:24.895486"], ["updated_at", "2019-06-10 06:23:24.895486"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 06:23:24.943508"], ["updated_at", "2019-06-10 06:23:24.943508"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 06:23:24.945036"], ["updated_at", "2019-06-10 06:23:24.945036"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 06:23:24.946162"], ["updated_at", "2019-06-10 06:23:24.946162"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 06:23:24.947078"], ["updated_at", "2019-06-10 06:23:24.947078"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "00c28398be4ff7481843ef2d2ecef5b3"], ["action", "companies#create"], ["created_at", "2019-06-10 06:23:26.840485"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "00c28398be4ff7481843ef2d2ecef5b3"], ["action", "companies#create"], ["created_at", "2019-06-10 06:23:26.845026"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "00c28398be4ff7481843ef2d2ecef5b3"], ["action", "companies#create"], ["created_at", "2019-06-10 06:23:26.847524"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "00c28398be4ff7481843ef2d2ecef5b3"], ["action", "companies#create"], ["created_at", "2019-06-10 06:23:26.850733"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1943ms (Views: 0.2ms | ActiveRecord: 9.6ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (4.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (4.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (3.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 06:23:46.939947"], ["updated_at", "2019-06-10 06:23:46.939947"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.9ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 06:23:46.981989"], ["updated_at", "2019-06-10 06:23:46.981989"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 06:23:46.984436"], ["updated_at", "2019-06-10 06:23:46.984436"]]
  [1m[36mUserWithAll Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 06:23:46.985966"], ["updated_at", "2019-06-10 06:23:46.985966"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 06:23:46.987418"], ["updated_at", "2019-06-10 06:23:46.987418"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 1948ms (Views: 0.1ms | ActiveRecord: 5.7ms)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (3.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 06:24:13.117918"], ["updated_at", "2019-06-10 06:24:13.117918"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 06:24:13.159139"], ["updated_at", "2019-06-10 06:24:13.159139"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 06:24:13.160973"], ["updated_at", "2019-06-10 06:24:13.160973"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 06:24:13.162743"], ["updated_at", "2019-06-10 06:24:13.162743"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 06:24:13.163821"], ["updated_at", "2019-06-10 06:24:13.163821"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 4257ms (Views: 0.1ms | ActiveRecord: 4.2ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (8.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 06:32:58.981836"], ["updated_at", "2019-06-10 06:32:58.981836"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (1.0ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 06:32:59.023184"], ["updated_at", "2019-06-10 06:32:59.023184"]]
  [1m[36mUserWithAll Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 06:32:59.025269"], ["updated_at", "2019-06-10 06:32:59.025269"]]
  [1m[36mUserWithAll Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 06:32:59.026897"], ["updated_at", "2019-06-10 06:32:59.026897"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 06:32:59.028314"], ["updated_at", "2019-06-10 06:32:59.028314"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.1ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "efaa84915bfcd48ab7d8e671f208e33e"], ["action", "companies#create"], ["created_at", "2019-06-10 06:33:01.726652"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "efaa84915bfcd48ab7d8e671f208e33e"], ["action", "companies#create"], ["created_at", "2019-06-10 06:33:01.731190"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "efaa84915bfcd48ab7d8e671f208e33e"], ["action", "companies#create"], ["created_at", "2019-06-10 06:33:01.733705"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "efaa84915bfcd48ab7d8e671f208e33e"], ["action", "companies#create"], ["created_at", "2019-06-10 06:33:01.736111"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 2742ms (Views: 0.2ms | ActiveRecord: 9.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 06:33:19.373846"], ["updated_at", "2019-06-10 06:33:19.373846"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.7ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 06:33:19.413296"], ["updated_at", "2019-06-10 06:33:19.413296"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 06:33:19.414979"], ["updated_at", "2019-06-10 06:33:19.414979"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 06:33:19.415990"], ["updated_at", "2019-06-10 06:33:19.415990"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 06:33:19.416967"], ["updated_at", "2019-06-10 06:33:19.416967"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "7685e1bda75d3bdb124e7001eef0a278"], ["action", "companies#create"], ["created_at", "2019-06-10 06:34:20.885082"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "7685e1bda75d3bdb124e7001eef0a278"], ["action", "companies#create"], ["created_at", "2019-06-10 06:34:20.889127"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "7685e1bda75d3bdb124e7001eef0a278"], ["action", "companies#create"], ["created_at", "2019-06-10 06:34:20.893299"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "7685e1bda75d3bdb124e7001eef0a278"], ["action", "companies#create"], ["created_at", "2019-06-10 06:34:20.895518"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 61510ms (Views: 0.2ms | ActiveRecord: 9.0ms)
  [1m[35m (4.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (2.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 06:34:24.577310"], ["updated_at", "2019-06-10 06:34:24.577310"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 06:34:24.620831"], ["updated_at", "2019-06-10 06:34:24.620831"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 06:34:24.622264"], ["updated_at", "2019-06-10 06:34:24.622264"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 06:34:24.623543"], ["updated_at", "2019-06-10 06:34:24.623543"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 06:34:24.624388"], ["updated_at", "2019-06-10 06:34:24.624388"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "0c999687aa4cb702308467f97ddcba37"], ["action", "companies#create"], ["created_at", "2019-06-10 06:35:20.280788"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "0c999687aa4cb702308467f97ddcba37"], ["action", "companies#create"], ["created_at", "2019-06-10 06:35:20.284497"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "0c999687aa4cb702308467f97ddcba37"], ["action", "companies#create"], ["created_at", "2019-06-10 06:35:20.286600"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "0c999687aa4cb702308467f97ddcba37"], ["action", "companies#create"], ["created_at", "2019-06-10 06:35:20.288579"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 55698ms (Views: 0.1ms | ActiveRecord: 9.4ms)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 06:35:39.464470"], ["updated_at", "2019-06-10 06:35:39.464470"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 06:35:39.502170"], ["updated_at", "2019-06-10 06:35:39.502170"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 06:35:39.503616"], ["updated_at", "2019-06-10 06:35:39.503616"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 06:35:39.504838"], ["updated_at", "2019-06-10 06:35:39.504838"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 06:35:39.506229"], ["updated_at", "2019-06-10 06:35:39.506229"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.1ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "f381a92aa626715bffb1365fd8164aa0"], ["action", "companies#create"], ["created_at", "2019-06-10 06:35:41.405982"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "f381a92aa626715bffb1365fd8164aa0"], ["action", "companies#create"], ["created_at", "2019-06-10 06:35:41.413904"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "f381a92aa626715bffb1365fd8164aa0"], ["action", "companies#create"], ["created_at", "2019-06-10 06:35:41.416374"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "f381a92aa626715bffb1365fd8164aa0"], ["action", "companies#create"], ["created_at", "2019-06-10 06:35:41.418403"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1942ms (Views: 0.1ms | ActiveRecord: 9.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (9.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 06:36:08.969240"], ["updated_at", "2019-06-10 06:36:08.969240"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (1.0ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 06:36:09.009527"], ["updated_at", "2019-06-10 06:36:09.009527"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 06:36:09.011979"], ["updated_at", "2019-06-10 06:36:09.011979"]]
  [1m[36mUserWithAll Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 06:36:12.921983"], ["updated_at", "2019-06-10 06:36:12.921983"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 06:36:13.486988"], ["updated_at", "2019-06-10 06:36:13.486988"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 14880ms (Views: 0.5ms | ActiveRecord: 5.1ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 06:36:32.995629"], ["updated_at", "2019-06-10 06:36:32.995629"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.6ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 06:36:33.039672"], ["updated_at", "2019-06-10 06:36:33.039672"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 06:36:33.041285"], ["updated_at", "2019-06-10 06:36:33.041285"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 06:36:33.042441"], ["updated_at", "2019-06-10 06:36:33.042441"]]
  [1m[36mUserWithAll Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 06:36:33.043580"], ["updated_at", "2019-06-10 06:36:33.043580"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 1415ms (Views: 0.1ms | ActiveRecord: 6.3ms)
  [1m[35m (2.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 06:37:10.919768"], ["updated_at", "2019-06-10 06:37:10.919768"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.6ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 06:37:10.970275"], ["updated_at", "2019-06-10 06:37:10.970275"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 06:37:10.972465"], ["updated_at", "2019-06-10 06:37:10.972465"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 06:37:10.973893"], ["updated_at", "2019-06-10 06:37:10.973893"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 06:37:10.975086"], ["updated_at", "2019-06-10 06:37:10.975086"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 7414ms (Views: 0.2ms | ActiveRecord: 9.7ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 06:38:38.028381"], ["updated_at", "2019-06-10 06:38:38.028381"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 06:38:38.072466"], ["updated_at", "2019-06-10 06:38:38.072466"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 06:38:38.074009"], ["updated_at", "2019-06-10 06:38:38.074009"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 06:38:38.075106"], ["updated_at", "2019-06-10 06:38:38.075106"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 06:38:38.076233"], ["updated_at", "2019-06-10 06:38:38.076233"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 4770ms (Views: 0.1ms | ActiveRecord: 3.6ms)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (5.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 06:39:10.830556"], ["updated_at", "2019-06-10 06:39:10.830556"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 06:39:10.869748"], ["updated_at", "2019-06-10 06:39:10.869748"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 06:39:10.871170"], ["updated_at", "2019-06-10 06:39:10.871170"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 06:39:10.872184"], ["updated_at", "2019-06-10 06:39:10.872184"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 06:39:10.873043"], ["updated_at", "2019-06-10 06:39:10.873043"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (4.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:03:50.097468"], ["updated_at", "2019-06-10 07:03:50.097468"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 07:03:50.144197"], ["updated_at", "2019-06-10 07:03:50.144197"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:03:50.145651"], ["updated_at", "2019-06-10 07:03:50.145651"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:03:50.146640"], ["updated_at", "2019-06-10 07:03:50.146640"]]
  [1m[36mUserWithAll Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 07:03:50.147469"], ["updated_at", "2019-06-10 07:03:50.147469"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 37ms (Views: 0.1ms | ActiveRecord: 4.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:04:29.756612"], ["updated_at", "2019-06-10 07:04:29.756612"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 07:04:29.791087"], ["updated_at", "2019-06-10 07:04:29.791087"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:04:29.792594"], ["updated_at", "2019-06-10 07:04:29.792594"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:04:29.793645"], ["updated_at", "2019-06-10 07:04:29.793645"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 07:04:29.794475"], ["updated_at", "2019-06-10 07:04:29.794475"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 82273ms (Views: 0.2ms | ActiveRecord: 3.4ms)
  [1m[35m (6.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:05:55.635861"], ["updated_at", "2019-06-10 07:05:55.635861"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 07:05:55.674687"], ["updated_at", "2019-06-10 07:05:55.674687"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:05:55.676077"], ["updated_at", "2019-06-10 07:05:55.676077"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:05:55.677074"], ["updated_at", "2019-06-10 07:05:55.677074"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 07:05:55.677941"], ["updated_at", "2019-06-10 07:05:55.677941"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (4.1ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"2\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]},\"3\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]},\"4\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}}}"], ["meta", "{\"users\":{\"2\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"3\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"4\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["request_uuid", "e4ce510b3d28f38eeb67d09a41ab61a1"], ["action", "companies#create"], ["created_at", "2019-06-10 07:06:48.515424"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "e4ce510b3d28f38eeb67d09a41ab61a1"], ["action", "companies#create"], ["created_at", "2019-06-10 07:06:48.525523"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "e4ce510b3d28f38eeb67d09a41ab61a1"], ["action", "companies#create"], ["created_at", "2019-06-10 07:06:48.528486"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "e4ce510b3d28f38eeb67d09a41ab61a1"], ["action", "companies#create"], ["created_at", "2019-06-10 07:06:48.531811"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 52886ms (Views: 0.1ms | ActiveRecord: 13.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (4.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:07:05.616794"], ["updated_at", "2019-06-10 07:07:05.616794"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 07:07:05.655042"], ["updated_at", "2019-06-10 07:07:05.655042"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:07:05.656452"], ["updated_at", "2019-06-10 07:07:05.656452"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:07:05.657458"], ["updated_at", "2019-06-10 07:07:05.657458"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 07:07:05.658341"], ["updated_at", "2019-06-10 07:07:05.658341"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 31ms (Views: 0.1ms | ActiveRecord: 3.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:07:59.978606"], ["updated_at", "2019-06-10 07:07:59.978606"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.8ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 07:08:00.017762"], ["updated_at", "2019-06-10 07:08:00.017762"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:08:00.019614"], ["updated_at", "2019-06-10 07:08:00.019614"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:08:00.021062"], ["updated_at", "2019-06-10 07:08:00.021062"]]
  [1m[36mUserWithAll Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 07:08:00.022479"], ["updated_at", "2019-06-10 07:08:00.022479"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 35ms (Views: 0.2ms | ActiveRecord: 4.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (5.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:08:29.535087"], ["updated_at", "2019-06-10 07:08:29.535087"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 07:08:29.570070"], ["updated_at", "2019-06-10 07:08:29.570070"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:08:29.571550"], ["updated_at", "2019-06-10 07:08:29.571550"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:08:29.572586"], ["updated_at", "2019-06-10 07:08:29.572586"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 07:08:29.573421"], ["updated_at", "2019-06-10 07:08:29.573421"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"2\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]},\"3\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]},\"4\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}}}"], ["meta", "{\"users\":{\"2\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"3\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"4\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["request_uuid", "cb9f5aafc6105066723b1166b215f455"], ["action", "companies#create"], ["created_at", "2019-06-10 07:08:29.585617"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 41ms (Views: 0.1ms | ActiveRecord: 5.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (4.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:09:13.936500"], ["updated_at", "2019-06-10 07:09:13.936500"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (1.0ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 07:09:13.977329"], ["updated_at", "2019-06-10 07:09:13.977329"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:09:13.979463"], ["updated_at", "2019-06-10 07:09:13.979463"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:09:13.980506"], ["updated_at", "2019-06-10 07:09:13.980506"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 07:09:13.981338"], ["updated_at", "2019-06-10 07:09:13.981338"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"2\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]},\"3\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]},\"4\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}}}"], ["meta", "{\"users\":{\"2\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"3\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"4\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["request_uuid", "9d483b2629f4f139c6138dba5694f32b"], ["action", "companies#create"], ["created_at", "2019-06-10 07:09:13.992888"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 44ms (Views: 0.1ms | ActiveRecord: 7.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (4.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (12.3ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:11:31.784136"], ["updated_at", "2019-06-10 07:11:31.784136"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 07:11:31.821376"], ["updated_at", "2019-06-10 07:11:31.821376"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:11:31.822959"], ["updated_at", "2019-06-10 07:11:31.822959"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:11:31.824112"], ["updated_at", "2019-06-10 07:11:31.824112"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 07:11:31.825110"], ["updated_at", "2019-06-10 07:11:31.825110"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"2\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]},\"3\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]},\"4\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}}}"], ["meta", "{\"users\":{\"2\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"3\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"4\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["request_uuid", "de8a03c5c2799752f1a54b79a9ccec93"], ["action", "companies#create"], ["created_at", "2019-06-10 07:11:31.837305"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 42ms (Views: 0.1ms | ActiveRecord: 5.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:12:16.255084"], ["updated_at", "2019-06-10 07:12:16.255084"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:12:16.301837"], ["updated_at", "2019-06-10 07:12:16.301837"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:12:16.303263"], ["updated_at", "2019-06-10 07:12:16.303263"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:12:16.304366"], ["updated_at", "2019-06-10 07:12:16.304366"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 07:12:16.305212"], ["updated_at", "2019-06-10 07:12:16.305212"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"users\":{\"2\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]},\"3\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]},\"4\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}}}"], ["meta", "{\"users\":{\"2\":{\"name\":\"User1\",\"company_name\":null},\"3\":{\"name\":\"User2\",\"company_name\":null},\"4\":{\"name\":\"User3\",\"company_name\":null}}}"], ["request_uuid", "215c41b329e63592d23f8df6077da47c"], ["action", "companies#create"], ["created_at", "2019-06-10 07:12:16.317746"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 47ms (Views: 0.1ms | ActiveRecord: 6.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (3.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:12:34.543862"], ["updated_at", "2019-06-10 07:12:34.543862"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:12:34.581714"], ["updated_at", "2019-06-10 07:12:34.581714"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:12:34.583039"], ["updated_at", "2019-06-10 07:12:34.583039"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:12:34.584153"], ["updated_at", "2019-06-10 07:12:34.584153"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 07:12:34.585062"], ["updated_at", "2019-06-10 07:12:34.585062"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"users\":{\"2\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]},\"3\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]},\"4\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}}}"], ["meta", "{\"users\":{\"2\":{\"name\":\"User1\",\"company_name\":null},\"3\":{\"name\":\"User2\",\"company_name\":null},\"4\":{\"name\":\"User3\",\"company_name\":null}}}"], ["request_uuid", "897a6a55d83c5142ef18daa14761b7b5"], ["action", "companies#create"], ["created_at", "2019-06-10 07:12:34.597577"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 43ms (Views: 0.1ms | ActiveRecord: 5.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:14:34.300602"], ["updated_at", "2019-06-10 07:14:34.300602"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.6ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:14:34.335849"], ["updated_at", "2019-06-10 07:14:34.335849"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:14:34.337400"], ["updated_at", "2019-06-10 07:14:34.337400"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:14:34.338435"], ["updated_at", "2019-06-10 07:14:34.338435"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 07:14:34.339263"], ["updated_at", "2019-06-10 07:14:34.339263"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"users\":{\"2\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]},\"3\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]},\"4\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}}}"], ["meta", "{\"users\":{\"2\":{\"name\":\"User1\",\"company_name\":null},\"3\":{\"name\":\"User2\",\"company_name\":null},\"4\":{\"name\":\"User3\",\"company_name\":null}}}"], ["request_uuid", "72ed1cd3c24117566150ef3c0f3c3b77"], ["action", "companies#create"], ["created_at", "2019-06-10 07:14:46.454723"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12150ms (Views: 0.1ms | ActiveRecord: 8.0ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:15:18.751938"], ["updated_at", "2019-06-10 07:15:18.751938"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:15:18.788792"], ["updated_at", "2019-06-10 07:15:18.788792"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:15:18.790138"], ["updated_at", "2019-06-10 07:15:18.790138"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:15:18.791126"], ["updated_at", "2019-06-10 07:15:18.791126"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 07:15:18.791949"], ["updated_at", "2019-06-10 07:15:18.791949"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 58020ms (Views: 0.3ms | ActiveRecord: 3.3ms)
  [1m[35m (5.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:16:20.367879"], ["updated_at", "2019-06-10 07:16:20.367879"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:16:20.410277"], ["updated_at", "2019-06-10 07:16:20.410277"]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 22853ms (ActiveRecord: 4.3ms)
  [1m[35m (6.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:16:46.773120"], ["updated_at", "2019-06-10 07:16:46.773120"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:16:46.810554"], ["updated_at", "2019-06-10 07:16:46.810554"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:16:46.811907"], ["updated_at", "2019-06-10 07:16:46.811907"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:16:46.812892"], ["updated_at", "2019-06-10 07:16:46.812892"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 07:16:46.813703"], ["updated_at", "2019-06-10 07:16:46.813703"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 7043ms (Views: 0.1ms | ActiveRecord: 3.4ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:23:26.638263"], ["updated_at", "2019-06-10 07:23:26.638263"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:23:26.674890"], ["updated_at", "2019-06-10 07:23:26.674890"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:23:26.676222"], ["updated_at", "2019-06-10 07:23:26.676222"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:23:26.677262"], ["updated_at", "2019-06-10 07:23:26.677262"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 07:23:26.678103"], ["updated_at", "2019-06-10 07:23:26.678103"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 1860ms (Views: 0.1ms | ActiveRecord: 4.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:25:18.812221"], ["updated_at", "2019-06-10 07:25:18.812221"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:25:18.853693"], ["updated_at", "2019-06-10 07:25:18.853693"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:25:18.855043"], ["updated_at", "2019-06-10 07:25:18.855043"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:25:18.856196"], ["updated_at", "2019-06-10 07:25:18.856196"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 07:25:18.857025"], ["updated_at", "2019-06-10 07:25:18.857025"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 1208ms (Views: 0.2ms | ActiveRecord: 3.6ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:25:39.508383"], ["updated_at", "2019-06-10 07:25:39.508383"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:25:39.544429"], ["updated_at", "2019-06-10 07:25:39.544429"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:25:39.545724"], ["updated_at", "2019-06-10 07:25:39.545724"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:25:39.546900"], ["updated_at", "2019-06-10 07:25:39.546900"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 07:25:39.548232"], ["updated_at", "2019-06-10 07:25:39.548232"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"users\":{\"2\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]},\"3\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]},\"4\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}}}"], ["meta", "{\"users\":{\"2\":{\"name\":\"User1\",\"company_name\":null},\"3\":{\"name\":\"User2\",\"company_name\":null},\"4\":{\"name\":\"User3\",\"company_name\":null}}}"], ["request_uuid", "8340fce889a5b5e7a1ed76e5e4edd7ad"], ["action", "companies#create"], ["created_at", "2019-06-10 07:25:40.385671"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 868ms (Views: 0.1ms | ActiveRecord: 6.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (3.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:29:47.440519"], ["updated_at", "2019-06-10 07:29:47.440519"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 07:29:47.462077"], ["updated_at", "2019-06-10 07:29:47.462077"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "7ff636f8e070a7f93514cc0c30018808"], ["action", "users#create"], ["created_at", "2019-06-10 07:29:49.052135"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1597ms (Views: 0.1ms | ActiveRecord: 4.1ms)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:29:49.073859"], ["updated_at", "2019-06-10 07:29:49.073859"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 07:29:49.080125"], ["updated_at", "2019-06-10 07:29:49.080125"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "a7f8c890e1930a45d211ab2401bbcea6"], ["action", "register"], ["created_at", "2019-06-10 07:29:49.452154"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 376ms (Views: 0.3ms | ActiveRecord: 2.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:29:49.462076"], ["updated_at", "2019-06-10 07:29:49.462076"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (1.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 07:29:49.495272"], ["updated_at", "2019-06-10 07:29:49.495272"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:29:49.498236"], ["updated_at", "2019-06-10 07:29:49.498236"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:29:49.499546"], ["updated_at", "2019-06-10 07:29:49.499546"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 07:29:49.500621"], ["updated_at", "2019-06-10 07:29:49.500621"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "9753c03f25064636d7e5da8e36b004a9"], ["action", "companies#create"], ["created_at", "2019-06-10 07:29:49.826670"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.1ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "9753c03f25064636d7e5da8e36b004a9"], ["action", "companies#create"], ["created_at", "2019-06-10 07:29:49.829745"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "9753c03f25064636d7e5da8e36b004a9"], ["action", "companies#create"], ["created_at", "2019-06-10 07:29:49.833483"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "9753c03f25064636d7e5da8e36b004a9"], ["action", "companies#create"], ["created_at", "2019-06-10 07:29:49.836024"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 369ms (Views: 0.1ms | ActiveRecord: 10.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:29:49.847322"], ["updated_at", "2019-06-10 07:29:49.847322"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 07:29:49.859116"], ["updated_at", "2019-06-10 07:29:49.859116"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", "2019-06-10 07:29:49.861005"], ["updated_at", "2019-06-10 07:29:49.861005"]]
  [1m[36mUserWithAll Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", "2019-06-10 07:29:49.862678"], ["updated_at", "2019-06-10 07:29:49.862678"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", "2019-06-10 07:29:49.865677"], ["updated_at", "2019-06-10 07:29:49.865677"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"10\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"11\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"10\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"11\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["request_uuid", "82f7ffe39a9a538446f4818e686b77bd"], ["action", "companies#create"], ["created_at", "2019-06-10 07:29:50.192380"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 343ms (Views: 0.1ms | ActiveRecord: 3.1ms)
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:29:50.205323"], ["updated_at", "2019-06-10 07:29:50.205323"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:29:50.217208"], ["updated_at", "2019-06-10 07:29:50.217208"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", "2019-06-10 07:29:50.218463"], ["updated_at", "2019-06-10 07:29:50.218463"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", "2019-06-10 07:29:50.219808"], ["updated_at", "2019-06-10 07:29:50.219808"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", "2019-06-10 07:29:50.221098"], ["updated_at", "2019-06-10 07:29:50.221098"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "{\"users\":{\"14\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"15\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"14\":{\"name\":\"User1\",\"company_name\":null},\"15\":{\"name\":\"User2\",\"company_name\":null},\"16\":{\"name\":\"User3\",\"company_name\":null}}}"], ["request_uuid", "776447e1b5fcd48836f2e8e599d86534"], ["action", "companies#create"], ["created_at", "2019-06-10 07:29:50.528006"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 320ms (Views: 0.4ms | ActiveRecord: 4.8ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (3.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:29:51.113848"], ["updated_at", "2019-06-10 07:29:51.113848"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "something"], ["created_at", "2019-06-10 07:29:51.121544"], ["updated_at", "2019-06-10 07:29:51.121544"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#update as HTML
  Parameters: {"company"=>{"name"=>"something else"}, "id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (2.4ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["name", "something else"], ["updated_at", "2019-06-10 07:29:51.128166"], ["id", 4]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.4ms)[0m  [1m[33mUPDATE "companies" SET "description" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["description", "Something third"], ["updated_at", "2019-06-10 07:29:51.134073"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:30:09.158777"], ["updated_at", "2019-06-10 07:30:09.158777"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 07:30:09.175923"], ["updated_at", "2019-06-10 07:30:09.175923"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "9f69f116be35c54fba747c412e5ca774"], ["action", "users#create"], ["created_at", "2019-06-10 07:30:09.203182"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 32ms (Views: 0.2ms | ActiveRecord: 4.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:30:09.232600"], ["updated_at", "2019-06-10 07:30:09.232600"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 07:30:09.241770"], ["updated_at", "2019-06-10 07:30:09.241770"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "731b7af67096344bfa4e5e612f26172d"], ["action", "register"], ["created_at", "2019-06-10 07:30:09.246449"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 2.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:30:09.255598"], ["updated_at", "2019-06-10 07:30:09.255598"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.9ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 07:30:09.291473"], ["updated_at", "2019-06-10 07:30:09.291473"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:30:09.293603"], ["updated_at", "2019-06-10 07:30:09.293603"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:30:09.295662"], ["updated_at", "2019-06-10 07:30:09.295662"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 07:30:09.297127"], ["updated_at", "2019-06-10 07:30:09.297127"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "b2b95fd82f07bb606b8c33684a9e1f1a"], ["action", "companies#create"], ["created_at", "2019-06-10 07:30:09.299887"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.9ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "b2b95fd82f07bb606b8c33684a9e1f1a"], ["action", "companies#create"], ["created_at", "2019-06-10 07:30:09.301924"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "b2b95fd82f07bb606b8c33684a9e1f1a"], ["action", "companies#create"], ["created_at", "2019-06-10 07:30:09.304987"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "b2b95fd82f07bb606b8c33684a9e1f1a"], ["action", "companies#create"], ["created_at", "2019-06-10 07:30:09.306992"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 47ms (Views: 0.1ms | ActiveRecord: 9.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:30:09.316625"], ["updated_at", "2019-06-10 07:30:09.316625"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (2.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.8ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 07:30:09.332572"], ["updated_at", "2019-06-10 07:30:09.332572"]]
  [1m[36mUserWithAll Create (4.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", "2019-06-10 07:30:09.335844"], ["updated_at", "2019-06-10 07:30:09.335844"]]
  [1m[36mUserWithAll Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", "2019-06-10 07:30:09.341850"], ["updated_at", "2019-06-10 07:30:09.341850"]]
  [1m[36mUserWithAll Create (9.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", "2019-06-10 07:30:09.344215"], ["updated_at", "2019-06-10 07:30:09.344215"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"10\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"11\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"10\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"11\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["request_uuid", "3210a55e9354c012f3266ce83c029507"], ["action", "companies#create"], ["created_at", "2019-06-10 07:30:09.359698"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 41ms (Views: 0.2ms | ActiveRecord: 20.6ms)
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (10.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:30:09.376602"], ["updated_at", "2019-06-10 07:30:09.376602"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.7ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:30:09.401833"], ["updated_at", "2019-06-10 07:30:09.401833"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", "2019-06-10 07:30:09.404234"], ["updated_at", "2019-06-10 07:30:09.404234"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", "2019-06-10 07:30:09.405564"], ["updated_at", "2019-06-10 07:30:09.405564"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", "2019-06-10 07:30:09.406724"], ["updated_at", "2019-06-10 07:30:09.406724"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "{\"users\":{\"14\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"15\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"14\":{\"name\":\"User1\",\"company_name\":null},\"15\":{\"name\":\"User2\",\"company_name\":null},\"16\":{\"name\":\"User3\",\"company_name\":null}}}"], ["request_uuid", "e2bd688e455fde03542d48321ac90e54"], ["action", "companies#create"], ["created_at", "2019-06-10 07:30:09.409653"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 21ms (Views: 0.1ms | ActiveRecord: 3.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:30:09.421157"], ["updated_at", "2019-06-10 07:30:09.421157"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "something"], ["created_at", "2019-06-10 07:30:09.423159"], ["updated_at", "2019-06-10 07:30:09.423159"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#update as HTML
  Parameters: {"company"=>{"name"=>"something else"}, "id"=>"4"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.3ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["name", "something else"], ["updated_at", "2019-06-10 07:30:09.431550"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.2ms)[0m  [1m[33mUPDATE "companies" SET "description" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["description", "Something third"], ["updated_at", "2019-06-10 07:30:09.433801"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.9ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"name\":[\"something\",\"something else\"],\"description\":[null,\"Something third\"]}"], ["request_uuid", "8720b1977a3e1ddad575136280bec3ac"], ["action", "companies#update"], ["created_at", "2019-06-10 07:30:09.436114"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 2.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:30:09.449165"], ["updated_at", "2019-06-10 07:30:09.449165"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:30:09.475770"], ["updated_at", "2019-06-10 07:30:09.475770"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 5], ["created_at", "2019-06-10 07:30:09.477027"], ["updated_at", "2019-06-10 07:30:09.477027"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 5], ["created_at", "2019-06-10 07:30:09.479528"], ["updated_at", "2019-06-10 07:30:09.479528"]]
  [1m[36mCompanyInfo Create (0.7ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 5], ["created_at", "2019-06-10 07:30:09.481272"], ["updated_at", "2019-06-10 07:30:09.481272"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}},\"company_infos\":{\"1\":{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}},\"company_infos\":{\"1\":{}}}"], ["request_uuid", "88dd065fb18fc983cf0f8a7a5214c97d"], ["action", "companies#create"], ["created_at", "2019-06-10 07:30:09.485105"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 34ms (Views: 0.1ms | ActiveRecord: 6.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:54:38.360914"], ["updated_at", "2019-06-10 07:54:38.360914"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 07:54:38.378100"], ["updated_at", "2019-06-10 07:54:38.378100"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "175c05b2d0383b0bd3740842629a57b1"], ["action", "users#create"], ["created_at", "2019-06-10 07:54:38.393552"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 19ms (Views: 0.1ms | ActiveRecord: 2.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:54:38.406799"], ["updated_at", "2019-06-10 07:54:38.406799"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 07:54:38.410293"], ["updated_at", "2019-06-10 07:54:38.410293"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "6ea6d9e125e00732d2584db6fab4fc23"], ["action", "register"], ["created_at", "2019-06-10 07:54:38.412298"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:54:38.419796"], ["updated_at", "2019-06-10 07:54:38.419796"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 07:54:38.440787"], ["updated_at", "2019-06-10 07:54:38.440787"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:54:38.442177"], ["updated_at", "2019-06-10 07:54:38.442177"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:54:38.443264"], ["updated_at", "2019-06-10 07:54:38.443264"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 07:54:38.444193"], ["updated_at", "2019-06-10 07:54:38.444193"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "8fcbe1043ba6d8aa15e2a5a64e8f1c2a"], ["action", "companies#create"], ["created_at", "2019-06-10 07:54:38.446489"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "8fcbe1043ba6d8aa15e2a5a64e8f1c2a"], ["action", "companies#create"], ["created_at", "2019-06-10 07:54:38.448748"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "8fcbe1043ba6d8aa15e2a5a64e8f1c2a"], ["action", "companies#create"], ["created_at", "2019-06-10 07:54:38.450504"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "8fcbe1043ba6d8aa15e2a5a64e8f1c2a"], ["action", "companies#create"], ["created_at", "2019-06-10 07:54:38.452144"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 31ms (Views: 0.1ms | ActiveRecord: 5.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:54:38.458888"], ["updated_at", "2019-06-10 07:54:38.458888"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 07:54:38.468976"], ["updated_at", "2019-06-10 07:54:38.468976"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", "2019-06-10 07:54:38.469972"], ["updated_at", "2019-06-10 07:54:38.469972"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", "2019-06-10 07:54:38.471314"], ["updated_at", "2019-06-10 07:54:38.471314"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", "2019-06-10 07:54:38.472953"], ["updated_at", "2019-06-10 07:54:38.472953"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"10\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"11\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"10\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"11\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["request_uuid", "81e7f347e1d9f1dbf1d8fd7d88805ff2"], ["action", "companies#create"], ["created_at", "2019-06-10 07:55:10.478946"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 32016ms (Views: 0.1ms | ActiveRecord: 2.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:55:10.493751"], ["updated_at", "2019-06-10 07:55:10.493751"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:55:10.503101"], ["updated_at", "2019-06-10 07:55:10.503101"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", "2019-06-10 07:55:10.504735"], ["updated_at", "2019-06-10 07:55:10.504735"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", "2019-06-10 07:55:10.507898"], ["updated_at", "2019-06-10 07:55:10.507898"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", "2019-06-10 07:55:10.509307"], ["updated_at", "2019-06-10 07:55:10.509307"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "{\"users\":{\"14\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"15\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"14\":{\"name\":\"User1\",\"company_name\":null},\"15\":{\"name\":\"User2\",\"company_name\":null},\"16\":{\"name\":\"User3\",\"company_name\":null}}}"], ["request_uuid", "e47d1e6ced2b61baf84e1e758b88fc97"], ["action", "companies#create"], ["created_at", "2019-06-10 07:55:11.899391"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1403ms (Views: 0.7ms | ActiveRecord: 2.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:55:11.908858"], ["updated_at", "2019-06-10 07:55:11.908858"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "something"], ["created_at", "2019-06-10 07:55:11.910985"], ["updated_at", "2019-06-10 07:55:11.910985"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#update as HTML
  Parameters: {"company"=>{"name"=>"something else"}, "id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.3ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["name", "something else"], ["updated_at", "2019-06-10 07:55:11.917592"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.3ms)[0m  [1m[33mUPDATE "companies" SET "description" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["description", "Something third"], ["updated_at", "2019-06-10 07:55:11.919893"], ["id", 4]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"name\":[\"something\",\"something else\"],\"description\":[null,\"Something third\"]}"], ["request_uuid", "bc2459010daa62c41af5e5006d09dfc0"], ["action", "companies#update"], ["created_at", "2019-06-10 07:55:12.397997"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 485ms (Views: 0.2ms | ActiveRecord: 2.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:55:12.406853"], ["updated_at", "2019-06-10 07:55:12.406853"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:55:12.430194"], ["updated_at", "2019-06-10 07:55:12.430194"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 5], ["created_at", "2019-06-10 07:55:12.431324"], ["updated_at", "2019-06-10 07:55:12.431324"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 5], ["created_at", "2019-06-10 07:55:12.443652"], ["updated_at", "2019-06-10 07:55:12.443652"]]
  [1m[36mCompanyInfo Create (0.8ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 5], ["created_at", "2019-06-10 07:55:12.445023"], ["updated_at", "2019-06-10 07:55:12.445023"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}},\"company_infos\":{\"1\":{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}},\"company_infos\":{\"1\":{}}}"], ["request_uuid", "bcef21f7f55aa4311c2967d4f7bdc872"], ["action", "companies#create"], ["created_at", "2019-06-10 07:55:12.933361"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 525ms (Views: 0.1ms | ActiveRecord: 6.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:55:22.007574"], ["updated_at", "2019-06-10 07:55:22.007574"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:55:22.050087"], ["updated_at", "2019-06-10 07:55:22.050087"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:55:22.051392"], ["updated_at", "2019-06-10 07:55:22.051392"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:55:22.052395"], ["updated_at", "2019-06-10 07:55:22.052395"]]
  [1m[36mCompanyInfo Create (0.5ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 1], ["created_at", "2019-06-10 07:55:22.053276"], ["updated_at", "2019-06-10 07:55:22.053276"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.9ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"users\":{\"2\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]},\"3\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}},\"company_infos\":{\"1\":{\"address\":[null,\"Negdje\"],\"company_id\":[null,1]}}}"], ["meta", "{\"users\":{\"2\":{\"name\":\"User1\",\"company_name\":null},\"3\":{\"name\":\"User2\",\"company_name\":null}},\"company_infos\":{\"1\":{}}}"], ["request_uuid", "973fcb35a37005a309c3b5ef5b722c6c"], ["action", "companies#create"], ["created_at", "2019-06-10 07:55:47.126838"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 25111ms (Views: 0.1ms | ActiveRecord: 8.0ms)
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:55:58.016403"], ["updated_at", "2019-06-10 07:55:58.016403"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.7ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:55:58.061983"], ["updated_at", "2019-06-10 07:55:58.061983"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:55:58.063789"], ["updated_at", "2019-06-10 07:55:58.063789"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:55:58.065359"], ["updated_at", "2019-06-10 07:55:58.065359"]]
  [1m[36mCompanyInfo Create (0.6ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 1], ["created_at", "2019-06-10 07:55:58.066622"], ["updated_at", "2019-06-10 07:55:58.066622"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"users\":{\"2\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]},\"3\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}},\"company_infos\":{\"1\":{\"address\":[null,\"Negdje\"],\"company_id\":[null,1]}}}"], ["meta", "{\"users\":{\"2\":{\"name\":\"User1\",\"company_name\":null},\"3\":{\"name\":\"User2\",\"company_name\":null}},\"company_infos\":{\"1\":{}}}"], ["request_uuid", "6dfb1a9b488daee90bb48ebe13a9ba30"], ["action", "companies#create"], ["created_at", "2019-06-10 07:55:59.232166"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1205ms (Views: 0.1ms | ActiveRecord: 9.1ms)
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (3.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:57:22.555323"], ["updated_at", "2019-06-10 07:57:22.555323"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.6ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:57:22.604307"], ["updated_at", "2019-06-10 07:57:22.604307"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:57:22.605741"], ["updated_at", "2019-06-10 07:57:22.605741"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:57:22.606972"], ["updated_at", "2019-06-10 07:57:22.606972"]]
  [1m[36mCompanyInfo Create (0.9ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 1], ["created_at", "2019-06-10 07:57:22.608268"], ["updated_at", "2019-06-10 07:57:22.608268"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"users\":{\"2\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]},\"3\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}}}"], ["meta", "{\"users\":{\"2\":{\"name\":\"User1\",\"company_name\":null},\"3\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "a80bcae2ae7387a45aa6c6152cc5ef68"], ["action", "companies#create"], ["created_at", "2019-06-10 07:57:22.622926"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 55ms (Views: 0.2ms | ActiveRecord: 9.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:57:33.529558"], ["updated_at", "2019-06-10 07:57:33.529558"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:57:33.572811"], ["updated_at", "2019-06-10 07:57:33.572811"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:57:33.574058"], ["updated_at", "2019-06-10 07:57:33.574058"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:57:33.575205"], ["updated_at", "2019-06-10 07:57:33.575205"]]
  [1m[36mCompanyInfo Create (0.6ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 1], ["created_at", "2019-06-10 07:57:33.576648"], ["updated_at", "2019-06-10 07:57:33.576648"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"users\":{\"2\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]},\"3\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}}}"], ["meta", "{\"users\":{\"2\":{\"name\":\"User1\",\"company_name\":null},\"3\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "7beabae4b144f88f9d734f32febb2637"], ["action", "companies#create"], ["created_at", "2019-06-10 07:57:33.589527"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 50ms (Views: 0.1ms | ActiveRecord: 8.2ms)
  [1m[35m (5.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:58:04.916954"], ["updated_at", "2019-06-10 07:58:04.916954"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.7ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:58:04.964666"], ["updated_at", "2019-06-10 07:58:04.964666"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:58:04.966550"], ["updated_at", "2019-06-10 07:58:04.966550"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:58:04.967775"], ["updated_at", "2019-06-10 07:58:04.967775"]]
  [1m[36mCompanyInfo Create (0.6ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 1], ["created_at", "2019-06-10 07:58:04.968684"], ["updated_at", "2019-06-10 07:58:04.968684"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"users\":{\"2\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]},\"3\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}}}"], ["meta", "{\"users\":{\"2\":{\"name\":\"User1\",\"company_name\":null},\"3\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "5c3f3bd781392c2d64a8a0bf6a41307c"], ["action", "companies#create"], ["created_at", "2019-06-10 07:58:04.981252"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,1]}"], ["request_uuid", "5c3f3bd781392c2d64a8a0bf6a41307c"], ["action", "companies#create"], ["created_at", "2019-06-10 07:58:04.985801"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 58ms (Views: 0.2ms | ActiveRecord: 10.1ms)
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:59:04.316843"], ["updated_at", "2019-06-10 07:59:04.316843"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 07:59:04.333204"], ["updated_at", "2019-06-10 07:59:04.333204"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "3b106c91a83a2bbbf9faeafe7e993dba"], ["action", "users#create"], ["created_at", "2019-06-10 07:59:04.347557"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 2.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:59:04.360375"], ["updated_at", "2019-06-10 07:59:04.360375"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 07:59:04.364363"], ["updated_at", "2019-06-10 07:59:04.364363"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "0f4ca0c1637c3e14902afeec1d0794ca"], ["action", "register"], ["created_at", "2019-06-10 07:59:04.366667"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:59:04.374111"], ["updated_at", "2019-06-10 07:59:04.374111"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 07:59:04.402779"], ["updated_at", "2019-06-10 07:59:04.402779"]]
  [1m[36mUserWithAll Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:59:04.404350"], ["updated_at", "2019-06-10 07:59:04.404350"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:59:04.405812"], ["updated_at", "2019-06-10 07:59:04.405812"]]
  [1m[36mUserWithAll Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 07:59:04.406899"], ["updated_at", "2019-06-10 07:59:04.406899"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "935273e237039142bf4a621466f0311a"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:04.409998"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "935273e237039142bf4a621466f0311a"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:04.411930"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "935273e237039142bf4a621466f0311a"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:04.414380"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "935273e237039142bf4a621466f0311a"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:04.416388"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 38ms (Views: 0.1ms | ActiveRecord: 7.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:59:04.424566"], ["updated_at", "2019-06-10 07:59:04.424566"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 07:59:04.433949"], ["updated_at", "2019-06-10 07:59:04.433949"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", "2019-06-10 07:59:04.435225"], ["updated_at", "2019-06-10 07:59:04.435225"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", "2019-06-10 07:59:04.436703"], ["updated_at", "2019-06-10 07:59:04.436703"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", "2019-06-10 07:59:04.437803"], ["updated_at", "2019-06-10 07:59:04.437803"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"10\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"11\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"10\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"11\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["request_uuid", "f3a9c8d393544a04f2e18db1d8d042b0"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:04.439984"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 3.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:59:04.450972"], ["updated_at", "2019-06-10 07:59:04.450972"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:59:04.456165"], ["updated_at", "2019-06-10 07:59:04.456165"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", "2019-06-10 07:59:04.456965"], ["updated_at", "2019-06-10 07:59:04.456965"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", "2019-06-10 07:59:04.457898"], ["updated_at", "2019-06-10 07:59:04.457898"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", "2019-06-10 07:59:04.459061"], ["updated_at", "2019-06-10 07:59:04.459061"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "{\"users\":{\"14\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"15\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"14\":{\"name\":\"User1\",\"company_name\":null},\"15\":{\"name\":\"User2\",\"company_name\":null},\"16\":{\"name\":\"User3\",\"company_name\":null}}}"], ["request_uuid", "e4cd3ff1ff05bc172b29556bad182f42"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:04.461353"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:59:04.470692"], ["updated_at", "2019-06-10 07:59:04.470692"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "something"], ["created_at", "2019-06-10 07:59:04.472311"], ["updated_at", "2019-06-10 07:59:04.472311"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#update as HTML
  Parameters: {"company"=>{"name"=>"something else"}, "id"=>"4"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.4ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["name", "something else"], ["updated_at", "2019-06-10 07:59:04.479803"], ["id", 4]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.3ms)[0m  [1m[33mUPDATE "companies" SET "description" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["description", "Something third"], ["updated_at", "2019-06-10 07:59:04.482936"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"name\":[\"something\",\"something else\"],\"description\":[null,\"Something third\"]}"], ["request_uuid", "8d0ae0c493955aef0ea10eb50f98f239"], ["action", "companies#update"], ["created_at", "2019-06-10 07:59:04.486026"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 3.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:59:04.500783"], ["updated_at", "2019-06-10 07:59:04.500783"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:59:04.526536"], ["updated_at", "2019-06-10 07:59:04.526536"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 5], ["created_at", "2019-06-10 07:59:04.527979"], ["updated_at", "2019-06-10 07:59:04.527979"]]
  [1m[36mUserWithAll Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 5], ["created_at", "2019-06-10 07:59:04.529768"], ["updated_at", "2019-06-10 07:59:04.529768"]]
  [1m[36mCompanyInfo Create (1.2ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 5], ["created_at", "2019-06-10 07:59:04.531690"], ["updated_at", "2019-06-10 07:59:04.531690"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "4c2af4bd73718543d6785b5c4588aa09"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:04.536322"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "4c2af4bd73718543d6785b5c4588aa09"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:04.540222"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 37ms (Views: 0.1ms | ActiveRecord: 7.7ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:59:09.931750"], ["updated_at", "2019-06-10 07:59:09.931750"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 07:59:09.944263"], ["updated_at", "2019-06-10 07:59:09.944263"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "6affc06a8ccb485e767a4ea71a8a17c6"], ["action", "users#create"], ["created_at", "2019-06-10 07:59:09.958456"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 2.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:59:09.971106"], ["updated_at", "2019-06-10 07:59:09.971106"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 07:59:09.974544"], ["updated_at", "2019-06-10 07:59:09.974544"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "2ef6012c800fa9aba05d51cda1bd6f82"], ["action", "register"], ["created_at", "2019-06-10 07:59:09.976350"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:59:09.986291"], ["updated_at", "2019-06-10 07:59:09.986291"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.7ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 07:59:10.014298"], ["updated_at", "2019-06-10 07:59:10.014298"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:59:10.016759"], ["updated_at", "2019-06-10 07:59:10.016759"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:59:10.018085"], ["updated_at", "2019-06-10 07:59:10.018085"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 07:59:10.018972"], ["updated_at", "2019-06-10 07:59:10.018972"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "87094b85382d70d36b0c8d9610fb3c5e"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:10.020927"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "87094b85382d70d36b0c8d9610fb3c5e"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:10.022549"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "87094b85382d70d36b0c8d9610fb3c5e"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:10.024253"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "87094b85382d70d36b0c8d9610fb3c5e"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:10.025902"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 41ms (Views: 0.1ms | ActiveRecord: 5.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:59:10.036590"], ["updated_at", "2019-06-10 07:59:10.036590"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 07:59:10.042217"], ["updated_at", "2019-06-10 07:59:10.042217"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", "2019-06-10 07:59:10.043220"], ["updated_at", "2019-06-10 07:59:10.043220"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", "2019-06-10 07:59:10.044302"], ["updated_at", "2019-06-10 07:59:10.044302"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", "2019-06-10 07:59:10.045323"], ["updated_at", "2019-06-10 07:59:10.045323"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"10\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"11\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"10\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"11\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["request_uuid", "2348095ab4f083e56335c39616f36812"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:10.048310"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 2.0ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:59:10.058681"], ["updated_at", "2019-06-10 07:59:10.058681"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:59:10.065923"], ["updated_at", "2019-06-10 07:59:10.065923"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", "2019-06-10 07:59:10.067051"], ["updated_at", "2019-06-10 07:59:10.067051"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", "2019-06-10 07:59:10.070232"], ["updated_at", "2019-06-10 07:59:10.070232"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", "2019-06-10 07:59:10.071792"], ["updated_at", "2019-06-10 07:59:10.071792"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "{\"users\":{\"14\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"15\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"14\":{\"name\":\"User1\",\"company_name\":null},\"15\":{\"name\":\"User2\",\"company_name\":null},\"16\":{\"name\":\"User3\",\"company_name\":null}}}"], ["request_uuid", "589e68d239fcd53a36187fb39e8c1e27"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:10.074323"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 15ms (Views: 0.1ms | ActiveRecord: 2.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:59:10.088449"], ["updated_at", "2019-06-10 07:59:10.088449"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "something"], ["created_at", "2019-06-10 07:59:10.090799"], ["updated_at", "2019-06-10 07:59:10.090799"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#update as HTML
  Parameters: {"company"=>{"name"=>"something else"}, "id"=>"4"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.3ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["name", "something else"], ["updated_at", "2019-06-10 07:59:10.100510"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.2ms)[0m  [1m[33mUPDATE "companies" SET "description" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["description", "Something third"], ["updated_at", "2019-06-10 07:59:10.102737"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"name\":[\"something\",\"something else\"],\"description\":[null,\"Something third\"]}"], ["request_uuid", "a79fc4030f51c75e7e9e38d7981ef1bc"], ["action", "companies#update"], ["created_at", "2019-06-10 07:59:10.105795"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 2.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:59:10.118053"], ["updated_at", "2019-06-10 07:59:10.118053"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:59:10.144077"], ["updated_at", "2019-06-10 07:59:10.144077"]]
  [1m[36mUserWithAll Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 5], ["created_at", "2019-06-10 07:59:10.145819"], ["updated_at", "2019-06-10 07:59:10.145819"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 5], ["created_at", "2019-06-10 07:59:10.147805"], ["updated_at", "2019-06-10 07:59:10.147805"]]
  [1m[36mCompanyInfo Create (0.9ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 5], ["created_at", "2019-06-10 07:59:10.149921"], ["updated_at", "2019-06-10 07:59:10.149921"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.1ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "2e4c93c2e70c58455ffe32cc36640008"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:10.154940"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "2e4c93c2e70c58455ffe32cc36640008"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:10.160574"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 41ms (Views: 0.2ms | ActiveRecord: 11.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", "2019-06-10 07:59:10.169818"], ["updated_at", "2019-06-10 07:59:10.169818"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 21], ["request_uuid", "2e4c93c2e70c58455ffe32cc36640008"], ["created_at", "2019-06-10 07:59:10.172834"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 07:59:10.207238"], ["updated_at", "2019-06-10 07:59:10.207238"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 07:59:10.222384"], ["updated_at", "2019-06-10 07:59:10.222384"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 07:59:10.226897"], ["updated_at", "2019-06-10 07:59:10.226897"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 07:59:10.246808"], ["updated_at", "2019-06-10 07:59:10.246808"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", "2019-06-10 07:59:10.256162"], ["updated_at", "2019-06-10 07:59:10.256162"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 07:59:10.261638"], ["updated_at", "2019-06-10 07:59:10.261638"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (7.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:59:51.459009"], ["updated_at", "2019-06-10 07:59:51.459009"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 07:59:51.472509"], ["updated_at", "2019-06-10 07:59:51.472509"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "7d3d09a67d0d881a4430bc45f5a0587e"], ["action", "users#create"], ["created_at", "2019-06-10 07:59:51.486199"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 0.1ms | ActiveRecord: 2.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:59:51.498934"], ["updated_at", "2019-06-10 07:59:51.498934"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 07:59:51.502539"], ["updated_at", "2019-06-10 07:59:51.502539"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "b909580ee460f66159e2fda106c2532e"], ["action", "register"], ["created_at", "2019-06-10 07:59:51.504469"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:59:51.511020"], ["updated_at", "2019-06-10 07:59:51.511020"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 07:59:51.531896"], ["updated_at", "2019-06-10 07:59:51.531896"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 07:59:51.533493"], ["updated_at", "2019-06-10 07:59:51.533493"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 07:59:51.534693"], ["updated_at", "2019-06-10 07:59:51.534693"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 07:59:51.536002"], ["updated_at", "2019-06-10 07:59:51.536002"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "1b05019c511a6f2fa45aae107a913fac"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:51.538283"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "1b05019c511a6f2fa45aae107a913fac"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:51.539960"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "1b05019c511a6f2fa45aae107a913fac"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:51.541656"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "1b05019c511a6f2fa45aae107a913fac"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:51.543811"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 34ms (Views: 0.1ms | ActiveRecord: 5.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:59:51.555018"], ["updated_at", "2019-06-10 07:59:51.555018"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 07:59:51.562630"], ["updated_at", "2019-06-10 07:59:51.562630"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", "2019-06-10 07:59:51.563738"], ["updated_at", "2019-06-10 07:59:51.563738"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", "2019-06-10 07:59:51.564736"], ["updated_at", "2019-06-10 07:59:51.564736"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", "2019-06-10 07:59:51.565783"], ["updated_at", "2019-06-10 07:59:51.565783"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"10\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"11\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"10\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"11\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["request_uuid", "1f44f877efa4352eef2eb553327051f5"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:51.568187"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:59:51.576336"], ["updated_at", "2019-06-10 07:59:51.576336"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:59:51.582375"], ["updated_at", "2019-06-10 07:59:51.582375"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", "2019-06-10 07:59:51.583303"], ["updated_at", "2019-06-10 07:59:51.583303"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", "2019-06-10 07:59:51.584239"], ["updated_at", "2019-06-10 07:59:51.584239"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", "2019-06-10 07:59:51.585157"], ["updated_at", "2019-06-10 07:59:51.585157"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "{\"users\":{\"14\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"15\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"14\":{\"name\":\"User1\",\"company_name\":null},\"15\":{\"name\":\"User2\",\"company_name\":null},\"16\":{\"name\":\"User3\",\"company_name\":null}}}"], ["request_uuid", "c6a169b77a4fa5fd37d895a6048d933d"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:51.587252"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:59:51.597108"], ["updated_at", "2019-06-10 07:59:51.597108"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "something"], ["created_at", "2019-06-10 07:59:51.599466"], ["updated_at", "2019-06-10 07:59:51.599466"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#update as HTML
  Parameters: {"company"=>{"name"=>"something else"}, "id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.2ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["name", "something else"], ["updated_at", "2019-06-10 07:59:51.606224"], ["id", 4]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.4ms)[0m  [1m[33mUPDATE "companies" SET "description" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["description", "Something third"], ["updated_at", "2019-06-10 07:59:51.608565"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"name\":[\"something\",\"something else\"],\"description\":[null,\"Something third\"]}"], ["request_uuid", "4045d94ee0de5c13407e75ee19f2417c"], ["action", "companies#update"], ["created_at", "2019-06-10 07:59:51.611753"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.6ms | ActiveRecord: 2.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 07:59:51.621597"], ["updated_at", "2019-06-10 07:59:51.621597"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 07:59:51.640942"], ["updated_at", "2019-06-10 07:59:51.640942"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 5], ["created_at", "2019-06-10 07:59:51.642457"], ["updated_at", "2019-06-10 07:59:51.642457"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 5], ["created_at", "2019-06-10 07:59:51.644262"], ["updated_at", "2019-06-10 07:59:51.644262"]]
  [1m[36mCompanyInfo Create (0.6ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 5], ["created_at", "2019-06-10 07:59:51.645496"], ["updated_at", "2019-06-10 07:59:51.645496"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "f6cb6aa213300758a7eb5a9efd0dbb59"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:51.648955"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "f6cb6aa213300758a7eb5a9efd0dbb59"], ["action", "companies#create"], ["created_at", "2019-06-10 07:59:51.652644"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 29ms (Views: 0.1ms | ActiveRecord: 5.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", "2019-06-10 07:59:51.658348"], ["updated_at", "2019-06-10 07:59:51.658348"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 21], ["request_uuid", "f6cb6aa213300758a7eb5a9efd0dbb59"], ["created_at", "2019-06-10 07:59:51.661469"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 07:59:51.677642"], ["updated_at", "2019-06-10 07:59:51.677642"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 07:59:51.681387"], ["updated_at", "2019-06-10 07:59:51.681387"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 07:59:51.693160"], ["updated_at", "2019-06-10 07:59:51.693160"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", "2019-06-10 07:59:51.695260"], ["id", 24]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 07:59:51.698258"], ["updated_at", "2019-06-10 07:59:51.698258"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 25]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 07:59:51.703120"], ["updated_at", "2019-06-10 07:59:51.703120"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaTrue Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 07:59:51.711428"], ["updated_at", "2019-06-10 07:59:51.711428"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaSymbol Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 07:59:51.719665"], ["updated_at", "2019-06-10 07:59:51.719665"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaProc Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 07:59:51.728613"], ["updated_at", "2019-06-10 07:59:51.728613"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 07:59:51.731837"], ["updated_at", "2019-06-10 07:59:51.731837"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 07:59:51.733758"], ["updated_at", "2019-06-10 07:59:51.733758"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", "2019-06-10 07:59:51.737029"], ["updated_at", "2019-06-10 07:59:51.737029"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserWithCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 6], ["created_at", "2019-06-10 07:59:51.744783"], ["updated_at", "2019-06-10 07:59:51.744783"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 07:59:51.747769"], ["updated_at", "2019-06-10 07:59:51.747769"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["name", "test1"], ["updated_at", "2019-06-10 07:59:51.749554"], ["id", 33]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:04:00.380824"], ["updated_at", "2019-06-10 08:04:00.380824"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:04:00.395236"], ["updated_at", "2019-06-10 08:04:00.395236"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "168fa902a1eba92ec5bb6466fdbf96af"], ["action", "users#create"], ["created_at", "2019-06-10 08:04:00.410230"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 2.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:04:00.422307"], ["updated_at", "2019-06-10 08:04:00.422307"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:04:00.426546"], ["updated_at", "2019-06-10 08:04:00.426546"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "f9a5aae20629df1409386056387c7318"], ["action", "register"], ["created_at", "2019-06-10 08:04:00.428439"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:04:00.437575"], ["updated_at", "2019-06-10 08:04:00.437575"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 08:04:00.467106"], ["updated_at", "2019-06-10 08:04:00.467106"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 08:04:00.468582"], ["updated_at", "2019-06-10 08:04:00.468582"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 08:04:00.469639"], ["updated_at", "2019-06-10 08:04:00.469639"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 08:04:00.470517"], ["updated_at", "2019-06-10 08:04:00.470517"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "30eea8db1ce893b0d52f0305f05e01a8"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.472415"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "30eea8db1ce893b0d52f0305f05e01a8"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.474315"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "30eea8db1ce893b0d52f0305f05e01a8"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.476876"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "30eea8db1ce893b0d52f0305f05e01a8"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.478673"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 38ms (Views: 0.1ms | ActiveRecord: 7.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:04:00.484934"], ["updated_at", "2019-06-10 08:04:00.484934"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 08:04:00.492433"], ["updated_at", "2019-06-10 08:04:00.492433"]]
  [1m[36mUserWithAll Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", "2019-06-10 08:04:00.494709"], ["updated_at", "2019-06-10 08:04:00.494709"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", "2019-06-10 08:04:00.498669"], ["updated_at", "2019-06-10 08:04:00.498669"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", "2019-06-10 08:04:00.503530"], ["updated_at", "2019-06-10 08:04:00.503530"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"10\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"11\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"10\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"11\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["request_uuid", "337b8e0405a462668cc379a42f04332c"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.506434"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 24ms (Views: 0.2ms | ActiveRecord: 3.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:04:00.518146"], ["updated_at", "2019-06-10 08:04:00.518146"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 08:04:00.523719"], ["updated_at", "2019-06-10 08:04:00.523719"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", "2019-06-10 08:04:00.524742"], ["updated_at", "2019-06-10 08:04:00.524742"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", "2019-06-10 08:04:00.526251"], ["updated_at", "2019-06-10 08:04:00.526251"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", "2019-06-10 08:04:00.527382"], ["updated_at", "2019-06-10 08:04:00.527382"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "{\"users\":{\"14\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"15\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"14\":{\"name\":\"User1\",\"company_name\":null},\"15\":{\"name\":\"User2\",\"company_name\":null},\"16\":{\"name\":\"User3\",\"company_name\":null}}}"], ["request_uuid", "d7f9a8cffe2c00b15e74ac317e885927"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.530163"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 2.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:04:00.539928"], ["updated_at", "2019-06-10 08:04:00.539928"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (1.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "something"], ["created_at", "2019-06-10 08:04:00.542009"], ["updated_at", "2019-06-10 08:04:00.542009"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#update as HTML
  Parameters: {"company"=>{"name"=>"something else"}, "id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.3ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["name", "something else"], ["updated_at", "2019-06-10 08:04:00.550513"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.2ms)[0m  [1m[33mUPDATE "companies" SET "description" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["description", "Something third"], ["updated_at", "2019-06-10 08:04:00.552742"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"name\":[\"something\",\"something else\"],\"description\":[null,\"Something third\"]}"], ["request_uuid", "406eca83e4bf6b034a254a326ac462d9"], ["action", "companies#update"], ["created_at", "2019-06-10 08:04:00.554796"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:04:00.566932"], ["updated_at", "2019-06-10 08:04:00.566932"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 08:04:00.597011"], ["updated_at", "2019-06-10 08:04:00.597011"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 5], ["created_at", "2019-06-10 08:04:00.597984"], ["updated_at", "2019-06-10 08:04:00.597984"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 5], ["created_at", "2019-06-10 08:04:00.599361"], ["updated_at", "2019-06-10 08:04:00.599361"]]
  [1m[36mCompanyInfo Create (0.6ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 5], ["created_at", "2019-06-10 08:04:00.600719"], ["updated_at", "2019-06-10 08:04:00.600719"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.604184"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.608278"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 37ms (Views: 0.1ms | ActiveRecord: 6.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", "2019-06-10 08:04:00.613991"], ["updated_at", "2019-06-10 08:04:00.613991"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 21], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["created_at", "2019-06-10 08:04:00.616372"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:04:00.629644"], ["updated_at", "2019-06-10 08:04:00.629644"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:04:00.635401"], ["updated_at", "2019-06-10 08:04:00.635401"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.638078"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.644183"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 21], ["record_changes", "{\"email\":[null,\"admin\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.647912"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.650943"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.653467"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:04:00.675888"], ["updated_at", "2019-06-10 08:04:00.675888"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", "2019-06-10 08:04:00.678550"], ["id", 24]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.680746"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.683279"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 21], ["record_changes", "{\"email\":[null,\"admin\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.686577"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.689433"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.695838"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[\"test\",\"test1\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.700952"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:04:00.710020"], ["updated_at", "2019-06-10 08:04:00.710020"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 25]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.716040"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.719190"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 21], ["record_changes", "{\"email\":[null,\"admin\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.720760"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.722157"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.723515"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[\"test\",\"test1\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.725408"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 25], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.729552"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:04:00.733897"], ["updated_at", "2019-06-10 08:04:00.733897"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.735616"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.737545"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 21], ["record_changes", "{\"email\":[null,\"admin\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.739296"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.740947"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.743133"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[\"test\",\"test1\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.744745"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 25], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.746608"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 26], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.748148"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaTrue Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:04:00.757655"], ["updated_at", "2019-06-10 08:04:00.757655"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.762765"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.765610"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 21], ["record_changes", "{\"email\":[null,\"admin\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.767890"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.769482"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.770871"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[\"test\",\"test1\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.772298"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 25], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.773651"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 26], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.778144"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaTrue"], ["subject_id", 27], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.779968"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaSymbol Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:04:00.789292"], ["updated_at", "2019-06-10 08:04:00.789292"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.791741"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.794820"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 21], ["record_changes", "{\"email\":[null,\"admin\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.796968"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.798462"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.800880"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[\"test\",\"test1\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.802634"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 25], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.804112"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 26], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.805498"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaTrue"], ["subject_id", 27], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.807160"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaSymbol"], ["subject_id", 28], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.811515"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaProc Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:04:00.823295"], ["updated_at", "2019-06-10 08:04:00.823295"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.827468"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.830665"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 21], ["record_changes", "{\"email\":[null,\"admin\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.833271"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.835477"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.837006"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[\"test\",\"test1\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.838497"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 25], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.839926"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 26], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.841836"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaTrue"], ["subject_id", 27], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.845657"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaSymbol"], ["subject_id", 28], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.847457"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaProc"], ["subject_id", 29], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.849138"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:04:00.852554"], ["updated_at", "2019-06-10 08:04:00.852554"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:04:00.854533"], ["updated_at", "2019-06-10 08:04:00.854533"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.856403"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.858829"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 21], ["record_changes", "{\"email\":[null,\"admin\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.860561"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.862339"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.864208"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[\"test\",\"test1\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.866217"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 25], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.868031"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 26], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.869512"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaTrue"], ["subject_id", 27], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.871049"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaSymbol"], ["subject_id", 28], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.872572"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaProc"], ["subject_id", 29], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.874352"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 30], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.878342"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 30], ["subject_type", "UserOnly"], ["subject_id", 31], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.880031"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", "2019-06-10 08:04:00.883216"], ["updated_at", "2019-06-10 08:04:00.883216"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserWithCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 6], ["created_at", "2019-06-10 08:04:00.892083"], ["updated_at", "2019-06-10 08:04:00.892083"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.895001"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.897345"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 21], ["record_changes", "{\"email\":[null,\"admin\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.899050"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.901141"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.902593"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[\"test\",\"test1\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.904022"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 25], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.905425"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (3.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 26], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.907720"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaTrue"], ["subject_id", 27], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.913835"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaSymbol"], ["subject_id", 28], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.915952"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaProc"], ["subject_id", 29], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.917909"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 30], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.919510"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 30], ["subject_type", "UserOnly"], ["subject_id", 31], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.920948"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 6], ["record_changes", "{\"name\":[null,\"company\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.922300"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserWithCompany"], ["subject_id", 32], ["parent_type", "Company"], ["parent_id", 6], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,6]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.923706"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:04:00.928983"], ["updated_at", "2019-06-10 08:04:00.928983"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["name", "test1"], ["updated_at", "2019-06-10 08:04:00.932096"], ["id", 33]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.933994"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.936286"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 21], ["record_changes", "{\"email\":[null,\"admin\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.937817"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.939186"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.943945"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[\"test\",\"test1\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.946861"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 25], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.949583"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 26], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.952494"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaTrue"], ["subject_id", 27], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.955148"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaSymbol"], ["subject_id", 28], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.960004"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaProc"], ["subject_id", 29], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.961846"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 30], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.964855"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 30], ["subject_type", "UserOnly"], ["subject_id", 31], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.966834"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 6], ["record_changes", "{\"name\":[null,\"company\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.968254"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserWithCompany"], ["subject_id", 32], ["parent_type", "Company"], ["parent_id", 6], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,6]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.969660"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 33], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "233e0ec00850bc18d6c24518925a49fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:04:00.971150"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:04:31.603671"], ["updated_at", "2019-06-10 08:04:31.603671"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:04:31.622086"], ["updated_at", "2019-06-10 08:04:31.622086"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.1ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "a320d1fc90ad8de68190a30bd62c2ff0"], ["action", "users#create"], ["created_at", "2019-06-10 08:04:41.629091"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10012ms (Views: 0.2ms | ActiveRecord: 6.7ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:04:41.650559"], ["updated_at", "2019-06-10 08:04:41.650559"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:04:41.656152"], ["updated_at", "2019-06-10 08:04:41.656152"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 6743ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35m (7.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:04:58.260508"], ["updated_at", "2019-06-10 08:04:58.260508"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:05:42.782527"], ["updated_at", "2019-06-10 08:05:42.782527"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 1], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "e4fe425b-ff06-420d-aa57-15392036167b"], ["created_at", "2019-06-10 08:05:53.491589"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:11:52.105262"], ["updated_at", "2019-06-10 08:11:52.105262"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 1], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "eecbb0d0-73e8-489c-a771-c78e2ef7ac8d"], ["created_at", "2019-06-10 08:11:53.746747"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:03.534339"], ["updated_at", "2019-06-10 08:12:03.534339"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:03.544973"], ["updated_at", "2019-06-10 08:12:03.544973"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "44e418d5-59b0-4867-8675-251d76a7633c"], ["created_at", "2019-06-10 08:12:03.559815"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:03.568423"], ["updated_at", "2019-06-10 08:12:03.568423"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", "2019-06-10 08:12:03.570239"], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 3], ["record_changes", "{\"email\":[\"test\",\"test1\"]}"], ["request_uuid", "fcc502da-54f6-44e9-bcf8-8008660b034f"], ["created_at", "2019-06-10 08:12:03.571888"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:03.576826"], ["updated_at", "2019-06-10 08:12:03.576826"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "a7fc5d7d-17b3-4746-9097-d51ee5f5895a"], ["created_at", "2019-06-10 08:12:03.580459"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:03.598236"], ["updated_at", "2019-06-10 08:12:03.598236"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 5], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "00212a61-e128-4176-9ae6-c907e80c3fa8"], ["created_at", "2019-06-10 08:12:03.600168"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaTrue Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:03.610508"], ["updated_at", "2019-06-10 08:12:03.610508"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 6], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "f6dcc090-aa4d-4202-8c41-e352eb9698e0"], ["created_at", "2019-06-10 08:12:03.613116"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaSymbol Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:03.624916"], ["updated_at", "2019-06-10 08:12:03.624916"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 7], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "f3c78eba-a5f7-4922-96b2-7b3bf844cae0"], ["created_at", "2019-06-10 08:12:03.626811"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaProc Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:03.639904"], ["updated_at", "2019-06-10 08:12:03.639904"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 8], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "3dc2eb0e-8bb1-4049-a121-59ebaa920031"], ["created_at", "2019-06-10 08:12:03.643139"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:03.650496"], ["updated_at", "2019-06-10 08:12:03.650496"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:03.654037"], ["updated_at", "2019-06-10 08:12:03.654037"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserOnly"], ["subject_id", 10], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "f199e1dd-8535-4d9d-874b-a5858f6bebb1"], ["created_at", "2019-06-10 08:12:03.656909"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:03.672914"], ["updated_at", "2019-06-10 08:12:03.672914"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 11], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "c6af3002-4460-4b3b-b4d5-53236b4ef381"], ["action", "create"], ["created_at", "2019-06-10 08:12:03.675576"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.8ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", "2019-06-10 08:12:03.688214"], ["updated_at", "2019-06-10 08:12:03.688214"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserWithCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", "2019-06-10 08:12:03.700445"], ["updated_at", "2019-06-10 08:12:03.700445"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,1]}"], ["request_uuid", "759c6071-d8c6-4eeb-a0ed-a8498d0e9a70"], ["created_at", "2019-06-10 08:12:03.702545"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:03.706884"], ["updated_at", "2019-06-10 08:12:03.706884"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["name", "test1"], ["updated_at", "2019-06-10 08:12:03.708847"], ["id", 13]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (7.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:23.770332"], ["updated_at", "2019-06-10 08:12:23.770332"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:23.784518"], ["updated_at", "2019-06-10 08:12:23.784518"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "86ac87a1-8e9f-4147-8690-0521882f6b0b"], ["created_at", "2019-06-10 08:12:23.803354"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:23.810187"], ["updated_at", "2019-06-10 08:12:23.810187"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", "2019-06-10 08:12:23.812356"], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 3], ["record_changes", "{\"email\":[\"test\",\"test1\"]}"], ["request_uuid", "453d8c8d-4c2b-4ef2-b364-270fdded289a"], ["created_at", "2019-06-10 08:12:23.814108"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:23.817664"], ["updated_at", "2019-06-10 08:12:23.817664"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "4ac34830-25e8-418d-8eec-2a544247dd2a"], ["created_at", "2019-06-10 08:12:23.821191"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:23.827971"], ["updated_at", "2019-06-10 08:12:23.827971"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 5], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "8f266188-ff2f-4aa7-ad4d-7e9725121cb4"], ["created_at", "2019-06-10 08:12:23.830782"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaTrue Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:23.840666"], ["updated_at", "2019-06-10 08:12:23.840666"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 6], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "a149475a-00d2-495f-bebc-59981c4162fe"], ["created_at", "2019-06-10 08:12:23.842921"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaSymbol Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:23.854484"], ["updated_at", "2019-06-10 08:12:23.854484"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 7], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "5d9045a6-3bd6-4819-86b6-cb2b83917f34"], ["created_at", "2019-06-10 08:12:23.856352"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaProc Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:23.869069"], ["updated_at", "2019-06-10 08:12:23.869069"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 8], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "5f6fb9c1-edc1-48ba-9a41-9479c2d08d5e"], ["created_at", "2019-06-10 08:12:23.871159"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:23.877209"], ["updated_at", "2019-06-10 08:12:23.877209"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:23.882118"], ["updated_at", "2019-06-10 08:12:23.882118"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserOnly"], ["subject_id", 10], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "afc6a53d-b5ec-4fc4-8ae0-4c04dd2ddd04"], ["created_at", "2019-06-10 08:12:23.884355"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:23.896309"], ["updated_at", "2019-06-10 08:12:23.896309"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 11], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "ff8457d1-1230-47b3-9f33-3083be041878"], ["action", "create"], ["created_at", "2019-06-10 08:12:23.899943"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.8ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", "2019-06-10 08:12:23.918167"], ["updated_at", "2019-06-10 08:12:23.918167"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserWithCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", "2019-06-10 08:12:23.933612"], ["updated_at", "2019-06-10 08:12:23.933612"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,1]}"], ["request_uuid", "6b999f63-4043-4a09-87f7-e2783b1e1f06"], ["created_at", "2019-06-10 08:12:23.935712"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:23.949527"], ["updated_at", "2019-06-10 08:12:23.949527"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["name", "test1"], ["updated_at", "2019-06-10 08:12:23.951440"], ["id", 13]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (8.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:40.553623"], ["updated_at", "2019-06-10 08:12:40.553623"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:40.565093"], ["updated_at", "2019-06-10 08:12:40.565093"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.0ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "5358efac-565f-4af8-9ead-3846a3e76e93"], ["created_at", "2019-06-10 08:12:40.584936"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:40.596154"], ["updated_at", "2019-06-10 08:12:40.596154"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", "2019-06-10 08:12:40.598442"], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 3], ["record_changes", "{\"email\":[\"test\",\"test1\"]}"], ["request_uuid", "fc6fe801-96f2-49d1-bd6a-14b9ed13154c"], ["created_at", "2019-06-10 08:12:40.600646"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:40.607320"], ["updated_at", "2019-06-10 08:12:40.607320"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "3914fe6f-3976-4e77-a69f-2fa2fd9bea4f"], ["created_at", "2019-06-10 08:12:40.614857"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:40.619023"], ["updated_at", "2019-06-10 08:12:40.619023"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 5], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "67d6965c-af34-4b35-987a-70b587ccd004"], ["created_at", "2019-06-10 08:12:40.620928"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaTrue Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:40.631748"], ["updated_at", "2019-06-10 08:12:40.631748"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 6], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "c88ecfad-6460-4aad-a608-351a23ddb1a9"], ["created_at", "2019-06-10 08:12:40.633733"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaSymbol Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:40.646349"], ["updated_at", "2019-06-10 08:12:40.646349"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 7], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "bbe59506-77bf-49cc-a44b-995abb8e8537"], ["created_at", "2019-06-10 08:12:40.648225"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaProc Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:40.661033"], ["updated_at", "2019-06-10 08:12:40.661033"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 8], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "56166783-079a-4cd3-b1e3-bc1353b4ff3e"], ["created_at", "2019-06-10 08:12:40.663568"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:40.667766"], ["updated_at", "2019-06-10 08:12:40.667766"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:40.669866"], ["updated_at", "2019-06-10 08:12:40.669866"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserOnly"], ["subject_id", 10], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "3fb13140-61a2-4832-b0d4-1d78342b5206"], ["created_at", "2019-06-10 08:12:40.672759"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:40.685815"], ["updated_at", "2019-06-10 08:12:40.685815"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 11], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "1ae2ac3f-9007-4bf6-a3b6-a00c64098baa"], ["action", "create"], ["created_at", "2019-06-10 08:12:40.688719"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.9ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", "2019-06-10 08:12:40.708158"], ["updated_at", "2019-06-10 08:12:40.708158"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserWithCompany Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", "2019-06-10 08:12:40.724714"], ["updated_at", "2019-06-10 08:12:40.724714"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,1]}"], ["request_uuid", "6bf31921-6ad5-430c-9e8b-e4735b492778"], ["created_at", "2019-06-10 08:12:40.729625"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:40.745905"], ["updated_at", "2019-06-10 08:12:40.745905"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["name", "test1"], ["updated_at", "2019-06-10 08:12:40.747758"], ["id", 13]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:56.390148"], ["updated_at", "2019-06-10 08:12:56.390148"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:56.404780"], ["updated_at", "2019-06-10 08:12:56.404780"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "9732c3d3-7622-40d1-8396-ba0d384f3848"], ["created_at", "2019-06-10 08:12:56.420993"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:56.427417"], ["updated_at", "2019-06-10 08:12:56.427417"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", "2019-06-10 08:12:56.429138"], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 3], ["record_changes", "{\"email\":[\"test\",\"test1\"]}"], ["request_uuid", "d535ee3a-35fe-47dc-8795-f9759c5218c9"], ["created_at", "2019-06-10 08:12:56.430793"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:56.435107"], ["updated_at", "2019-06-10 08:12:56.435107"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "417603fb-c4a8-496f-8908-7c05b2740d1e"], ["created_at", "2019-06-10 08:12:56.438507"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:56.443494"], ["updated_at", "2019-06-10 08:12:56.443494"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 5], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "74402439-3b8a-46be-9598-c9ec1c612792"], ["created_at", "2019-06-10 08:12:56.445159"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaTrue Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:56.456909"], ["updated_at", "2019-06-10 08:12:56.456909"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 6], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "25abdbba-7f46-444d-abc1-c1d2e769c038"], ["created_at", "2019-06-10 08:12:56.459413"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaSymbol Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:56.469817"], ["updated_at", "2019-06-10 08:12:56.469817"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 7], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "270b2dea-c983-447b-a20a-e59b98a7928a"], ["created_at", "2019-06-10 08:12:56.476188"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaProc Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:56.493771"], ["updated_at", "2019-06-10 08:12:56.493771"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 8], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "23807b20-a812-4de3-af2b-6a2fd6df6f6f"], ["created_at", "2019-06-10 08:12:56.496790"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:56.505131"], ["updated_at", "2019-06-10 08:12:56.505131"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:56.508336"], ["updated_at", "2019-06-10 08:12:56.508336"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserOnly"], ["subject_id", 10], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "06f019a4-c094-41e7-9124-9d0f17b9105a"], ["created_at", "2019-06-10 08:12:56.510119"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:56.518407"], ["updated_at", "2019-06-10 08:12:56.518407"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 11], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "9306312b-6084-4b40-be3b-4a1e04da8819"], ["action", "create"], ["created_at", "2019-06-10 08:12:56.520081"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", "2019-06-10 08:12:56.530567"], ["updated_at", "2019-06-10 08:12:56.530567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserWithCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", "2019-06-10 08:12:56.541631"], ["updated_at", "2019-06-10 08:12:56.541631"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,1]}"], ["request_uuid", "44285dc5-c416-4648-9c6e-f5b94460e352"], ["created_at", "2019-06-10 08:12:56.543885"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:12:56.552764"], ["updated_at", "2019-06-10 08:12:56.552764"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["name", "test1"], ["updated_at", "2019-06-10 08:12:56.557574"], ["id", 13]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (2.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:14:13.905725"], ["updated_at", "2019-06-10 08:14:13.905725"]]
  [1m[35m (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:14:13.925663"], ["updated_at", "2019-06-10 08:14:13.925663"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.9ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "5dc61df3499836b85ae6d0d294626716"], ["action", "users#create"], ["created_at", "2019-06-10 08:14:13.939930"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 19ms (Views: 0.1ms | ActiveRecord: 2.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:14:13.952784"], ["updated_at", "2019-06-10 08:14:13.952784"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:14:13.957801"], ["updated_at", "2019-06-10 08:14:13.957801"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "6c0448bef65b629c58366442a6ddcb4b"], ["action", "register"], ["created_at", "2019-06-10 08:14:13.962183"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.6ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:14:13.968806"], ["updated_at", "2019-06-10 08:14:13.968806"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.8ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 08:14:13.994699"], ["updated_at", "2019-06-10 08:14:13.994699"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 08:14:13.996536"], ["updated_at", "2019-06-10 08:14:13.996536"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 08:14:13.997781"], ["updated_at", "2019-06-10 08:14:13.997781"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 08:14:13.998899"], ["updated_at", "2019-06-10 08:14:13.998899"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "9eb4ee608bb600ae77dc550ed44dc792"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:14.001108"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "9eb4ee608bb600ae77dc550ed44dc792"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:14.003113"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.1ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "9eb4ee608bb600ae77dc550ed44dc792"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:14.005206"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "9eb4ee608bb600ae77dc550ed44dc792"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:14.012815"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 41ms (Views: 0.1ms | ActiveRecord: 9.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:14:14.020155"], ["updated_at", "2019-06-10 08:14:14.020155"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 08:14:14.028550"], ["updated_at", "2019-06-10 08:14:14.028550"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", "2019-06-10 08:14:14.029664"], ["updated_at", "2019-06-10 08:14:14.029664"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", "2019-06-10 08:14:14.030712"], ["updated_at", "2019-06-10 08:14:14.030712"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", "2019-06-10 08:14:14.031637"], ["updated_at", "2019-06-10 08:14:14.031637"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"10\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"11\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"10\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"11\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["request_uuid", "aa3bde88634610a97499dadbf6371adc"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:14.033854"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:14:14.043903"], ["updated_at", "2019-06-10 08:14:14.043903"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 08:14:14.049601"], ["updated_at", "2019-06-10 08:14:14.049601"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", "2019-06-10 08:14:14.050487"], ["updated_at", "2019-06-10 08:14:14.050487"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", "2019-06-10 08:14:14.051460"], ["updated_at", "2019-06-10 08:14:14.051460"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", "2019-06-10 08:14:14.052404"], ["updated_at", "2019-06-10 08:14:14.052404"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "{\"users\":{\"14\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"15\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"14\":{\"name\":\"User1\",\"company_name\":null},\"15\":{\"name\":\"User2\",\"company_name\":null},\"16\":{\"name\":\"User3\",\"company_name\":null}}}"], ["request_uuid", "928e6d666ac43d6edfa6ad636309c0db"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:14.054880"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 1.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:14:14.069283"], ["updated_at", "2019-06-10 08:14:14.069283"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "something"], ["created_at", "2019-06-10 08:14:14.072132"], ["updated_at", "2019-06-10 08:14:14.072132"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#update as HTML
  Parameters: {"company"=>{"name"=>"something else"}, "id"=>"4"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.3ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["name", "something else"], ["updated_at", "2019-06-10 08:14:14.081384"], ["id", 4]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.2ms)[0m  [1m[33mUPDATE "companies" SET "description" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["description", "Something third"], ["updated_at", "2019-06-10 08:14:14.083959"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"name\":[\"something\",\"something else\"],\"description\":[null,\"Something third\"]}"], ["request_uuid", "5f2cc2c64de7384f82d9358765a2e6dc"], ["action", "companies#update"], ["created_at", "2019-06-10 08:14:14.086600"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 2.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:14:14.098607"], ["updated_at", "2019-06-10 08:14:14.098607"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 08:14:14.124970"], ["updated_at", "2019-06-10 08:14:14.124970"]]
  [1m[36mUserWithAll Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 5], ["created_at", "2019-06-10 08:14:14.128596"], ["updated_at", "2019-06-10 08:14:14.128596"]]
  [1m[36mUserWithAll Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 5], ["created_at", "2019-06-10 08:14:14.130466"], ["updated_at", "2019-06-10 08:14:14.130466"]]
  [1m[36mCompanyInfo Create (1.2ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 5], ["created_at", "2019-06-10 08:14:14.132020"], ["updated_at", "2019-06-10 08:14:14.132020"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "a54506a62ed3b3eee1f06337dc1a1031"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:14.136563"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "a54506a62ed3b3eee1f06337dc1a1031"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:14.140523"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 40ms (Views: 0.1ms | ActiveRecord: 10.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", "2019-06-10 08:14:14.146522"], ["updated_at", "2019-06-10 08:14:14.146522"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 21], ["request_uuid", "a54506a62ed3b3eee1f06337dc1a1031"], ["created_at", "2019-06-10 08:14:14.148511"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:14.167634"], ["updated_at", "2019-06-10 08:14:14.167634"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:14.171912"], ["updated_at", "2019-06-10 08:14:14.171912"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "a54506a62ed3b3eee1f06337dc1a1031"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:14.174005"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:14.178129"], ["updated_at", "2019-06-10 08:14:14.178129"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", "2019-06-10 08:14:14.180236"], ["id", 24]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[\"test\",\"test1\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "a54506a62ed3b3eee1f06337dc1a1031"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:14.181780"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:14.196903"], ["updated_at", "2019-06-10 08:14:14.196903"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 25]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 25], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "a54506a62ed3b3eee1f06337dc1a1031"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:14.200308"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:14.205043"], ["updated_at", "2019-06-10 08:14:14.205043"]]
  [1m[35m (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 26], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "a54506a62ed3b3eee1f06337dc1a1031"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:14.210116"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaTrue Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:14.221553"], ["updated_at", "2019-06-10 08:14:14.221553"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaTrue"], ["subject_id", 27], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "a54506a62ed3b3eee1f06337dc1a1031"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:14.224152"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaSymbol Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:14.236372"], ["updated_at", "2019-06-10 08:14:14.236372"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaSymbol"], ["subject_id", 28], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "a54506a62ed3b3eee1f06337dc1a1031"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:14.238623"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaProc Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:14.254050"], ["updated_at", "2019-06-10 08:14:14.254050"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaProc"], ["subject_id", 29], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "a54506a62ed3b3eee1f06337dc1a1031"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:14.257667"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:14.265604"], ["updated_at", "2019-06-10 08:14:14.265604"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:14.268275"], ["updated_at", "2019-06-10 08:14:14.268275"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 30], ["subject_type", "UserOnly"], ["subject_id", 31], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "a54506a62ed3b3eee1f06337dc1a1031"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:14.270389"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:14.279204"], ["updated_at", "2019-06-10 08:14:14.279204"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 32], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "a54506a62ed3b3eee1f06337dc1a1031"], ["action", "create"], ["created_at", "2019-06-10 08:14:14.281594"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", "2019-06-10 08:14:14.285688"], ["updated_at", "2019-06-10 08:14:14.285688"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserWithCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 6], ["created_at", "2019-06-10 08:14:14.296083"], ["updated_at", "2019-06-10 08:14:14.296083"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserWithCompany"], ["subject_id", 33], ["parent_type", "Company"], ["parent_id", 6], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,6]}"], ["request_uuid", "a54506a62ed3b3eee1f06337dc1a1031"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:14.298729"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:14.303591"], ["updated_at", "2019-06-10 08:14:14.303591"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["name", "test1"], ["updated_at", "2019-06-10 08:14:14.305522"], ["id", 34]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:14:42.996730"], ["updated_at", "2019-06-10 08:14:42.996730"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:14:43.015945"], ["updated_at", "2019-06-10 08:14:43.015945"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "3c7d691f9507d40b2af5aba67ac822f6"], ["action", "users#create"], ["created_at", "2019-06-10 08:14:43.030986"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 19ms (Views: 0.1ms | ActiveRecord: 2.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:14:43.043771"], ["updated_at", "2019-06-10 08:14:43.043771"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:14:43.048195"], ["updated_at", "2019-06-10 08:14:43.048195"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "9af7f4fa459cec287d22b4604f7f614d"], ["action", "register"], ["created_at", "2019-06-10 08:14:43.050034"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:14:43.057216"], ["updated_at", "2019-06-10 08:14:43.057216"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 08:14:43.084740"], ["updated_at", "2019-06-10 08:14:43.084740"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 08:14:43.086228"], ["updated_at", "2019-06-10 08:14:43.086228"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 08:14:43.087449"], ["updated_at", "2019-06-10 08:14:43.087449"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 08:14:43.088552"], ["updated_at", "2019-06-10 08:14:43.088552"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "f3eb4da8df0e7f85550fa997fdb79a16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:43.090490"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "f3eb4da8df0e7f85550fa997fdb79a16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:43.092075"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "f3eb4da8df0e7f85550fa997fdb79a16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:43.093764"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "f3eb4da8df0e7f85550fa997fdb79a16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:43.098997"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 37ms (Views: 0.1ms | ActiveRecord: 5.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:14:43.107604"], ["updated_at", "2019-06-10 08:14:43.107604"]]
  [1m[35m (5.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 08:14:43.121137"], ["updated_at", "2019-06-10 08:14:43.121137"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", "2019-06-10 08:14:43.122290"], ["updated_at", "2019-06-10 08:14:43.122290"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", "2019-06-10 08:14:43.123368"], ["updated_at", "2019-06-10 08:14:43.123368"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", "2019-06-10 08:14:43.124311"], ["updated_at", "2019-06-10 08:14:43.124311"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"10\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"11\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"10\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"11\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["request_uuid", "6ceb3485a84dbbce7422aa58f181c975"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:43.126534"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 3.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:14:43.149634"], ["updated_at", "2019-06-10 08:14:43.149634"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 08:14:43.157768"], ["updated_at", "2019-06-10 08:14:43.157768"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", "2019-06-10 08:14:43.159227"], ["updated_at", "2019-06-10 08:14:43.159227"]]
  [1m[36mUserWithAll Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", "2019-06-10 08:14:43.160658"], ["updated_at", "2019-06-10 08:14:43.160658"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", "2019-06-10 08:14:43.163384"], ["updated_at", "2019-06-10 08:14:43.163384"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "{\"users\":{\"14\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"15\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"14\":{\"name\":\"User1\",\"company_name\":null},\"15\":{\"name\":\"User2\",\"company_name\":null},\"16\":{\"name\":\"User3\",\"company_name\":null}}}"], ["request_uuid", "62e8c2728d4363c4dededa60ca5f519a"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:43.166698"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 2.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:14:43.176201"], ["updated_at", "2019-06-10 08:14:43.176201"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "something"], ["created_at", "2019-06-10 08:14:43.178988"], ["updated_at", "2019-06-10 08:14:43.178988"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#update as HTML
  Parameters: {"company"=>{"name"=>"something else"}, "id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.2ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["name", "something else"], ["updated_at", "2019-06-10 08:14:43.185330"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.2ms)[0m  [1m[33mUPDATE "companies" SET "description" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["description", "Something third"], ["updated_at", "2019-06-10 08:14:43.187474"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"name\":[\"something\",\"something else\"],\"description\":[null,\"Something third\"]}"], ["request_uuid", "11534d49c03bdf80249039f5877ed11f"], ["action", "companies#update"], ["created_at", "2019-06-10 08:14:43.190724"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 2.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:14:43.206608"], ["updated_at", "2019-06-10 08:14:43.206608"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 08:14:43.238149"], ["updated_at", "2019-06-10 08:14:43.238149"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 5], ["created_at", "2019-06-10 08:14:43.239680"], ["updated_at", "2019-06-10 08:14:43.239680"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 5], ["created_at", "2019-06-10 08:14:43.240978"], ["updated_at", "2019-06-10 08:14:43.240978"]]
  [1m[36mCompanyInfo Create (0.6ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 5], ["created_at", "2019-06-10 08:14:43.242506"], ["updated_at", "2019-06-10 08:14:43.242506"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "72bbde1e59d7a1c257e6ec4b3e2b53fb"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:43.246377"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "72bbde1e59d7a1c257e6ec4b3e2b53fb"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:43.250041"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 36ms (Views: 0.1ms | ActiveRecord: 6.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", "2019-06-10 08:14:43.256157"], ["updated_at", "2019-06-10 08:14:43.256157"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 21], ["request_uuid", "72bbde1e59d7a1c257e6ec4b3e2b53fb"], ["created_at", "2019-06-10 08:14:43.258463"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:43.287290"], ["updated_at", "2019-06-10 08:14:43.287290"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:43.290940"], ["updated_at", "2019-06-10 08:14:43.290940"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "72bbde1e59d7a1c257e6ec4b3e2b53fb"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:43.292552"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:43.297246"], ["updated_at", "2019-06-10 08:14:43.297246"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", "2019-06-10 08:14:43.299282"], ["id", 24]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[\"test\",\"test1\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "72bbde1e59d7a1c257e6ec4b3e2b53fb"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:43.300811"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:43.318862"], ["updated_at", "2019-06-10 08:14:43.318862"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 25]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 25], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "72bbde1e59d7a1c257e6ec4b3e2b53fb"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:43.323794"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:43.330167"], ["updated_at", "2019-06-10 08:14:43.330167"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 26], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "72bbde1e59d7a1c257e6ec4b3e2b53fb"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:43.333213"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaTrue Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:43.344487"], ["updated_at", "2019-06-10 08:14:43.344487"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaTrue"], ["subject_id", 27], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "72bbde1e59d7a1c257e6ec4b3e2b53fb"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:43.346821"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaSymbol Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:43.358277"], ["updated_at", "2019-06-10 08:14:43.358277"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaSymbol"], ["subject_id", 28], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "72bbde1e59d7a1c257e6ec4b3e2b53fb"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:43.360871"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaProc Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:43.373205"], ["updated_at", "2019-06-10 08:14:43.373205"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaProc"], ["subject_id", 29], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "72bbde1e59d7a1c257e6ec4b3e2b53fb"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:43.375339"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:43.380768"], ["updated_at", "2019-06-10 08:14:43.380768"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:43.384282"], ["updated_at", "2019-06-10 08:14:43.384282"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 30], ["subject_type", "UserOnly"], ["subject_id", 31], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "72bbde1e59d7a1c257e6ec4b3e2b53fb"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:43.385857"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:43.396140"], ["updated_at", "2019-06-10 08:14:43.396140"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 32], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "72bbde1e59d7a1c257e6ec4b3e2b53fb"], ["action", "create"], ["created_at", "2019-06-10 08:14:43.401316"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", "2019-06-10 08:14:43.413879"], ["updated_at", "2019-06-10 08:14:43.413879"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserWithCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 6], ["created_at", "2019-06-10 08:14:43.421213"], ["updated_at", "2019-06-10 08:14:43.421213"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserWithCompany"], ["subject_id", 33], ["parent_type", "Company"], ["parent_id", 6], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,6]}"], ["request_uuid", "72bbde1e59d7a1c257e6ec4b3e2b53fb"], ["action", "companies#create"], ["created_at", "2019-06-10 08:14:43.423462"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:14:43.430816"], ["updated_at", "2019-06-10 08:14:43.430816"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["name", "test1"], ["updated_at", "2019-06-10 08:14:43.433902"], ["id", 34]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:15:04.504227"], ["updated_at", "2019-06-10 08:15:04.504227"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:15:04.519169"], ["updated_at", "2019-06-10 08:15:04.519169"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "5f37e22ce164ea31a773ff69bbc71ea1"], ["action", "users#create"], ["created_at", "2019-06-10 08:15:04.533728"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 2.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:15:04.546494"], ["updated_at", "2019-06-10 08:15:04.546494"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:15:04.550230"], ["updated_at", "2019-06-10 08:15:04.550230"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "f5bb211361871ee569f68b9cd9e68b3e"], ["action", "register"], ["created_at", "2019-06-10 08:15:04.552388"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:15:04.559791"], ["updated_at", "2019-06-10 08:15:04.559791"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 08:15:04.586888"], ["updated_at", "2019-06-10 08:15:04.586888"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 08:15:04.588347"], ["updated_at", "2019-06-10 08:15:04.588347"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 08:15:04.589532"], ["updated_at", "2019-06-10 08:15:04.589532"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 08:15:04.590659"], ["updated_at", "2019-06-10 08:15:04.590659"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "4328640e90ad1f3efd96fd0657ffc9b4"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:04.592611"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "4328640e90ad1f3efd96fd0657ffc9b4"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:04.594860"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "4328640e90ad1f3efd96fd0657ffc9b4"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:04.596611"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "4328640e90ad1f3efd96fd0657ffc9b4"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:04.601160"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 37ms (Views: 0.1ms | ActiveRecord: 5.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:15:04.609372"], ["updated_at", "2019-06-10 08:15:04.609372"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 08:15:04.616913"], ["updated_at", "2019-06-10 08:15:04.616913"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", "2019-06-10 08:15:04.617984"], ["updated_at", "2019-06-10 08:15:04.617984"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", "2019-06-10 08:15:04.619003"], ["updated_at", "2019-06-10 08:15:04.619003"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", "2019-06-10 08:15:04.619976"], ["updated_at", "2019-06-10 08:15:04.619976"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"10\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"11\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"10\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"11\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["request_uuid", "38acec3f4f7adf0874c0d47dd220fb59"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:04.622641"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 1.7ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:15:04.634287"], ["updated_at", "2019-06-10 08:15:04.634287"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 08:15:04.641135"], ["updated_at", "2019-06-10 08:15:04.641135"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", "2019-06-10 08:15:04.642978"], ["updated_at", "2019-06-10 08:15:04.642978"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", "2019-06-10 08:15:04.644672"], ["updated_at", "2019-06-10 08:15:04.644672"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", "2019-06-10 08:15:04.646365"], ["updated_at", "2019-06-10 08:15:04.646365"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "{\"users\":{\"14\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"15\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"14\":{\"name\":\"User1\",\"company_name\":null},\"15\":{\"name\":\"User2\",\"company_name\":null},\"16\":{\"name\":\"User3\",\"company_name\":null}}}"], ["request_uuid", "0b01a6f9e4b74c96becd5321f54ead76"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:04.650110"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 2.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:15:04.660859"], ["updated_at", "2019-06-10 08:15:04.660859"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "something"], ["created_at", "2019-06-10 08:15:04.663958"], ["updated_at", "2019-06-10 08:15:04.663958"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#update as HTML
  Parameters: {"company"=>{"name"=>"something else"}, "id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.3ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["name", "something else"], ["updated_at", "2019-06-10 08:15:04.670502"], ["id", 4]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.3ms)[0m  [1m[33mUPDATE "companies" SET "description" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["description", "Something third"], ["updated_at", "2019-06-10 08:15:04.673116"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"name\":[\"something\",\"something else\"],\"description\":[null,\"Something third\"]}"], ["request_uuid", "e3b3651ec9d2b88d63f6147df95b805b"], ["action", "companies#update"], ["created_at", "2019-06-10 08:15:04.678346"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 2.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:15:04.691134"], ["updated_at", "2019-06-10 08:15:04.691134"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 08:15:04.718603"], ["updated_at", "2019-06-10 08:15:04.718603"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 5], ["created_at", "2019-06-10 08:15:04.719673"], ["updated_at", "2019-06-10 08:15:04.719673"]]
  [1m[36mUserWithAll Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 5], ["created_at", "2019-06-10 08:15:04.721389"], ["updated_at", "2019-06-10 08:15:04.721389"]]
  [1m[36mCompanyInfo Create (2.2ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 5], ["created_at", "2019-06-10 08:15:04.723640"], ["updated_at", "2019-06-10 08:15:04.723640"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "061ca152b9359c5b7f95c3cd4ddeec23"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:04.732461"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "061ca152b9359c5b7f95c3cd4ddeec23"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:04.736557"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 39ms (Views: 0.2ms | ActiveRecord: 9.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", "2019-06-10 08:15:04.743297"], ["updated_at", "2019-06-10 08:15:04.743297"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 21], ["request_uuid", "061ca152b9359c5b7f95c3cd4ddeec23"], ["created_at", "2019-06-10 08:15:04.746524"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:15:04.766205"], ["updated_at", "2019-06-10 08:15:04.766205"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:15:04.770078"], ["updated_at", "2019-06-10 08:15:04.770078"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "061ca152b9359c5b7f95c3cd4ddeec23"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:04.772004"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:15:04.777713"], ["updated_at", "2019-06-10 08:15:04.777713"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", "2019-06-10 08:15:04.782154"], ["id", 24]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[\"test\",\"test1\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "061ca152b9359c5b7f95c3cd4ddeec23"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:04.783905"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (6.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (5.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:15:30.240935"], ["updated_at", "2019-06-10 08:15:30.240935"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:15:30.254006"], ["updated_at", "2019-06-10 08:15:30.254006"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "48e990cb11d06d7ae0493b2100678b64"], ["action", "users#create"], ["created_at", "2019-06-10 08:15:30.268345"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 2.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:15:30.281326"], ["updated_at", "2019-06-10 08:15:30.281326"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:15:30.284768"], ["updated_at", "2019-06-10 08:15:30.284768"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "47586c2a8f51288a35467815ad2d9e58"], ["action", "register"], ["created_at", "2019-06-10 08:15:30.286621"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:15:30.294448"], ["updated_at", "2019-06-10 08:15:30.294448"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 08:15:30.321905"], ["updated_at", "2019-06-10 08:15:30.321905"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 08:15:30.323369"], ["updated_at", "2019-06-10 08:15:30.323369"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 08:15:30.324347"], ["updated_at", "2019-06-10 08:15:30.324347"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 08:15:30.325182"], ["updated_at", "2019-06-10 08:15:30.325182"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "ced9414351511dbf061b8bc6e006cbad"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:30.327091"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "ced9414351511dbf061b8bc6e006cbad"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:30.330195"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "ced9414351511dbf061b8bc6e006cbad"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:30.333609"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "ced9414351511dbf061b8bc6e006cbad"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:30.338484"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 39ms (Views: 0.1ms | ActiveRecord: 5.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:15:30.346010"], ["updated_at", "2019-06-10 08:15:30.346010"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 08:15:30.352227"], ["updated_at", "2019-06-10 08:15:30.352227"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", "2019-06-10 08:15:30.353413"], ["updated_at", "2019-06-10 08:15:30.353413"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", "2019-06-10 08:15:30.354591"], ["updated_at", "2019-06-10 08:15:30.354591"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", "2019-06-10 08:15:30.355827"], ["updated_at", "2019-06-10 08:15:30.355827"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"10\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"11\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"10\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"11\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["request_uuid", "a1105a35c7dc03efd6261fbe9441a4cc"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:30.358764"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 1.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:15:30.370242"], ["updated_at", "2019-06-10 08:15:30.370242"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.9ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 08:15:30.379270"], ["updated_at", "2019-06-10 08:15:30.379270"]]
  [1m[36mUserWithAll Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", "2019-06-10 08:15:30.382084"], ["updated_at", "2019-06-10 08:15:30.382084"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", "2019-06-10 08:15:30.384477"], ["updated_at", "2019-06-10 08:15:30.384477"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", "2019-06-10 08:15:30.385885"], ["updated_at", "2019-06-10 08:15:30.385885"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "{\"users\":{\"14\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"15\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"14\":{\"name\":\"User1\",\"company_name\":null},\"15\":{\"name\":\"User2\",\"company_name\":null},\"16\":{\"name\":\"User3\",\"company_name\":null}}}"], ["request_uuid", "d84fb0a1a2d92f4f27d2c93b65833136"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:30.388734"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 16ms (Views: 0.1ms | ActiveRecord: 3.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:15:30.398541"], ["updated_at", "2019-06-10 08:15:30.398541"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "something"], ["created_at", "2019-06-10 08:15:30.400526"], ["updated_at", "2019-06-10 08:15:30.400526"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#update as HTML
  Parameters: {"company"=>{"name"=>"something else"}, "id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.5ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["name", "something else"], ["updated_at", "2019-06-10 08:15:30.407850"], ["id", 4]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (1.2ms)[0m  [1m[33mUPDATE "companies" SET "description" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["description", "Something third"], ["updated_at", "2019-06-10 08:15:30.412263"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"name\":[\"something\",\"something else\"],\"description\":[null,\"Something third\"]}"], ["request_uuid", "7815a9f8b4bbc11502830f96ccfb0055"], ["action", "companies#update"], ["created_at", "2019-06-10 08:15:30.418410"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 16ms (Views: 0.1ms | ActiveRecord: 3.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:15:30.430082"], ["updated_at", "2019-06-10 08:15:30.430082"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 08:15:30.456736"], ["updated_at", "2019-06-10 08:15:30.456736"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 5], ["created_at", "2019-06-10 08:15:30.458333"], ["updated_at", "2019-06-10 08:15:30.458333"]]
  [1m[36mUserWithAll Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 5], ["created_at", "2019-06-10 08:15:30.459691"], ["updated_at", "2019-06-10 08:15:30.459691"]]
  [1m[36mCompanyInfo Create (0.9ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 5], ["created_at", "2019-06-10 08:15:30.461218"], ["updated_at", "2019-06-10 08:15:30.461218"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "4ed6ca976569f7d4aa4be19a03a39849"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:30.465680"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "4ed6ca976569f7d4aa4be19a03a39849"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:30.469139"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 36ms (Views: 0.1ms | ActiveRecord: 7.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", "2019-06-10 08:15:30.474692"], ["updated_at", "2019-06-10 08:15:30.474692"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 21], ["request_uuid", "4ed6ca976569f7d4aa4be19a03a39849"], ["created_at", "2019-06-10 08:15:30.477018"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:15:30.498910"], ["updated_at", "2019-06-10 08:15:30.498910"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:15:30.505350"], ["updated_at", "2019-06-10 08:15:30.505350"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (3.1ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "4ed6ca976569f7d4aa4be19a03a39849"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:30.510803"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:15:30.519285"], ["updated_at", "2019-06-10 08:15:30.519285"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", "2019-06-10 08:15:30.522193"], ["id", 24]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[\"test\",\"test1\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "4ed6ca976569f7d4aa4be19a03a39849"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:30.524150"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:15:32.476252"], ["updated_at", "2019-06-10 08:15:32.476252"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 25]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 25], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "4ed6ca976569f7d4aa4be19a03a39849"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:32.486611"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:15:32.498388"], ["updated_at", "2019-06-10 08:15:32.498388"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 26], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "4ed6ca976569f7d4aa4be19a03a39849"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:32.503260"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaTrue Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:15:32.526988"], ["updated_at", "2019-06-10 08:15:32.526988"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaTrue"], ["subject_id", 27], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "4ed6ca976569f7d4aa4be19a03a39849"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:32.531236"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaSymbol Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:15:32.545821"], ["updated_at", "2019-06-10 08:15:32.545821"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaSymbol"], ["subject_id", 28], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "4ed6ca976569f7d4aa4be19a03a39849"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:32.549139"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaProc Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:15:32.561086"], ["updated_at", "2019-06-10 08:15:32.561086"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaProc"], ["subject_id", 29], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "4ed6ca976569f7d4aa4be19a03a39849"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:32.563707"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:15:32.571447"], ["updated_at", "2019-06-10 08:15:32.571447"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:15:32.574344"], ["updated_at", "2019-06-10 08:15:32.574344"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 30], ["subject_type", "UserOnly"], ["subject_id", 31], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "4ed6ca976569f7d4aa4be19a03a39849"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:32.576858"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:15:32.583874"], ["updated_at", "2019-06-10 08:15:32.583874"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 32], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "4ed6ca976569f7d4aa4be19a03a39849"], ["action", "create"], ["created_at", "2019-06-10 08:15:32.587249"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", "2019-06-10 08:15:32.592463"], ["updated_at", "2019-06-10 08:15:32.592463"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserWithCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 6], ["created_at", "2019-06-10 08:15:32.603923"], ["updated_at", "2019-06-10 08:15:32.603923"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserWithCompany"], ["subject_id", 33], ["parent_type", "Company"], ["parent_id", 6], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,6]}"], ["request_uuid", "4ed6ca976569f7d4aa4be19a03a39849"], ["action", "companies#create"], ["created_at", "2019-06-10 08:15:32.607117"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:15:32.615990"], ["updated_at", "2019-06-10 08:15:32.615990"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["name", "test1"], ["updated_at", "2019-06-10 08:15:32.618616"], ["id", 34]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:16:36.354955"], ["updated_at", "2019-06-10 08:16:36.354955"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", "2019-06-10 08:16:36.365182"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 1], ["record_changes", "{\"email\":[\"test\",\"test1\"]}"], ["request_uuid", "0a86cde5-1f19-47d3-88ef-96e79a1ee333"], ["created_at", "2019-06-10 08:17:05.408249"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:18.895840"], ["updated_at", "2019-06-10 08:17:18.895840"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (1.7ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", "2019-06-10 08:17:18.906528"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.9ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 1], ["record_changes", "{\"email\":[\"test\",\"test1\"]}"], ["request_uuid", "56382403-cdea-4dae-9cec-0e392fc1fecb"], ["created_at", "2019-06-10 08:17:18.933242"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:28.607571"], ["updated_at", "2019-06-10 08:17:28.607571"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:28.627022"], ["updated_at", "2019-06-10 08:17:28.627022"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "b7c78ca9-ee0a-4ca1-ab95-a1b8239cff16"], ["created_at", "2019-06-10 08:17:28.643890"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:28.650636"], ["updated_at", "2019-06-10 08:17:28.650636"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", "2019-06-10 08:17:28.652518"], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 3], ["record_changes", "{\"email\":[\"test\",\"test1\"]}"], ["request_uuid", "62d6f91d-0a64-4e6f-b2a6-e9abf21f5d37"], ["created_at", "2019-06-10 08:17:28.654129"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:28.658134"], ["updated_at", "2019-06-10 08:17:28.658134"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "d15349d3-2725-4f7c-a229-0371507ff51e"], ["created_at", "2019-06-10 08:17:28.661887"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:28.668116"], ["updated_at", "2019-06-10 08:17:28.668116"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 5], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "e4f63e58-eecf-411b-ad85-497f716ffd85"], ["created_at", "2019-06-10 08:17:28.669987"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaTrue Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:28.681070"], ["updated_at", "2019-06-10 08:17:28.681070"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.1ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 6], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "6b425d1d-07b2-46c6-b7e1-f587746ae6ac"], ["created_at", "2019-06-10 08:17:28.683617"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaSymbol Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:28.696630"], ["updated_at", "2019-06-10 08:17:28.696630"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 7], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "253637ca-319b-4219-84da-18105d6f2487"], ["created_at", "2019-06-10 08:17:28.699699"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaProc Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:28.717624"], ["updated_at", "2019-06-10 08:17:28.717624"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 8], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "37e46069-50c5-4b8a-9916-24dfbffa7704"], ["created_at", "2019-06-10 08:17:28.719876"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:28.725624"], ["updated_at", "2019-06-10 08:17:28.725624"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:28.727715"], ["updated_at", "2019-06-10 08:17:28.727715"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserOnly"], ["subject_id", 10], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "fbb89406-af3f-4077-9bb6-4ec8ec127f59"], ["created_at", "2019-06-10 08:17:28.729359"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:28.741880"], ["updated_at", "2019-06-10 08:17:28.741880"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 11], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "5e41fda2-3c0e-4f42-984a-c7c33e84ae52"], ["action", "create"], ["created_at", "2019-06-10 08:17:28.743717"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.6ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", "2019-06-10 08:17:28.756394"], ["updated_at", "2019-06-10 08:17:28.756394"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserWithCompany Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", "2019-06-10 08:17:28.764925"], ["updated_at", "2019-06-10 08:17:28.764925"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,1]}"], ["request_uuid", "b891b325-ab4f-41e4-a374-cb160fa205a3"], ["created_at", "2019-06-10 08:17:28.767432"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:28.778431"], ["updated_at", "2019-06-10 08:17:28.778431"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["name", "test1"], ["updated_at", "2019-06-10 08:17:28.780427"], ["id", 13]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:33.649363"], ["updated_at", "2019-06-10 08:17:33.649363"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:33.663140"], ["updated_at", "2019-06-10 08:17:33.663140"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "6d0ea7e3-2c2c-452d-a109-67984c296940"], ["created_at", "2019-06-10 08:17:33.679336"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:33.685431"], ["updated_at", "2019-06-10 08:17:33.685431"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", "2019-06-10 08:17:33.688144"], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 3], ["record_changes", "{\"email\":[\"test\",\"test1\"]}"], ["request_uuid", "8c442df4-e58a-45f2-bf9b-71e5e3aaed6b"], ["created_at", "2019-06-10 08:17:33.690238"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:33.694811"], ["updated_at", "2019-06-10 08:17:33.694811"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "acd183d4-2008-4756-a6a3-2e0ea47c0058"], ["created_at", "2019-06-10 08:17:33.697886"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:33.702164"], ["updated_at", "2019-06-10 08:17:33.702164"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 5], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "2ae74040-a18f-4439-9219-f4b163de86e2"], ["created_at", "2019-06-10 08:17:33.706652"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaTrue Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:33.718459"], ["updated_at", "2019-06-10 08:17:33.718459"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 6], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "973fb561-637d-4919-9609-4632ef9c3dcd"], ["created_at", "2019-06-10 08:17:33.721673"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaSymbol Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:33.732249"], ["updated_at", "2019-06-10 08:17:33.732249"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 7], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "bbffe07f-9d7a-4ac4-99aa-e12e4faf048a"], ["created_at", "2019-06-10 08:17:33.734236"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaProc Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:33.750532"], ["updated_at", "2019-06-10 08:17:33.750532"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 8], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "7146c9be-b506-45a3-bd88-d4dbac4f51c5"], ["created_at", "2019-06-10 08:17:33.753768"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:33.763606"], ["updated_at", "2019-06-10 08:17:33.763606"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:33.765785"], ["updated_at", "2019-06-10 08:17:33.765785"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserOnly"], ["subject_id", 10], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "1c633286-8aba-4f71-8c11-e37aef6b4a17"], ["created_at", "2019-06-10 08:17:33.767408"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:33.779028"], ["updated_at", "2019-06-10 08:17:33.779028"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 11], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "f147e6a3-cb35-41a1-9f7b-ed6c12aded8e"], ["action", "create"], ["created_at", "2019-06-10 08:17:33.780819"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", "2019-06-10 08:17:33.796893"], ["updated_at", "2019-06-10 08:17:33.796893"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserWithCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", "2019-06-10 08:17:33.808522"], ["updated_at", "2019-06-10 08:17:33.808522"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,1]}"], ["request_uuid", "d998f9b3-d0ff-44e9-94d6-5e5ded39e1ce"], ["created_at", "2019-06-10 08:17:33.812019"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:33.818892"], ["updated_at", "2019-06-10 08:17:33.818892"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["name", "test1"], ["updated_at", "2019-06-10 08:17:33.821947"], ["id", 13]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (8.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (7.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:17:39.546268"], ["updated_at", "2019-06-10 08:17:39.546268"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:17:39.562262"], ["updated_at", "2019-06-10 08:17:39.562262"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "200965ea1f85e7fa651b4b1835808c8c"], ["action", "users#create"], ["created_at", "2019-06-10 08:17:39.576516"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 2.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:17:39.590099"], ["updated_at", "2019-06-10 08:17:39.590099"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:17:39.595163"], ["updated_at", "2019-06-10 08:17:39.595163"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "1df26006c15e8e30eb9aeec7c6f1f571"], ["action", "register"], ["created_at", "2019-06-10 08:17:39.597213"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:17:39.603408"], ["updated_at", "2019-06-10 08:17:39.603408"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 08:17:39.632037"], ["updated_at", "2019-06-10 08:17:39.632037"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 08:17:39.633475"], ["updated_at", "2019-06-10 08:17:39.633475"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 08:17:39.634514"], ["updated_at", "2019-06-10 08:17:39.634514"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 08:17:39.635523"], ["updated_at", "2019-06-10 08:17:39.635523"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "1cf5dad7de25dd0234ef4b719bbc41b6"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:39.637845"]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "1cf5dad7de25dd0234ef4b719bbc41b6"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:39.643148"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "1cf5dad7de25dd0234ef4b719bbc41b6"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:39.646073"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "1cf5dad7de25dd0234ef4b719bbc41b6"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:39.651688"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 44ms (Views: 0.1ms | ActiveRecord: 12.0ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:17:39.662175"], ["updated_at", "2019-06-10 08:17:39.662175"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 08:17:39.667565"], ["updated_at", "2019-06-10 08:17:39.667565"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", "2019-06-10 08:17:39.668558"], ["updated_at", "2019-06-10 08:17:39.668558"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", "2019-06-10 08:17:39.669567"], ["updated_at", "2019-06-10 08:17:39.669567"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", "2019-06-10 08:17:39.670418"], ["updated_at", "2019-06-10 08:17:39.670418"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"10\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"11\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"10\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"11\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["request_uuid", "54b95876420e3444ff0cb87a59e7905f"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:39.672905"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:17:39.682575"], ["updated_at", "2019-06-10 08:17:39.682575"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 08:17:39.687877"], ["updated_at", "2019-06-10 08:17:39.687877"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", "2019-06-10 08:17:39.688743"], ["updated_at", "2019-06-10 08:17:39.688743"]]
  [1m[36mUserWithAll Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", "2019-06-10 08:17:39.690693"], ["updated_at", "2019-06-10 08:17:39.690693"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", "2019-06-10 08:17:39.694897"], ["updated_at", "2019-06-10 08:17:39.694897"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "{\"users\":{\"14\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"15\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"14\":{\"name\":\"User1\",\"company_name\":null},\"15\":{\"name\":\"User2\",\"company_name\":null},\"16\":{\"name\":\"User3\",\"company_name\":null}}}"], ["request_uuid", "2a32a9028b3fe6dedf497db615aac9d3"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:39.697860"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 15ms (Views: 0.1ms | ActiveRecord: 3.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:17:39.711088"], ["updated_at", "2019-06-10 08:17:39.711088"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "something"], ["created_at", "2019-06-10 08:17:39.716175"], ["updated_at", "2019-06-10 08:17:39.716175"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#update as HTML
  Parameters: {"company"=>{"name"=>"something else"}, "id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.3ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["name", "something else"], ["updated_at", "2019-06-10 08:17:39.724470"], ["id", 4]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.3ms)[0m  [1m[33mUPDATE "companies" SET "description" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["description", "Something third"], ["updated_at", "2019-06-10 08:17:39.727759"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"name\":[\"something\",\"something else\"],\"description\":[null,\"Something third\"]}"], ["request_uuid", "abc7f8633dece650c7c7f50698db6d75"], ["action", "companies#update"], ["created_at", "2019-06-10 08:17:39.730717"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 2.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:17:39.746861"], ["updated_at", "2019-06-10 08:17:39.746861"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 08:17:39.777446"], ["updated_at", "2019-06-10 08:17:39.777446"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 5], ["created_at", "2019-06-10 08:17:39.779277"], ["updated_at", "2019-06-10 08:17:39.779277"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 5], ["created_at", "2019-06-10 08:17:39.780980"], ["updated_at", "2019-06-10 08:17:39.780980"]]
  [1m[36mCompanyInfo Create (0.9ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 5], ["created_at", "2019-06-10 08:17:39.782774"], ["updated_at", "2019-06-10 08:17:39.782774"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "82892415bdc8df74c21e8736da407e16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:39.786852"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "82892415bdc8df74c21e8736da407e16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:39.790105"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 39ms (Views: 0.1ms | ActiveRecord: 8.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", "2019-06-10 08:17:39.795757"], ["updated_at", "2019-06-10 08:17:39.795757"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 21], ["request_uuid", "82892415bdc8df74c21e8736da407e16"], ["created_at", "2019-06-10 08:17:39.797908"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:39.817174"], ["updated_at", "2019-06-10 08:17:39.817174"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:39.821162"], ["updated_at", "2019-06-10 08:17:39.821162"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "82892415bdc8df74c21e8736da407e16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:39.823651"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:39.832445"], ["updated_at", "2019-06-10 08:17:39.832445"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", "2019-06-10 08:17:39.834745"], ["id", 24]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[\"test\",\"test1\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "82892415bdc8df74c21e8736da407e16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:39.836438"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:39.853363"], ["updated_at", "2019-06-10 08:17:39.853363"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 25]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 25], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "82892415bdc8df74c21e8736da407e16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:39.857453"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:39.865351"], ["updated_at", "2019-06-10 08:17:39.865351"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 26], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "82892415bdc8df74c21e8736da407e16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:39.867311"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaTrue Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:39.879821"], ["updated_at", "2019-06-10 08:17:39.879821"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaTrue"], ["subject_id", 27], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "82892415bdc8df74c21e8736da407e16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:39.882451"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaSymbol Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:39.896020"], ["updated_at", "2019-06-10 08:17:39.896020"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaSymbol"], ["subject_id", 28], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "82892415bdc8df74c21e8736da407e16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:39.899175"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaProc Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:39.916654"], ["updated_at", "2019-06-10 08:17:39.916654"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaProc"], ["subject_id", 29], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "82892415bdc8df74c21e8736da407e16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:39.918947"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:39.924120"], ["updated_at", "2019-06-10 08:17:39.924120"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:39.926664"], ["updated_at", "2019-06-10 08:17:39.926664"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 30], ["subject_type", "UserOnly"], ["subject_id", 31], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "82892415bdc8df74c21e8736da407e16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:39.928381"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:39.933541"], ["updated_at", "2019-06-10 08:17:39.933541"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 32], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "82892415bdc8df74c21e8736da407e16"], ["action", "create"], ["created_at", "2019-06-10 08:17:39.935112"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.9ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", "2019-06-10 08:17:39.938757"], ["updated_at", "2019-06-10 08:17:39.938757"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserWithCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 6], ["created_at", "2019-06-10 08:17:39.950520"], ["updated_at", "2019-06-10 08:17:39.950520"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserWithCompany"], ["subject_id", 33], ["parent_type", "Company"], ["parent_id", 6], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,6]}"], ["request_uuid", "82892415bdc8df74c21e8736da407e16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:39.952392"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:39.957935"], ["updated_at", "2019-06-10 08:17:39.957935"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["name", "test1"], ["updated_at", "2019-06-10 08:17:39.961503"], ["id", 34]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:17:49.789620"], ["updated_at", "2019-06-10 08:17:49.789620"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:17:49.802700"], ["updated_at", "2019-06-10 08:17:49.802700"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "f8d354241b07d817407904068e8dd38d"], ["action", "users#create"], ["created_at", "2019-06-10 08:17:49.818625"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 19ms (Views: 0.1ms | ActiveRecord: 2.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:17:49.831788"], ["updated_at", "2019-06-10 08:17:49.831788"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:17:49.835756"], ["updated_at", "2019-06-10 08:17:49.835756"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "18fb66b3daa866b3a878b6c05fcf0892"], ["action", "register"], ["created_at", "2019-06-10 08:17:49.837620"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:17:49.845305"], ["updated_at", "2019-06-10 08:17:49.845305"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 08:17:49.872658"], ["updated_at", "2019-06-10 08:17:49.872658"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 08:17:49.874125"], ["updated_at", "2019-06-10 08:17:49.874125"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 08:17:49.875117"], ["updated_at", "2019-06-10 08:17:49.875117"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 08:17:49.875962"], ["updated_at", "2019-06-10 08:17:49.875962"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "88e7a29b7c5ef968b630dd1643a6c71b"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:49.877856"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "88e7a29b7c5ef968b630dd1643a6c71b"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:49.879398"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "88e7a29b7c5ef968b630dd1643a6c71b"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:49.881333"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "88e7a29b7c5ef968b630dd1643a6c71b"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:49.886460"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 37ms (Views: 0.1ms | ActiveRecord: 5.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:17:49.893574"], ["updated_at", "2019-06-10 08:17:49.893574"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 08:17:49.899534"], ["updated_at", "2019-06-10 08:17:49.899534"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", "2019-06-10 08:17:49.900539"], ["updated_at", "2019-06-10 08:17:49.900539"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", "2019-06-10 08:17:49.901461"], ["updated_at", "2019-06-10 08:17:49.901461"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", "2019-06-10 08:17:49.902324"], ["updated_at", "2019-06-10 08:17:49.902324"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"10\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"11\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"10\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"11\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["request_uuid", "63c4bbc2667502e7806832726a5833db"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:49.904435"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:17:49.918644"], ["updated_at", "2019-06-10 08:17:49.918644"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 08:17:49.925142"], ["updated_at", "2019-06-10 08:17:49.925142"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", "2019-06-10 08:17:49.926199"], ["updated_at", "2019-06-10 08:17:49.926199"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", "2019-06-10 08:17:49.927887"], ["updated_at", "2019-06-10 08:17:49.927887"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", "2019-06-10 08:17:49.929354"], ["updated_at", "2019-06-10 08:17:49.929354"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "{\"users\":{\"14\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"15\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"14\":{\"name\":\"User1\",\"company_name\":null},\"15\":{\"name\":\"User2\",\"company_name\":null},\"16\":{\"name\":\"User3\",\"company_name\":null}}}"], ["request_uuid", "4cf2c9755a5448280aaa953c44abcd34"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:49.932806"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 2.8ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:17:49.944602"], ["updated_at", "2019-06-10 08:17:49.944602"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "something"], ["created_at", "2019-06-10 08:17:49.946724"], ["updated_at", "2019-06-10 08:17:49.946724"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#update as HTML
  Parameters: {"company"=>{"name"=>"something else"}, "id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.3ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["name", "something else"], ["updated_at", "2019-06-10 08:17:49.953671"], ["id", 4]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.3ms)[0m  [1m[33mUPDATE "companies" SET "description" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["description", "Something third"], ["updated_at", "2019-06-10 08:17:49.956468"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"name\":[\"something\",\"something else\"],\"description\":[null,\"Something third\"]}"], ["request_uuid", "9fcc6614ff7597e9d7adc73b7617a737"], ["action", "companies#update"], ["created_at", "2019-06-10 08:17:49.959962"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 2.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:17:49.974276"], ["updated_at", "2019-06-10 08:17:49.974276"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 08:17:49.999859"], ["updated_at", "2019-06-10 08:17:49.999859"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 5], ["created_at", "2019-06-10 08:17:50.001444"], ["updated_at", "2019-06-10 08:17:50.001444"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 5], ["created_at", "2019-06-10 08:17:50.002857"], ["updated_at", "2019-06-10 08:17:50.002857"]]
  [1m[36mCompanyInfo Create (0.7ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 5], ["created_at", "2019-06-10 08:17:50.004418"], ["updated_at", "2019-06-10 08:17:50.004418"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "0e9ca2932fcdd99d2bc2453439cb2d65"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:50.008723"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "0e9ca2932fcdd99d2bc2453439cb2d65"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:50.012591"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 35ms (Views: 0.1ms | ActiveRecord: 6.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", "2019-06-10 08:17:50.020238"], ["updated_at", "2019-06-10 08:17:50.020238"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 21], ["request_uuid", "0e9ca2932fcdd99d2bc2453439cb2d65"], ["created_at", "2019-06-10 08:17:50.022735"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:50.046706"], ["updated_at", "2019-06-10 08:17:50.046706"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:17:50.053895"], ["updated_at", "2019-06-10 08:17:50.053895"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "0e9ca2932fcdd99d2bc2453439cb2d65"], ["action", "companies#create"], ["created_at", "2019-06-10 08:17:50.055975"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:18:42.148368"], ["updated_at", "2019-06-10 08:18:42.148368"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:18:42.171274"], ["updated_at", "2019-06-10 08:18:42.171274"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "d9bc0c6aa1c68f78b4d4eb36da09834e"], ["action", "users#create"], ["created_at", "2019-06-10 08:18:42.189137"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 24ms (Views: 0.2ms | ActiveRecord: 3.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:18:42.201503"], ["updated_at", "2019-06-10 08:18:42.201503"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:18:42.205581"], ["updated_at", "2019-06-10 08:18:42.205581"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "ac85913ecaf9296102a7ae6d795bccdf"], ["action", "register"], ["created_at", "2019-06-10 08:18:42.208305"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:18:42.215847"], ["updated_at", "2019-06-10 08:18:42.215847"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 08:18:42.244470"], ["updated_at", "2019-06-10 08:18:42.244470"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 08:18:42.245929"], ["updated_at", "2019-06-10 08:18:42.245929"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 08:18:42.246916"], ["updated_at", "2019-06-10 08:18:42.246916"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 08:18:42.247755"], ["updated_at", "2019-06-10 08:18:42.247755"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "6881472d8f7a137a9a89c686736370c5"], ["action", "companies#create"], ["created_at", "2019-06-10 08:18:42.249724"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "6881472d8f7a137a9a89c686736370c5"], ["action", "companies#create"], ["created_at", "2019-06-10 08:18:42.251670"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "6881472d8f7a137a9a89c686736370c5"], ["action", "companies#create"], ["created_at", "2019-06-10 08:18:42.256135"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "6881472d8f7a137a9a89c686736370c5"], ["action", "companies#create"], ["created_at", "2019-06-10 08:18:42.261005"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 43ms (Views: 0.1ms | ActiveRecord: 7.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:18:42.275528"], ["updated_at", "2019-06-10 08:18:42.275528"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (2.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 08:18:42.289947"], ["updated_at", "2019-06-10 08:18:42.289947"]]
  [1m[36mUserWithAll Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", "2019-06-10 08:18:42.293074"], ["updated_at", "2019-06-10 08:18:42.293074"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", "2019-06-10 08:18:42.295835"], ["updated_at", "2019-06-10 08:18:42.295835"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", "2019-06-10 08:18:42.297499"], ["updated_at", "2019-06-10 08:18:42.297499"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"10\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"11\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"10\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"11\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["request_uuid", "dc2c1a3345218d5aaa86916c97a04f82"], ["action", "companies#create"], ["created_at", "2019-06-10 08:18:42.300029"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 5.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:18:42.308692"], ["updated_at", "2019-06-10 08:18:42.308692"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 08:18:42.315069"], ["updated_at", "2019-06-10 08:18:42.315069"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", "2019-06-10 08:18:42.316008"], ["updated_at", "2019-06-10 08:18:42.316008"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", "2019-06-10 08:18:42.317175"], ["updated_at", "2019-06-10 08:18:42.317175"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", "2019-06-10 08:18:42.318287"], ["updated_at", "2019-06-10 08:18:42.318287"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "{\"users\":{\"14\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"15\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"14\":{\"name\":\"User1\",\"company_name\":null},\"15\":{\"name\":\"User2\",\"company_name\":null},\"16\":{\"name\":\"User3\",\"company_name\":null}}}"], ["request_uuid", "db9d0a6010df171e85f478863dfe0b13"], ["action", "companies#create"], ["created_at", "2019-06-10 08:18:42.323910"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 1.0ms | ActiveRecord: 2.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:18:42.334126"], ["updated_at", "2019-06-10 08:18:42.334126"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "something"], ["created_at", "2019-06-10 08:18:42.337616"], ["updated_at", "2019-06-10 08:18:42.337616"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#update as HTML
  Parameters: {"company"=>{"name"=>"something else"}, "id"=>"4"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.3ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["name", "something else"], ["updated_at", "2019-06-10 08:18:42.345244"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.2ms)[0m  [1m[33mUPDATE "companies" SET "description" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["description", "Something third"], ["updated_at", "2019-06-10 08:18:42.348082"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"name\":[\"something\",\"something else\"],\"description\":[null,\"Something third\"]}"], ["request_uuid", "ec6f26febcef14b3c9d645761e38ec6e"], ["action", "companies#update"], ["created_at", "2019-06-10 08:18:42.350953"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 2.1ms)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:18:42.364474"], ["updated_at", "2019-06-10 08:18:42.364474"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 08:18:42.389629"], ["updated_at", "2019-06-10 08:18:42.389629"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 5], ["created_at", "2019-06-10 08:18:42.391030"], ["updated_at", "2019-06-10 08:18:42.391030"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 5], ["created_at", "2019-06-10 08:18:42.392556"], ["updated_at", "2019-06-10 08:18:42.392556"]]
  [1m[36mCompanyInfo Create (0.7ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 5], ["created_at", "2019-06-10 08:18:42.394297"], ["updated_at", "2019-06-10 08:18:42.394297"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"19\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"20\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"19\":{\"name\":\"User1\",\"company_name\":null},\"20\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "c5319d25edb35d35794313f5c52d7d62"], ["action", "companies#create"], ["created_at", "2019-06-10 08:18:42.398102"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "c5319d25edb35d35794313f5c52d7d62"], ["action", "companies#create"], ["created_at", "2019-06-10 08:18:42.400933"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 33ms (Views: 0.1ms | ActiveRecord: 6.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", "2019-06-10 08:18:42.412520"], ["updated_at", "2019-06-10 08:18:42.412520"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 21], ["request_uuid", "c5319d25edb35d35794313f5c52d7d62"], ["created_at", "2019-06-10 08:18:42.417398"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:18:42.441363"], ["updated_at", "2019-06-10 08:18:42.441363"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:18:42.445198"], ["updated_at", "2019-06-10 08:18:42.445198"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "c5319d25edb35d35794313f5c52d7d62"], ["action", "companies#create"], ["created_at", "2019-06-10 08:18:42.447024"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:18:42.451277"], ["updated_at", "2019-06-10 08:18:42.451277"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", "2019-06-10 08:18:42.454208"], ["id", 24]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[\"test\",\"test1\"]}"], ["request_uuid", "c5319d25edb35d35794313f5c52d7d62"], ["action", "companies#create"], ["created_at", "2019-06-10 08:18:42.456127"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:18:42.461351"], ["updated_at", "2019-06-10 08:18:42.461351"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 25]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "User"], ["subject_id", 25], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "c5319d25edb35d35794313f5c52d7d62"], ["action", "companies#create"], ["created_at", "2019-06-10 08:18:42.465020"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:18:42.470639"], ["updated_at", "2019-06-10 08:18:42.470639"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 26], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "c5319d25edb35d35794313f5c52d7d62"], ["action", "companies#create"], ["created_at", "2019-06-10 08:18:42.474278"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaTrue Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:18:42.484434"], ["updated_at", "2019-06-10 08:18:42.484434"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaTrue"], ["subject_id", 27], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "c5319d25edb35d35794313f5c52d7d62"], ["action", "companies#create"], ["created_at", "2019-06-10 08:18:42.487624"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaSymbol Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:18:42.499963"], ["updated_at", "2019-06-10 08:18:42.499963"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaSymbol"], ["subject_id", 28], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "c5319d25edb35d35794313f5c52d7d62"], ["action", "companies#create"], ["created_at", "2019-06-10 08:18:42.501842"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaProc Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:18:42.516199"], ["updated_at", "2019-06-10 08:18:42.516199"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserMetaProc"], ["subject_id", 29], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "c5319d25edb35d35794313f5c52d7d62"], ["action", "companies#create"], ["created_at", "2019-06-10 08:18:42.518350"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:18:42.526714"], ["updated_at", "2019-06-10 08:18:42.526714"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:18:42.530221"], ["updated_at", "2019-06-10 08:18:42.530221"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (2.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 30], ["subject_type", "UserOnly"], ["subject_id", 31], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "c5319d25edb35d35794313f5c52d7d62"], ["action", "companies#create"], ["created_at", "2019-06-10 08:18:42.533138"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:18:42.546898"], ["updated_at", "2019-06-10 08:18:42.546898"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 32], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "c5319d25edb35d35794313f5c52d7d62"], ["action", "create"], ["created_at", "2019-06-10 08:18:42.548516"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.6ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", "2019-06-10 08:18:42.553059"], ["updated_at", "2019-06-10 08:18:42.553059"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserWithCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 6], ["created_at", "2019-06-10 08:18:42.563866"], ["updated_at", "2019-06-10 08:18:42.563866"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserWithCompany"], ["subject_id", 33], ["parent_type", "Company"], ["parent_id", 6], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,6]}"], ["request_uuid", "c5319d25edb35d35794313f5c52d7d62"], ["action", "companies#create"], ["created_at", "2019-06-10 08:18:42.565717"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:18:42.572799"], ["updated_at", "2019-06-10 08:18:42.572799"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["name", "test1"], ["updated_at", "2019-06-10 08:18:42.576068"], ["id", 34]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "core_users"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "core_users" ("id" bigserial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_types"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "user_types" ("id" bigserial primary key, "core_user_id" bigint, "user_type" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_core_user_id" ON "user_types"  ("core_user_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_user_type_and_user_id" ON "user_types"  ("user_type", "user_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "administrators"[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "administrators" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (4.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "core_users"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "core_users" ("id" bigserial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_types"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "user_types" ("id" bigserial primary key, "core_user_id" bigint, "user_type" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_core_user_id" ON "user_types"  ("core_user_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_user_type_and_user_id" ON "user_types"  ("user_type", "user_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "administrators"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "administrators" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (8.6ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (2.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:33:11.971272"], ["updated_at", "2019-06-10 08:33:11.971272"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "core_users"[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "core_users" ("id" bigserial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_types"[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE "user_types" ("id" bigserial primary key, "core_user_id" bigint, "user_type" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_core_user_id" ON "user_types"  ("core_user_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_user_type_and_user_id" ON "user_types"  ("user_type", "user_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "administrators"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "administrators" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:33:29.361317"], ["updated_at", "2019-06-10 08:33:29.361317"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:33:29.375913"], ["updated_at", "2019-06-10 08:33:29.375913"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "56279cd7b5c0f0ac683eb4c291442be9"], ["action", "users#register"], ["created_at", "2019-06-10 08:33:57.710664"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 28339ms (Views: 0.1ms | ActiveRecord: 3.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (8.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "core_users"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "core_users" ("id" bigserial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_types"[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "user_types" ("id" bigserial primary key, "core_user_id" bigint, "user_type" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_core_user_id" ON "user_types"  ("core_user_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_user_type_and_user_id" ON "user_types"  ("user_type", "user_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "administrators"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "administrators" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:34:01.852005"], ["updated_at", "2019-06-10 08:34:01.852005"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:34:01.865447"], ["updated_at", "2019-06-10 08:34:01.865447"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.1ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "1c2a42ade0ef2925c35a0550e6683dbb"], ["action", "users#register"], ["created_at", "2019-06-10 08:34:07.515893"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5656ms (Views: 0.1ms | ActiveRecord: 5.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "core_users"[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "core_users" ("id" bigserial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_types"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "user_types" ("id" bigserial primary key, "core_user_id" bigint, "user_type" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_core_user_id" ON "user_types"  ("core_user_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_user_type_and_user_id" ON "user_types"  ("user_type", "user_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "administrators"[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "administrators" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:34:12.745390"], ["updated_at", "2019-06-10 08:34:12.745390"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create_core_user as HTML
  Parameters: {"user"=>{"email"=>"Email_admin", "name"=>"admin"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameter: :email
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (12.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (15.1ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (5.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "core_users"[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "core_users" ("id" bigserial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_types"[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "user_types" ("id" bigserial primary key, "core_user_id" bigint, "user_type" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_core_user_id" ON "user_types"  ("core_user_id")[0m
  [1m[35m (20.7ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_user_type_and_user_id" ON "user_types"  ("user_type", "user_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "administrators"[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "administrators" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:34:40.378348"], ["updated_at", "2019-06-10 08:34:40.378348"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create_core_user as HTML
  Parameters: {"user"=>{"email"=>"Email_admin", "name"=>"admin"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameter: :email
Completed 500 Internal Server Error in 15ms (ActiveRecord: 2.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (9.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "core_users"[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "core_users" ("id" bigserial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_types"[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "user_types" ("id" bigserial primary key, "core_user_id" bigint, "user_type" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_core_user_id" ON "user_types"  ("core_user_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_user_type_and_user_id" ON "user_types"  ("user_type", "user_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "administrators"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "administrators" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:35:19.042346"], ["updated_at", "2019-06-10 08:35:19.042346"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create_core_user as HTML
  Parameters: {"user"=>{"email"=>"Email_admin", "name"=>"admin"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameter: :email
Completed 500 Internal Server Error in 20ms (ActiveRecord: 4.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "core_users"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "core_users" ("id" bigserial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_types"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "user_types" ("id" bigserial primary key, "core_user_id" bigint, "user_type" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_core_user_id" ON "user_types"  ("core_user_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_user_type_and_user_id" ON "user_types"  ("user_type", "user_id")[0m
  [1m[35m (3.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "administrators"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "administrators" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:35:46.745845"], ["updated_at", "2019-06-10 08:35:46.745845"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create_core_user as HTML
  Parameters: {"user"=>{"email"=>"Email_admin", "name"=>"admin"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameter: :email
Completed 500 Internal Server Error in 31ms (ActiveRecord: 4.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "core_users"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "core_users" ("id" bigserial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (6.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_types"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "user_types" ("id" bigserial primary key, "core_user_id" bigint, "user_type" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_core_user_id" ON "user_types"  ("core_user_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_user_type_and_user_id" ON "user_types"  ("user_type", "user_id")[0m
  [1m[35m (4.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "administrators"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "administrators" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:36:06.562463"], ["updated_at", "2019-06-10 08:36:06.562463"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create_core_user as HTML
  Parameters: {"user"=>{"email"=>"Email_admin", "name"=>"admin"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameter: :email
Unpermitted parameter: :name
Completed 500 Internal Server Error in 39ms (ActiveRecord: 7.5ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "core_users"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "core_users" ("id" bigserial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_types"[0m
  [1m[35m (8.5ms)[0m  [1m[35mCREATE TABLE "user_types" ("id" bigserial primary key, "core_user_id" bigint, "user_type" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_core_user_id" ON "user_types"  ("core_user_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_user_type_and_user_id" ON "user_types"  ("user_type", "user_id")[0m
  [1m[35m (8.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "administrators"[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "administrators" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (11.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:36:32.174593"], ["updated_at", "2019-06-10 08:36:32.174593"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create_core_user as HTML
  Parameters: {"user"=>{"email"=>"Email_admin", "name"=>"admin"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameter: :email
Unpermitted parameter: :name
Completed 500 Internal Server Error in 34ms (ActiveRecord: 6.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "core_users"[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "core_users" ("id" bigserial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_types"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "user_types" ("id" bigserial primary key, "core_user_id" bigint, "user_type" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_core_user_id" ON "user_types"  ("core_user_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_user_type_and_user_id" ON "user_types"  ("user_type", "user_id")[0m
  [1m[35m (4.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "administrators"[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "administrators" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:37:10.682652"], ["updated_at", "2019-06-10 08:37:10.682652"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create_core_user as HTML
  Parameters: {"user"=>{"email"=>"Email_admin", "name"=>"admin"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameter: :email
Unpermitted parameter: :name
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAdministrator Create (0.9ms)[0m  [1m[32mINSERT INTO "administrators" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "admin"], ["created_at", "2019-06-10 08:37:10.725914"], ["updated_at", "2019-06-10 08:37:10.725914"]]
  [1m[36mCoreUser Create (0.9ms)[0m  [1m[32mINSERT INTO "core_users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "Email_admin"], ["created_at", "2019-06-10 08:37:10.727839"], ["updated_at", "2019-06-10 08:37:10.727839"]]
  [1m[36mUserType Create (1.4ms)[0m  [1m[32mINSERT INTO "user_types" ("core_user_id", "user_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["core_user_id", 1], ["user_type", "Administrator"], ["user_id", 1], ["created_at", "2019-06-10 08:37:10.729836"], ["updated_at", "2019-06-10 08:37:10.729836"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "CoreUser"], ["subject_id", 1], ["record_changes", "{\"email\":[null,\"Email_admin\"]}"], ["request_uuid", "7bd2dd87bff93069a7f2068884ae3c60"], ["action", "users#create_core_user"], ["created_at", "2019-06-10 08:37:16.596732"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Administrator"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"admin\"]}"], ["request_uuid", "7bd2dd87bff93069a7f2068884ae3c60"], ["action", "users#create_core_user"], ["created_at", "2019-06-10 08:37:16.601656"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5913ms (Views: 0.2ms | ActiveRecord: 17.6ms)
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "core_users"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "core_users" ("id" bigserial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_types"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "user_types" ("id" bigserial primary key, "core_user_id" bigint, "user_type" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_core_user_id" ON "user_types"  ("core_user_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_user_type_and_user_id" ON "user_types"  ("user_type", "user_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "administrators"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "administrators" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:37:39.612526"], ["updated_at", "2019-06-10 08:37:39.612526"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create_core_user as HTML
  Parameters: {"user"=>{"email"=>"Email_admin", "name"=>"admin"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameter: :email
Unpermitted parameter: :name
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAdministrator Create (0.6ms)[0m  [1m[32mINSERT INTO "administrators" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "admin"], ["created_at", "2019-06-10 08:37:39.658951"], ["updated_at", "2019-06-10 08:37:39.658951"]]
  [1m[36mCoreUser Create (0.6ms)[0m  [1m[32mINSERT INTO "core_users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "Email_admin"], ["created_at", "2019-06-10 08:37:39.661053"], ["updated_at", "2019-06-10 08:37:39.661053"]]
  [1m[36mUserType Create (0.9ms)[0m  [1m[32mINSERT INTO "user_types" ("core_user_id", "user_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["core_user_id", 1], ["user_type", "Administrator"], ["user_id", 1], ["created_at", "2019-06-10 08:37:39.662592"], ["updated_at", "2019-06-10 08:37:39.662592"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 62410ms (Views: 0.1ms | ActiveRecord: 9.6ms)
  [1m[35m (3.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "core_users"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "core_users" ("id" bigserial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_types"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "user_types" ("id" bigserial primary key, "core_user_id" bigint, "user_type" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_core_user_id" ON "user_types"  ("core_user_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_user_type_and_user_id" ON "user_types"  ("user_type", "user_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "administrators"[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "administrators" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:38:45.738398"], ["updated_at", "2019-06-10 08:38:45.738398"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create_core_user as HTML
  Parameters: {"user"=>{"email"=>"Email_admin", "name"=>"admin"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameter: :email
Unpermitted parameter: :name
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAdministrator Create (0.4ms)[0m  [1m[32mINSERT INTO "administrators" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "admin"], ["created_at", "2019-06-10 08:38:45.787775"], ["updated_at", "2019-06-10 08:38:45.787775"]]
  [1m[36mCoreUser Create (0.4ms)[0m  [1m[32mINSERT INTO "core_users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "Email_admin"], ["created_at", "2019-06-10 08:38:45.789084"], ["updated_at", "2019-06-10 08:38:45.789084"]]
  [1m[36mUserType Create (0.6ms)[0m  [1m[32mINSERT INTO "user_types" ("core_user_id", "user_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["core_user_id", 1], ["user_type", "Administrator"], ["user_id", 1], ["created_at", "2019-06-10 08:38:45.790236"], ["updated_at", "2019-06-10 08:38:45.790236"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "core_users"[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "core_users" ("id" bigserial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_types"[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "user_types" ("id" bigserial primary key, "core_user_id" bigint, "user_type" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_core_user_id" ON "user_types"  ("core_user_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_user_type_and_user_id" ON "user_types"  ("user_type", "user_id")[0m
  [1m[35m (3.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "administrators"[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "administrators" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:39:13.407584"], ["updated_at", "2019-06-10 08:39:13.407584"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create_core_user as HTML
  Parameters: {"user"=>{"email"=>"Email_admin", "name"=>"admin"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameter: :email
Unpermitted parameter: :name
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAdministrator Create (0.4ms)[0m  [1m[32mINSERT INTO "administrators" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "admin"], ["created_at", "2019-06-10 08:39:13.450048"], ["updated_at", "2019-06-10 08:39:13.450048"]]
  [1m[36mCoreUser Create (0.6ms)[0m  [1m[32mINSERT INTO "core_users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "Email_admin"], ["created_at", "2019-06-10 08:39:13.451426"], ["updated_at", "2019-06-10 08:39:13.451426"]]
  [1m[36mUserType Create (0.8ms)[0m  [1m[32mINSERT INTO "user_types" ("core_user_id", "user_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["core_user_id", 1], ["user_type", "Administrator"], ["user_id", 1], ["created_at", "2019-06-10 08:39:13.453133"], ["updated_at", "2019-06-10 08:39:13.453133"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (2.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "CoreUser"], ["subject_id", 1], ["record_changes", "{\"email\":[null,\"Email_admin\"]}"], ["request_uuid", "f43a6b1242753aa76bd090b60024eae8"], ["action", "users#create_core_user"], ["created_at", "2019-06-10 08:39:18.880194"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Administrator"], ["subject_id", 1], ["parent_type", "CoreUser"], ["parent_id", 1], ["record_changes", "{\"name\":[null,\"admin\"]}"], ["request_uuid", "f43a6b1242753aa76bd090b60024eae8"], ["action", "users#create_core_user"], ["created_at", "2019-06-10 08:39:18.892350"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5474ms (Views: 0.1ms | ActiveRecord: 13.5ms)
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "core_users"[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "core_users" ("id" bigserial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_types"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "user_types" ("id" bigserial primary key, "core_user_id" bigint, "user_type" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_core_user_id" ON "user_types"  ("core_user_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_user_type_and_user_id" ON "user_types"  ("user_type", "user_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "administrators"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "administrators" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:40:01.644438"], ["updated_at", "2019-06-10 08:40:01.644438"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create_core_user as HTML
  Parameters: {"user"=>{"email"=>"Email_admin", "name"=>"admin"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameter: :email
Unpermitted parameter: :name
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAdministrator Create (0.7ms)[0m  [1m[32mINSERT INTO "administrators" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "admin"], ["created_at", "2019-06-10 08:40:01.686542"], ["updated_at", "2019-06-10 08:40:01.686542"]]
  [1m[36mCoreUser Create (0.5ms)[0m  [1m[32mINSERT INTO "core_users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "Email_admin"], ["created_at", "2019-06-10 08:40:01.688329"], ["updated_at", "2019-06-10 08:40:01.688329"]]
  [1m[36mUserType Create (0.7ms)[0m  [1m[32mINSERT INTO "user_types" ("core_user_id", "user_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["core_user_id", 1], ["user_type", "Administrator"], ["user_id", 1], ["created_at", "2019-06-10 08:40:01.689748"], ["updated_at", "2019-06-10 08:40:01.689748"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 50982ms (Views: 0.1ms | ActiveRecord: 8.0ms)
  [1m[35m (4.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "core_users"[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "core_users" ("id" bigserial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_types"[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "user_types" ("id" bigserial primary key, "core_user_id" bigint, "user_type" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_core_user_id" ON "user_types"  ("core_user_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_user_type_and_user_id" ON "user_types"  ("user_type", "user_id")[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "administrators"[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "administrators" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:40:56.223698"], ["updated_at", "2019-06-10 08:40:56.223698"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create_core_user as HTML
  Parameters: {"user"=>{"email"=>"Email_admin", "name"=>"admin"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameter: :email
Unpermitted parameter: :name
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAdministrator Create (0.6ms)[0m  [1m[32mINSERT INTO "administrators" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "admin"], ["created_at", "2019-06-10 08:40:56.273159"], ["updated_at", "2019-06-10 08:40:56.273159"]]
  [1m[36mCoreUser Create (0.4ms)[0m  [1m[32mINSERT INTO "core_users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "Email_admin"], ["created_at", "2019-06-10 08:40:56.274744"], ["updated_at", "2019-06-10 08:40:56.274744"]]
  [1m[36mUserType Create (0.6ms)[0m  [1m[32mINSERT INTO "user_types" ("core_user_id", "user_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["core_user_id", 1], ["user_type", "Administrator"], ["user_id", 1], ["created_at", "2019-06-10 08:40:56.275862"], ["updated_at", "2019-06-10 08:40:56.275862"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "CoreUser"], ["subject_id", 1], ["record_changes", "{\"email\":[null,\"Email_admin\"],\"administrators\":{\"1\":{\"name\":[null,\"admin\"]}}}"], ["meta", "{\"administrators\":{\"1\":{}}}"], ["request_uuid", "7ae4b739bf8d3d4bcdd969cab6412982"], ["action", "users#create_core_user"], ["created_at", "2019-06-10 08:40:59.399891"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3162ms (Views: 0.2ms | ActiveRecord: 12.5ms)
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (7.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "core_users"[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "core_users" ("id" bigserial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_types"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "user_types" ("id" bigserial primary key, "core_user_id" bigint, "user_type" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_core_user_id" ON "user_types"  ("core_user_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_user_type_and_user_id" ON "user_types"  ("user_type", "user_id")[0m
  [1m[35m (3.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "administrators"[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "administrators" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:42:24.815487"], ["updated_at", "2019-06-10 08:42:24.815487"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create_core_user as HTML
  Parameters: {"user"=>{"email"=>"Email_admin", "name"=>"admin"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameter: :email
Unpermitted parameter: :name
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAdministrator Create (13.0ms)[0m  [1m[32mINSERT INTO "administrators" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "admin"], ["created_at", "2019-06-10 08:42:24.856051"], ["updated_at", "2019-06-10 08:42:24.856051"]]
  [1m[36mCoreUser Create (1.0ms)[0m  [1m[32mINSERT INTO "core_users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "Email_admin"], ["created_at", "2019-06-10 08:42:24.870279"], ["updated_at", "2019-06-10 08:42:24.870279"]]
  [1m[36mUserType Create (0.7ms)[0m  [1m[32mINSERT INTO "user_types" ("core_user_id", "user_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["core_user_id", 1], ["user_type", "Administrator"], ["user_id", 1], ["created_at", "2019-06-10 08:42:24.872283"], ["updated_at", "2019-06-10 08:42:24.872283"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "CoreUser"], ["subject_id", 1], ["record_changes", "{\"email\":[null,\"Email_admin\"],\"administrators\":{\"1\":{\"name\":[null,\"admin\"]}}}"], ["meta", "{\"administrators\":{\"1\":{}}}"], ["request_uuid", "60463dfbc10bfb9de89cf742e9cf22e4"], ["action", "users#create_core_user"], ["created_at", "2019-06-10 08:42:25.881810"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1057ms (Views: 0.1ms | ActiveRecord: 23.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "core_users"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "core_users" ("id" bigserial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_types"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "user_types" ("id" bigserial primary key, "core_user_id" bigint, "user_type" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_core_user_id" ON "user_types"  ("core_user_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_user_type_and_user_id" ON "user_types"  ("user_type", "user_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "administrators"[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "administrators" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:42:47.935741"], ["updated_at", "2019-06-10 08:42:47.935741"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create_core_user as HTML
  Parameters: {"user"=>{"email"=>"Email_admin", "name"=>"admin"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameter: :email
Unpermitted parameter: :name
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAdministrator Create (0.6ms)[0m  [1m[32mINSERT INTO "administrators" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "admin"], ["created_at", "2019-06-10 08:42:47.976072"], ["updated_at", "2019-06-10 08:42:47.976072"]]
  [1m[36mCoreUser Create (0.4ms)[0m  [1m[32mINSERT INTO "core_users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "Email_admin"], ["created_at", "2019-06-10 08:42:47.977791"], ["updated_at", "2019-06-10 08:42:47.977791"]]
  [1m[36mUserType Create (0.6ms)[0m  [1m[32mINSERT INTO "user_types" ("core_user_id", "user_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["core_user_id", 1], ["user_type", "Administrator"], ["user_id", 1], ["created_at", "2019-06-10 08:42:47.979014"], ["updated_at", "2019-06-10 08:42:47.979014"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "CoreUser"], ["subject_id", 1], ["record_changes", "{\"email\":[null,\"Email_admin\"],\"administrators\":{\"1\":{\"name\":[null,\"admin\"]}}}"], ["meta", "{\"administrators\":{\"1\":{}}}"], ["request_uuid", "a2ce586b077c4616b7fc5695fd053c60"], ["action", "users#create_core_user"], ["created_at", "2019-06-10 08:42:49.374350"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1432ms (Views: 0.1ms | ActiveRecord: 11.3ms)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (3.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (9.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "core_users"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "core_users" ("id" bigserial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_types"[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "user_types" ("id" bigserial primary key, "core_user_id" bigint, "user_type" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_core_user_id" ON "user_types"  ("core_user_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_user_type_and_user_id" ON "user_types"  ("user_type", "user_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "administrators"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "administrators" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:43:46.861260"], ["updated_at", "2019-06-10 08:43:46.861260"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create_core_user as HTML
  Parameters: {"user"=>{"email"=>"Email_admin", "name"=>"admin"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameter: :email
Unpermitted parameter: :name
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAdministrator Create (0.5ms)[0m  [1m[32mINSERT INTO "administrators" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "admin"], ["created_at", "2019-06-10 08:43:46.910101"], ["updated_at", "2019-06-10 08:43:46.910101"]]
  [1m[36mCoreUser Create (0.5ms)[0m  [1m[32mINSERT INTO "core_users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "Email_admin"], ["created_at", "2019-06-10 08:43:46.911869"], ["updated_at", "2019-06-10 08:43:46.911869"]]
  [1m[36mUserType Create (0.6ms)[0m  [1m[32mINSERT INTO "user_types" ("core_user_id", "user_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["core_user_id", 1], ["user_type", "Administrator"], ["user_id", 1], ["created_at", "2019-06-10 08:43:46.913194"], ["updated_at", "2019-06-10 08:43:46.913194"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "CoreUser"], ["subject_id", 1], ["record_changes", "{\"email\":[null,\"Email_admin\"],\"administrators\":{\"1\":{\"name\":[null,\"admin\"]}}}"], ["meta", "{\"administrators\":{\"1\":{}}}"], ["request_uuid", "a57f7a6f54a2222870785966972e3755"], ["action", "users#create_core_user"], ["created_at", "2019-06-10 08:43:49.441323"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 2572ms (Views: 0.2ms | ActiveRecord: 12.7ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "core_users"[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "core_users" ("id" bigserial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_types"[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "user_types" ("id" bigserial primary key, "core_user_id" bigint, "user_type" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_core_user_id" ON "user_types"  ("core_user_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_user_type_and_user_id" ON "user_types"  ("user_type", "user_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "administrators"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "administrators" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:01.291445"], ["updated_at", "2019-06-10 08:44:01.291445"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:44:01.305106"], ["updated_at", "2019-06-10 08:44:01.305106"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "7f0731544a2bb729ac98f52ff0e7fc69"], ["action", "users#create"], ["created_at", "2019-06-10 08:44:01.319290"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 2.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:01.333326"], ["updated_at", "2019-06-10 08:44:01.333326"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:44:01.337010"], ["updated_at", "2019-06-10 08:44:01.337010"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "b347fba65f6526e296f01ff99953eacb"], ["action", "register"], ["created_at", "2019-06-10 08:44:01.338960"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:01.345658"], ["updated_at", "2019-06-10 08:44:01.345658"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create_core_user as HTML
  Parameters: {"user"=>{"email"=>"Email_admin", "name"=>"admin"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
Unpermitted parameter: :email
Unpermitted parameter: :name
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAdministrator Create (0.5ms)[0m  [1m[32mINSERT INTO "administrators" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "admin"], ["created_at", "2019-06-10 08:44:01.372108"], ["updated_at", "2019-06-10 08:44:01.372108"]]
  [1m[36mCoreUser Create (0.6ms)[0m  [1m[32mINSERT INTO "core_users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "Email_admin"], ["created_at", "2019-06-10 08:44:01.373506"], ["updated_at", "2019-06-10 08:44:01.373506"]]
  [1m[36mUserType Create (1.8ms)[0m  [1m[32mINSERT INTO "user_types" ("core_user_id", "user_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["core_user_id", 1], ["user_type", "Administrator"], ["user_id", 1], ["created_at", "2019-06-10 08:44:01.374963"], ["updated_at", "2019-06-10 08:44:01.374963"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "CoreUser"], ["subject_id", 1], ["record_changes", "{\"email\":[null,\"Email_admin\"],\"administrators\":{\"1\":{\"name\":[null,\"admin\"]}}}"], ["meta", "{\"administrators\":{\"1\":{}}}"], ["request_uuid", "078e12f796ba2927f4634d0707f2500f"], ["action", "users#create_core_user"], ["created_at", "2019-06-10 08:44:01.382440"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 35ms (Views: 0.1ms | ActiveRecord: 9.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:01.389612"], ["updated_at", "2019-06-10 08:44:01.389612"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 08:44:01.410538"], ["updated_at", "2019-06-10 08:44:01.410538"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 08:44:01.411975"], ["updated_at", "2019-06-10 08:44:01.411975"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 08:44:01.413244"], ["updated_at", "2019-06-10 08:44:01.413244"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 08:44:01.414639"], ["updated_at", "2019-06-10 08:44:01.414639"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 6], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"7\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]},\"8\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]},\"9\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}}}"], ["meta", "{\"users\":{\"7\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"8\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"9\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["request_uuid", "571970016a15662e49ccc825051f3cd7"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:01.417023"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 26ms (Views: 0.1ms | ActiveRecord: 4.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:01.440442"], ["updated_at", "2019-06-10 08:44:01.440442"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 08:44:01.449332"], ["updated_at", "2019-06-10 08:44:01.449332"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", "2019-06-10 08:44:01.450807"], ["updated_at", "2019-06-10 08:44:01.450807"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", "2019-06-10 08:44:01.452211"], ["updated_at", "2019-06-10 08:44:01.452211"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", "2019-06-10 08:44:01.453057"], ["updated_at", "2019-06-10 08:44:01.453057"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 10], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"11\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"13\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"11\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"13\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["request_uuid", "99b6183681a4f752cab27e503580973e"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:01.456044"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:01.467516"], ["updated_at", "2019-06-10 08:44:01.467516"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 08:44:01.476096"], ["updated_at", "2019-06-10 08:44:01.476096"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", "2019-06-10 08:44:01.476984"], ["updated_at", "2019-06-10 08:44:01.476984"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", "2019-06-10 08:44:01.478454"], ["updated_at", "2019-06-10 08:44:01.478454"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", "2019-06-10 08:44:01.480176"], ["updated_at", "2019-06-10 08:44:01.480176"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 14], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "{\"users\":{\"15\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"17\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"15\":{\"name\":\"User1\",\"company_name\":null},\"16\":{\"name\":\"User2\",\"company_name\":null},\"17\":{\"name\":\"User3\",\"company_name\":null}}}"], ["request_uuid", "9bd58f9abe395d2f223f88262bba6471"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:01.483888"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 20ms (Views: 0.7ms | ActiveRecord: 2.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:01.505871"], ["updated_at", "2019-06-10 08:44:01.505871"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "something"], ["created_at", "2019-06-10 08:44:01.507409"], ["updated_at", "2019-06-10 08:44:01.507409"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#update as HTML
  Parameters: {"company"=>{"name"=>"something else"}, "id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.2ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["name", "something else"], ["updated_at", "2019-06-10 08:44:01.511711"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.3ms)[0m  [1m[33mUPDATE "companies" SET "description" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["description", "Something third"], ["updated_at", "2019-06-10 08:44:01.513514"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"name\":[\"something\",\"something else\"],\"description\":[null,\"Something third\"]}"], ["request_uuid", "f5c01f3e83e7a6741cff176a75828bad"], ["action", "companies#update"], ["created_at", "2019-06-10 08:44:01.516045"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:01.522089"], ["updated_at", "2019-06-10 08:44:01.522089"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 08:44:01.534260"], ["updated_at", "2019-06-10 08:44:01.534260"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 5], ["created_at", "2019-06-10 08:44:01.535127"], ["updated_at", "2019-06-10 08:44:01.535127"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 5], ["created_at", "2019-06-10 08:44:01.536102"], ["updated_at", "2019-06-10 08:44:01.536102"]]
  [1m[36mCompanyInfo Create (0.7ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 5], ["created_at", "2019-06-10 08:44:01.537124"], ["updated_at", "2019-06-10 08:44:01.537124"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"20\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"21\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"20\":{\"name\":\"User1\",\"company_name\":null},\"21\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "2acac0a211de4fc48b75339b2239bb88"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:01.539748"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "2acac0a211de4fc48b75339b2239bb88"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:01.541703"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 4.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", "2019-06-10 08:44:01.545596"], ["updated_at", "2019-06-10 08:44:01.545596"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 22], ["request_uuid", "2acac0a211de4fc48b75339b2239bb88"], ["created_at", "2019-06-10 08:44:01.547634"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:01.555179"], ["updated_at", "2019-06-10 08:44:01.555179"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:01.558373"], ["updated_at", "2019-06-10 08:44:01.558373"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "2acac0a211de4fc48b75339b2239bb88"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:01.560105"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:01.564002"], ["updated_at", "2019-06-10 08:44:01.564002"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", "2019-06-10 08:44:01.566059"], ["id", 25]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "User"], ["subject_id", 25], ["record_changes", "{\"email\":[\"test\",\"test1\"]}"], ["request_uuid", "2acac0a211de4fc48b75339b2239bb88"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:01.567627"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:01.571689"], ["updated_at", "2019-06-10 08:44:01.571689"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 26]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "User"], ["subject_id", 26], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "2acac0a211de4fc48b75339b2239bb88"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:01.574652"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:01.578427"], ["updated_at", "2019-06-10 08:44:01.578427"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "UserOnly"], ["subject_id", 27], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "2acac0a211de4fc48b75339b2239bb88"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:01.580565"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaTrue Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:01.589474"], ["updated_at", "2019-06-10 08:44:01.589474"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "UserMetaTrue"], ["subject_id", 28], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "2acac0a211de4fc48b75339b2239bb88"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:01.591184"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaSymbol Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:01.599670"], ["updated_at", "2019-06-10 08:44:01.599670"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "UserMetaSymbol"], ["subject_id", 29], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "2acac0a211de4fc48b75339b2239bb88"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:01.601384"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaProc Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:01.609953"], ["updated_at", "2019-06-10 08:44:01.609953"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "UserMetaProc"], ["subject_id", 30], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "2acac0a211de4fc48b75339b2239bb88"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:01.611866"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:01.616008"], ["updated_at", "2019-06-10 08:44:01.616008"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:01.617817"], ["updated_at", "2019-06-10 08:44:01.617817"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 31], ["subject_type", "UserOnly"], ["subject_id", 32], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "2acac0a211de4fc48b75339b2239bb88"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:01.619326"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:01.624602"], ["updated_at", "2019-06-10 08:44:01.624602"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "UserOnly"], ["subject_id", 33], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "2acac0a211de4fc48b75339b2239bb88"], ["action", "create"], ["created_at", "2019-06-10 08:44:01.626368"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", "2019-06-10 08:44:01.630444"], ["updated_at", "2019-06-10 08:44:01.630444"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserWithCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 6], ["created_at", "2019-06-10 08:44:01.637368"], ["updated_at", "2019-06-10 08:44:01.637368"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "UserWithCompany"], ["subject_id", 34], ["parent_type", "Company"], ["parent_id", 6], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,6]}"], ["request_uuid", "2acac0a211de4fc48b75339b2239bb88"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:01.639208"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:01.643425"], ["updated_at", "2019-06-10 08:44:01.643425"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["name", "test1"], ["updated_at", "2019-06-10 08:44:01.645064"], ["id", 35]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "core_users"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "core_users" ("id" bigserial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_types"[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "user_types" ("id" bigserial primary key, "core_user_id" bigint, "user_type" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_core_user_id" ON "user_types"  ("core_user_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_user_type_and_user_id" ON "user_types"  ("user_type", "user_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "administrators"[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "administrators" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:35.003485"], ["updated_at", "2019-06-10 08:44:35.003485"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:44:35.018339"], ["updated_at", "2019-06-10 08:44:35.018339"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "6c7b885b805882eda843596bb3ff64f2"], ["action", "users#create"], ["created_at", "2019-06-10 08:44:35.034919"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 20ms (Views: 0.3ms | ActiveRecord: 3.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:35.048353"], ["updated_at", "2019-06-10 08:44:35.048353"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:44:35.051848"], ["updated_at", "2019-06-10 08:44:35.051848"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "e9c129df7b60a6ff5c447806d3383871"], ["action", "register"], ["created_at", "2019-06-10 08:44:35.053793"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:35.062805"], ["updated_at", "2019-06-10 08:44:35.062805"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create_core_user as HTML
  Parameters: {"user"=>{"email"=>"Email_admin", "name"=>"admin"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
Unpermitted parameter: :email
Unpermitted parameter: :name
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAdministrator Create (0.6ms)[0m  [1m[32mINSERT INTO "administrators" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "admin"], ["created_at", "2019-06-10 08:44:35.104492"], ["updated_at", "2019-06-10 08:44:35.104492"]]
  [1m[36mCoreUser Create (0.5ms)[0m  [1m[32mINSERT INTO "core_users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "Email_admin"], ["created_at", "2019-06-10 08:44:35.106299"], ["updated_at", "2019-06-10 08:44:35.106299"]]
  [1m[36mUserType Create (0.6ms)[0m  [1m[32mINSERT INTO "user_types" ("core_user_id", "user_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["core_user_id", 1], ["user_type", "Administrator"], ["user_id", 1], ["created_at", "2019-06-10 08:44:35.107513"], ["updated_at", "2019-06-10 08:44:35.107513"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "CoreUser"], ["subject_id", 1], ["record_changes", "{\"email\":[null,\"Email_admin\"],\"administrators\":{\"1\":{\"name\":[null,\"admin\"]}}}"], ["meta", "{\"administrators\":{\"1\":{}}}"], ["request_uuid", "82834ecf9847d367503563954b0713f9"], ["action", "users#create_core_user"], ["created_at", "2019-06-10 08:44:35.110076"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 46ms (Views: 0.1ms | ActiveRecord: 12.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:35.118026"], ["updated_at", "2019-06-10 08:44:35.118026"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 08:44:35.143530"], ["updated_at", "2019-06-10 08:44:35.143530"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 08:44:35.145096"], ["updated_at", "2019-06-10 08:44:35.145096"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 08:44:35.146204"], ["updated_at", "2019-06-10 08:44:35.146204"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 08:44:35.147171"], ["updated_at", "2019-06-10 08:44:35.147171"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 6], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "c270e6e63b24afa151222d6c1b8c7487"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:35.149346"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 6], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "c270e6e63b24afa151222d6c1b8c7487"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:35.151834"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 6], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "c270e6e63b24afa151222d6c1b8c7487"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:35.154428"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 6], ["subject_type", "UserWithAll"], ["subject_id", 9], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "c270e6e63b24afa151222d6c1b8c7487"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:35.157567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 38ms (Views: 0.2ms | ActiveRecord: 5.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:35.167920"], ["updated_at", "2019-06-10 08:44:35.167920"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 08:44:35.177635"], ["updated_at", "2019-06-10 08:44:35.177635"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", "2019-06-10 08:44:35.179158"], ["updated_at", "2019-06-10 08:44:35.179158"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", "2019-06-10 08:44:35.180713"], ["updated_at", "2019-06-10 08:44:35.180713"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", "2019-06-10 08:44:35.182280"], ["updated_at", "2019-06-10 08:44:35.182280"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 10], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"11\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"13\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"11\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"13\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["request_uuid", "d2b079ca0b01fb9a347d72bc59bb8e6b"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:35.186516"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 2.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:35.200637"], ["updated_at", "2019-06-10 08:44:35.200637"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 08:44:35.212373"], ["updated_at", "2019-06-10 08:44:35.212373"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", "2019-06-10 08:44:35.214077"], ["updated_at", "2019-06-10 08:44:35.214077"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", "2019-06-10 08:44:35.215533"], ["updated_at", "2019-06-10 08:44:35.215533"]]
  [1m[36mUserWithAll Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", "2019-06-10 08:44:35.217142"], ["updated_at", "2019-06-10 08:44:35.217142"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 14], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "{\"users\":{\"15\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"17\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"15\":{\"name\":\"User1\",\"company_name\":null},\"16\":{\"name\":\"User2\",\"company_name\":null},\"17\":{\"name\":\"User3\",\"company_name\":null}}}"], ["request_uuid", "28ff236d90d9dfa0f13ee00031ac4579"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:35.222995"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 20ms (Views: 0.2ms | ActiveRecord: 4.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:35.238757"], ["updated_at", "2019-06-10 08:44:35.238757"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "something"], ["created_at", "2019-06-10 08:44:35.243033"], ["updated_at", "2019-06-10 08:44:35.243033"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#update as HTML
  Parameters: {"company"=>{"name"=>"something else"}, "id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.2ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["name", "something else"], ["updated_at", "2019-06-10 08:44:35.248517"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.3ms)[0m  [1m[33mUPDATE "companies" SET "description" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["description", "Something third"], ["updated_at", "2019-06-10 08:44:35.250113"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"name\":[\"something\",\"something else\"],\"description\":[null,\"Something third\"]}"], ["request_uuid", "762adafd6ce791102fcb8eff4e0d545d"], ["action", "companies#update"], ["created_at", "2019-06-10 08:44:35.253057"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 2.8ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:35.262479"], ["updated_at", "2019-06-10 08:44:35.262479"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 08:44:35.275614"], ["updated_at", "2019-06-10 08:44:35.275614"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 5], ["created_at", "2019-06-10 08:44:35.276812"], ["updated_at", "2019-06-10 08:44:35.276812"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 5], ["created_at", "2019-06-10 08:44:35.278357"], ["updated_at", "2019-06-10 08:44:35.278357"]]
  [1m[36mCompanyInfo Create (0.6ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 5], ["created_at", "2019-06-10 08:44:35.279473"], ["updated_at", "2019-06-10 08:44:35.279473"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"20\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"21\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"20\":{\"name\":\"User1\",\"company_name\":null},\"21\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "61e07b3a31a6d2238ac21ff944697dff"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:35.281953"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "61e07b3a31a6d2238ac21ff944697dff"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:35.283902"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 20ms (Views: 0.1ms | ActiveRecord: 4.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.9ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", "2019-06-10 08:44:35.290618"], ["updated_at", "2019-06-10 08:44:35.290618"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 22], ["request_uuid", "61e07b3a31a6d2238ac21ff944697dff"], ["created_at", "2019-06-10 08:44:35.292154"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:35.300005"], ["updated_at", "2019-06-10 08:44:35.300005"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:35.303643"], ["updated_at", "2019-06-10 08:44:35.303643"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "61e07b3a31a6d2238ac21ff944697dff"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:35.306220"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:35.310988"], ["updated_at", "2019-06-10 08:44:35.310988"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", "2019-06-10 08:44:35.312971"], ["id", 25]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "User"], ["subject_id", 25], ["record_changes", "{\"email\":[\"test\",\"test1\"]}"], ["request_uuid", "61e07b3a31a6d2238ac21ff944697dff"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:35.314599"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:35.318197"], ["updated_at", "2019-06-10 08:44:35.318197"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 26]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "User"], ["subject_id", 26], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "61e07b3a31a6d2238ac21ff944697dff"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:35.324798"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:35.330338"], ["updated_at", "2019-06-10 08:44:35.330338"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "UserOnly"], ["subject_id", 27], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "61e07b3a31a6d2238ac21ff944697dff"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:35.332468"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaTrue Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:35.347653"], ["updated_at", "2019-06-10 08:44:35.347653"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "UserMetaTrue"], ["subject_id", 28], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "61e07b3a31a6d2238ac21ff944697dff"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:35.350035"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaSymbol Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:35.363475"], ["updated_at", "2019-06-10 08:44:35.363475"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "UserMetaSymbol"], ["subject_id", 29], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "61e07b3a31a6d2238ac21ff944697dff"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:35.365347"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaProc Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:35.378884"], ["updated_at", "2019-06-10 08:44:35.378884"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "UserMetaProc"], ["subject_id", 30], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "61e07b3a31a6d2238ac21ff944697dff"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:35.380683"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:35.384514"], ["updated_at", "2019-06-10 08:44:35.384514"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:35.388253"], ["updated_at", "2019-06-10 08:44:35.388253"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (1.1ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 31], ["subject_type", "UserOnly"], ["subject_id", 32], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "61e07b3a31a6d2238ac21ff944697dff"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:35.391046"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:35.398108"], ["updated_at", "2019-06-10 08:44:35.398108"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "UserOnly"], ["subject_id", 33], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "61e07b3a31a6d2238ac21ff944697dff"], ["action", "create"], ["created_at", "2019-06-10 08:44:35.399785"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.7ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", "2019-06-10 08:44:35.405940"], ["updated_at", "2019-06-10 08:44:35.405940"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserWithCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 6], ["created_at", "2019-06-10 08:44:35.414520"], ["updated_at", "2019-06-10 08:44:35.414520"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "UserWithCompany"], ["subject_id", 34], ["parent_type", "Company"], ["parent_id", 6], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,6]}"], ["request_uuid", "61e07b3a31a6d2238ac21ff944697dff"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:35.416720"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:35.424980"], ["updated_at", "2019-06-10 08:44:35.424980"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["name", "test1"], ["updated_at", "2019-06-10 08:44:35.427366"], ["id", 35]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (3.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_infos"[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" bigserial primary key, "address" character varying, "company_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (4.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "core_users"[0m
  [1m[35m (16.4ms)[0m  [1m[35mCREATE TABLE "core_users" ("id" bigserial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_types"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "user_types" ("id" bigserial primary key, "core_user_id" bigint, "user_type" character varying, "user_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_core_user_id" ON "user_types"  ("core_user_id")[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE  INDEX  "index_user_types_on_user_type_and_user_id" ON "user_types"  ("user_type", "user_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "administrators"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "administrators" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (9.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "records"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" bigserial primary key, "author_type" character varying, "author_id" bigint, "subject_type" character varying, "subject_id" bigint, "parent_type" character varying, "parent_id" bigint, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:40.266043"], ["updated_at", "2019-06-10 08:44:40.266043"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:44:40.283423"], ["updated_at", "2019-06-10 08:44:40.283423"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "0faa07a0ef10c7bb03bfd6552a5fc32d"], ["action", "users#create"], ["created_at", "2019-06-10 08:44:40.299606"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 20ms (Views: 0.2ms | ActiveRecord: 2.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:40.312625"], ["updated_at", "2019-06-10 08:44:40.312625"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", "2019-06-10 08:44:40.316366"], ["updated_at", "2019-06-10 08:44:40.316366"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "2f308107dfcbaa93ae0b62c26fbea8df"], ["action", "register"], ["created_at", "2019-06-10 08:44:40.318290"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:40.325982"], ["updated_at", "2019-06-10 08:44:40.325982"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create_core_user as HTML
  Parameters: {"user"=>{"email"=>"Email_admin", "name"=>"admin"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
Unpermitted parameter: :email
Unpermitted parameter: :name
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAdministrator Create (0.5ms)[0m  [1m[32mINSERT INTO "administrators" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "admin"], ["created_at", "2019-06-10 08:44:40.362564"], ["updated_at", "2019-06-10 08:44:40.362564"]]
  [1m[36mCoreUser Create (0.5ms)[0m  [1m[32mINSERT INTO "core_users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "Email_admin"], ["created_at", "2019-06-10 08:44:40.364044"], ["updated_at", "2019-06-10 08:44:40.364044"]]
  [1m[36mUserType Create (0.7ms)[0m  [1m[32mINSERT INTO "user_types" ("core_user_id", "user_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["core_user_id", 1], ["user_type", "Administrator"], ["user_id", 1], ["created_at", "2019-06-10 08:44:40.365351"], ["updated_at", "2019-06-10 08:44:40.365351"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "CoreUser"], ["subject_id", 1], ["record_changes", "{\"email\":[null,\"Email_admin\"],\"administrators\":{\"1\":{\"name\":[null,\"admin\"]}}}"], ["meta", "{\"administrators\":{\"1\":{}}}"], ["request_uuid", "db8b0cd04ea0f5e4e82701437e16b0b2"], ["action", "users#create_core_user"], ["created_at", "2019-06-10 08:44:40.368029"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 40ms (Views: 0.1ms | ActiveRecord: 10.8ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:40.377407"], ["updated_at", "2019-06-10 08:44:40.377407"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 08:44:40.401364"], ["updated_at", "2019-06-10 08:44:40.401364"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", "2019-06-10 08:44:40.402919"], ["updated_at", "2019-06-10 08:44:40.402919"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", "2019-06-10 08:44:40.404030"], ["updated_at", "2019-06-10 08:44:40.404030"]]
  [1m[36mUserWithAll Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", "2019-06-10 08:44:40.405223"], ["updated_at", "2019-06-10 08:44:40.405223"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 6], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "a3e731c6bf49d85cd8118a69a88ba521"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:40.409783"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 6], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "a3e731c6bf49d85cd8118a69a88ba521"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:40.411884"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 6], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "a3e731c6bf49d85cd8118a69a88ba521"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:40.414968"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 6], ["subject_type", "UserWithAll"], ["subject_id", 9], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "a3e731c6bf49d85cd8118a69a88ba521"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:40.417460"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 38ms (Views: 0.2ms | ActiveRecord: 6.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:40.428247"], ["updated_at", "2019-06-10 08:44:40.428247"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", "2019-06-10 08:44:40.436009"], ["updated_at", "2019-06-10 08:44:40.436009"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", "2019-06-10 08:44:40.437442"], ["updated_at", "2019-06-10 08:44:40.437442"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", "2019-06-10 08:44:40.438803"], ["updated_at", "2019-06-10 08:44:40.438803"]]
  [1m[36mUserWithAll Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", "2019-06-10 08:44:40.439856"], ["updated_at", "2019-06-10 08:44:40.439856"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 10], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"11\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"13\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"11\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"13\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["request_uuid", "2084f56ea11f375d47fac0feafd72cf8"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:40.445016"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 0.8ms | ActiveRecord: 2.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:40.462840"], ["updated_at", "2019-06-10 08:44:40.462840"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}, {"name"=>"User3", "email"=>"user3@email.com"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 08:44:40.474872"], ["updated_at", "2019-06-10 08:44:40.474872"]]
  [1m[36mUserWithAll Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", "2019-06-10 08:44:40.476718"], ["updated_at", "2019-06-10 08:44:40.476718"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", "2019-06-10 08:44:40.479443"], ["updated_at", "2019-06-10 08:44:40.479443"]]
  [1m[36mUserWithAll Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", "2019-06-10 08:44:40.481172"], ["updated_at", "2019-06-10 08:44:40.481172"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 14], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "{\"users\":{\"15\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"17\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"15\":{\"name\":\"User1\",\"company_name\":null},\"16\":{\"name\":\"User2\",\"company_name\":null},\"17\":{\"name\":\"User3\",\"company_name\":null}}}"], ["request_uuid", "10df370633d5d178e80f99abe590a1fe"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:40.484620"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 20ms (Views: 0.1ms | ActiveRecord: 3.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:40.501804"], ["updated_at", "2019-06-10 08:44:40.501804"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "something"], ["created_at", "2019-06-10 08:44:40.503538"], ["updated_at", "2019-06-10 08:44:40.503538"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#update as HTML
  Parameters: {"company"=>{"name"=>"something else"}, "id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.4ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["name", "something else"], ["updated_at", "2019-06-10 08:44:40.509484"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Update (0.2ms)[0m  [1m[33mUPDATE "companies" SET "description" = $1, "updated_at" = $2 WHERE "companies"."id" = $3[0m  [["description", "Something third"], ["updated_at", "2019-06-10 08:44:40.511936"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "Company"], ["subject_id", 4], ["record_changes", "{\"name\":[\"something\",\"something else\"],\"description\":[null,\"Something third\"]}"], ["request_uuid", "bffedfc36af07b36030bac3261e5f9ab"], ["action", "companies#update"], ["created_at", "2019-06-10 08:44:40.514047"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 2.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", "2019-06-10 08:44:40.520866"], ["updated_at", "2019-06-10 08:44:40.520866"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"name"=>"User1", "email"=>"user1@email.com"}, {"name"=>"User2", "email"=>"user2@email.com"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2019-06-10 08:44:40.537541"], ["updated_at", "2019-06-10 08:44:40.537541"]]
  [1m[36mUserWithAll Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 5], ["created_at", "2019-06-10 08:44:40.538610"], ["updated_at", "2019-06-10 08:44:40.538610"]]
  [1m[36mUserWithAll Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 5], ["created_at", "2019-06-10 08:44:40.540965"], ["updated_at", "2019-06-10 08:44:40.540965"]]
  [1m[36mCompanyInfo Create (0.8ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 5], ["created_at", "2019-06-10 08:44:40.542342"], ["updated_at", "2019-06-10 08:44:40.542342"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "Company"], ["subject_id", 5], ["record_changes", "{\"users\":{\"20\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,5]},\"21\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,5]}}}"], ["meta", "{\"users\":{\"20\":{\"name\":\"User1\",\"company_name\":null},\"21\":{\"name\":\"User2\",\"company_name\":null}}}"], ["request_uuid", "5a80a45dad6714873bb1baa8e2a17b16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:40.545366"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 5], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,5]}"], ["request_uuid", "5a80a45dad6714873bb1baa8e2a17b16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:40.547720"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 22ms (Views: 0.1ms | ActiveRecord: 5.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", "2019-06-10 08:44:40.552227"], ["updated_at", "2019-06-10 08:44:40.552227"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 22], ["request_uuid", "5a80a45dad6714873bb1baa8e2a17b16"], ["created_at", "2019-06-10 08:44:40.553819"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:40.563279"], ["updated_at", "2019-06-10 08:44:40.563279"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:40.566725"], ["updated_at", "2019-06-10 08:44:40.566725"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "User"], ["subject_id", 24], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "5a80a45dad6714873bb1baa8e2a17b16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:40.568467"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:40.575104"], ["updated_at", "2019-06-10 08:44:40.575104"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", "2019-06-10 08:44:40.577891"], ["id", 25]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "User"], ["subject_id", 25], ["record_changes", "{\"email\":[\"test\",\"test1\"]}"], ["request_uuid", "5a80a45dad6714873bb1baa8e2a17b16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:40.580165"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:40.583937"], ["updated_at", "2019-06-10 08:44:40.583937"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 26]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "User"], ["subject_id", 26], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "5a80a45dad6714873bb1baa8e2a17b16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:40.587118"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:40.595922"], ["updated_at", "2019-06-10 08:44:40.595922"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "UserOnly"], ["subject_id", 27], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "5a80a45dad6714873bb1baa8e2a17b16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:40.598715"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaTrue Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:40.614352"], ["updated_at", "2019-06-10 08:44:40.614352"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "UserMetaTrue"], ["subject_id", 28], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "5a80a45dad6714873bb1baa8e2a17b16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:40.616953"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaSymbol Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:40.628985"], ["updated_at", "2019-06-10 08:44:40.628985"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "UserMetaSymbol"], ["subject_id", 29], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "5a80a45dad6714873bb1baa8e2a17b16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:40.630790"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserMetaProc Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:40.640268"], ["updated_at", "2019-06-10 08:44:40.640268"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "UserMetaProc"], ["subject_id", 30], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "5a80a45dad6714873bb1baa8e2a17b16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:40.643077"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:40.647697"], ["updated_at", "2019-06-10 08:44:40.647697"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:40.649506"], ["updated_at", "2019-06-10 08:44:40.649506"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 31], ["subject_type", "UserOnly"], ["subject_id", 32], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "5a80a45dad6714873bb1baa8e2a17b16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:40.650970"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:40.658166"], ["updated_at", "2019-06-10 08:44:40.658166"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "UserOnly"], ["subject_id", 33], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "5a80a45dad6714873bb1baa8e2a17b16"], ["action", "create"], ["created_at", "2019-06-10 08:44:40.661205"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", "2019-06-10 08:44:40.666237"], ["updated_at", "2019-06-10 08:44:40.666237"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserWithCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 6], ["created_at", "2019-06-10 08:44:40.676327"], ["updated_at", "2019-06-10 08:44:40.676327"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Create (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 19], ["subject_type", "UserWithCompany"], ["subject_id", 34], ["parent_type", "Company"], ["parent_id", 6], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,6]}"], ["request_uuid", "5a80a45dad6714873bb1baa8e2a17b16"], ["action", "companies#create"], ["created_at", "2019-06-10 08:44:40.678959"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", "2019-06-10 08:44:40.684619"], ["updated_at", "2019-06-10 08:44:40.684619"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUserOnly Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["name", "test1"], ["updated_at", "2019-06-10 08:44:40.686528"], ["id", 35]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
