  [1m[35m (18.0ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (15.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (5.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (28.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.0ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (36.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.8ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (37.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (25.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (14.5ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (8.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (7.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "Test"], ["created_at", 2017-01-22 10:45:19 UTC], ["updated_at", 2017-01-22 10:45:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (31.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (13.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-01-22 10:48:05 UTC], ["updated_at", 2017-01-22 10:48:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.8ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-01-22 10:48:17 UTC], ["updated_at", 2017-01-22 10:48:17 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (8.9ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (26.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (13.0ms)[0m  [1m[35mCREATE TABLE "log_book_records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "created_at" timestamp)[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_author_type_and_author_id" ON "log_book_records"  ("author_type", "author_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_subject_type_and_subject_id" ON "log_book_records"  ("subject_type", "subject_id")[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_parent_type_and_parent_id" ON "log_book_records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-01-22 10:51:03 UTC], ["updated_at", 2017-01-22 10:51:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.2ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (32.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE "log_book_records"[0m
  [1m[35m (8.6ms)[0m  [1m[35mCREATE TABLE "log_book_records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "created_at" timestamp)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_author_type_and_author_id" ON "log_book_records"  ("author_type", "author_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_subject_type_and_subject_id" ON "log_book_records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_parent_type_and_parent_id" ON "log_book_records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-01-22 10:52:04 UTC], ["updated_at", 2017-01-22 10:52:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (33.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE "log_book_records"[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "log_book_records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "created_at" timestamp)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_author_type_and_author_id" ON "log_book_records"  ("author_type", "author_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_subject_type_and_subject_id" ON "log_book_records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_parent_type_and_parent_id" ON "log_book_records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-01-22 10:53:03 UTC], ["updated_at", 2017-01-22 10:53:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (8.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.5ms)[0m  [1m[35mDROP TABLE "log_book_records"[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "log_book_records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "created_at" timestamp)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_author_type_and_author_id" ON "log_book_records"  ("author_type", "author_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_subject_type_and_subject_id" ON "log_book_records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_parent_type_and_parent_id" ON "log_book_records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-01-22 10:53:57 UTC], ["updated_at", 2017-01-22 10:53:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (11.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (5.0ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (14.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.9ms)[0m  [1m[35mDROP TABLE "log_book_records"[0m
  [1m[35m (22.9ms)[0m  [1m[35mCREATE TABLE "log_book_records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "created_at" timestamp)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_author_type_and_author_id" ON "log_book_records"  ("author_type", "author_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_subject_type_and_subject_id" ON "log_book_records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_parent_type_and_parent_id" ON "log_book_records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-01-22 10:54:26 UTC], ["updated_at", 2017-01-22 10:54:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (34.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE "log_book_records"[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "log_book_records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_author_type_and_author_id" ON "log_book_records"  ("author_type", "author_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_subject_type_and_subject_id" ON "log_book_records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_parent_type_and_parent_id" ON "log_book_records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-01-22 10:57:12 UTC], ["updated_at", 2017-01-22 10:57:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (7.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (5.4ms)[0m  [1m[35mDROP TABLE "log_book_records"[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "log_book_records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "created_at" timestamp)[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_author_type_and_author_id" ON "log_book_records"  ("author_type", "author_id")[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_subject_type_and_subject_id" ON "log_book_records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_parent_type_and_parent_id" ON "log_book_records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-01-22 10:57:31 UTC], ["updated_at", 2017-01-22 10:57:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (32.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE "log_book_records"[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "log_book_records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_author_type_and_author_id" ON "log_book_records"  ("author_type", "author_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_subject_type_and_subject_id" ON "log_book_records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_parent_type_and_parent_id" ON "log_book_records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-01-22 10:58:01 UTC], ["updated_at", 2017-01-22 10:58:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (7.0ms)[0m  [1m[32mINSERT INTO "log_book_records" ("author_type", "author_id", "record_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 1], ["record_uuid", "b65f9db3-7c78-4a54-85cf-856196b015cf"], ["created_at", 2017-01-22 10:58:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "log_book_records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (25.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.9ms)[0m  [1m[35mDROP TABLE "log_book_records"[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE TABLE "log_book_records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_author_type_and_author_id" ON "log_book_records"  ("author_type", "author_id")[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_subject_type_and_subject_id" ON "log_book_records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_log_book_records_on_parent_type_and_parent_id" ON "log_book_records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-01-22 11:00:02 UTC], ["updated_at", 2017-01-22 11:00:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "log_book_records" ("author_type", "author_id", "record_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 1], ["record_uuid", "1e21f432-692e-4a29-b6a2-4cf9bef85e9d"], ["created_at", 2017-01-22 11:00:02 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "log_book_records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "log_book_records" ("author_type", "author_id", "record_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 1], ["record_uuid", "8f785246-569f-4f8a-bd74-b845dff41546"], ["created_at", 2017-01-22 11:01:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (33.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-01-22 11:13:59 UTC], ["updated_at", 2017-01-22 11:13:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (32.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "record_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 1], ["record_uuid", "3aa16170-85f1-4a70-aea5-f25cf8e0bdba"], ["created_at", 2017-01-22 11:13:59 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (23.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (38.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (9.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (16.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (14.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (16.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (30.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.8ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (8.6ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (37.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.9ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (30.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (12.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (18.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (8.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-01-22 14:29:36 UTC], ["updated_at", 2017-01-22 14:29:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (51.1ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "9116550b-09f0-4022-898b-8a6055d00476"], ["created_at", 2017-01-22 14:29:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (27.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.4ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (46.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-01-22 14:30:06 UTC], ["updated_at", 2017-01-22 14:30:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (23.6ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "94a39982-5d12-4900-812b-2a58bd8dac33"], ["created_at", 2017-01-22 14:30:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.5ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (30.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (12.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (41.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-01-22 14:31:04 UTC], ["updated_at", 2017-01-22 14:31:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (27.6ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "948f585b-c26a-4e3d-9f7a-00e2ccadaf8c"], ["created_at", 2017-01-22 14:31:04 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.6ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (46.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (12.6ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-01-22 14:31:20 UTC], ["updated_at", 2017-01-22 14:31:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (8.8ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "4df86c5e-f8fb-43db-a6f0-482164f071ec"], ["created_at", 2017-01-22 14:31:20 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "test"], ["created_at", 2017-01-22 14:31:20 UTC], ["updated_at", 2017-01-22 14:31:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (31.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (17.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-01-22 14:32:13 UTC], ["updated_at", 2017-01-22 14:32:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (17.5ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "14e9f98f-b38e-474a-af1a-c7a154866e6d"], ["created_at", 2017-01-22 14:32:13 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "test"], ["created_at", 2017-01-22 14:32:13 UTC], ["updated_at", 2017-01-22 14:32:13 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (30.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-01-22 14:32:49 UTC], ["updated_at", 2017-01-22 14:32:49 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (26.9ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "e0508a2f-4d5e-4359-9bd0-4ca79481a70d"], ["created_at", 2017-01-22 14:33:32 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "test"], ["created_at", 2017-01-22 14:33:32 UTC], ["updated_at", 2017-01-22 14:33:32 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.2ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (28.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.5ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (7.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-01-22 14:33:46 UTC], ["updated_at", 2017-01-22 14:33:46 UTC]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "test"], ["created_at", 2017-01-22 14:33:46 UTC], ["updated_at", 2017-01-22 14:33:46 UTC]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.7ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (30.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (9.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-01-22 14:34:10 UTC], ["updated_at", 2017-01-22 14:34:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "test"], ["created_at", 2017-01-22 14:34:10 UTC], ["updated_at", 2017-01-22 14:34:10 UTC]]
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.9ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (29.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-01-22 14:34:43 UTC], ["updated_at", 2017-01-22 14:34:43 UTC]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "test"], ["created_at", 2017-01-22 14:34:43 UTC], ["updated_at", 2017-01-22 14:34:43 UTC]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (21.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (33.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (7.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-01-22 14:35:34 UTC], ["updated_at", 2017-01-22 14:35:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.3ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "c9ffd8ec-d39a-4552-95e9-63fe0fb70739"], ["created_at", 2017-01-22 14:35:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "test"], ["created_at", 2017-01-22 14:35:34 UTC], ["updated_at", 2017-01-22 14:35:34 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.0ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (42.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (6.8ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (8.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-01-22 14:36:59 UTC], ["updated_at", 2017-01-22 14:36:59 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "f93b90c1-61f1-488a-b2bc-0fc116beced4"], ["created_at", 2017-01-22 14:37:03 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "test"], ["created_at", 2017-01-22 14:37:03 UTC], ["updated_at", 2017-01-22 14:37:03 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (29.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "test"], ["created_at", 2017-01-22 14:37:23 UTC], ["updated_at", 2017-01-22 14:37:23 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (10.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (48.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (11.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "created_at" timestamp)[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "test"], ["created_at", 2017-01-22 14:39:49 UTC], ["updated_at", 2017-01-22 14:39:49 UTC]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (27.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "test"], ["created_at", 2017-01-22 14:40:32 UTC], ["updated_at", 2017-01-22 14:40:32 UTC]]
  [1m[35mSQL (18.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 1], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "3aa00076-0094-406a-8ee9-7296826e2af9"], ["created_at", 2017-01-22 14:40:34 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (30.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "test"], ["created_at", 2017-01-22 14:40:55 UTC], ["updated_at", 2017-01-22 14:40:55 UTC]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 1], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "6d63a83f-73d3-46c8-ac4c-e331893641f8"], ["created_at", 2017-01-22 14:40:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (10.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (32.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.1ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-01-22 14:57:10 UTC], ["updated_at", 2017-01-22 14:57:10 UTC]]
  [1m[35mSQL (6.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 1], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "ae362d93-ee58-4f45-831e-fa557d833ab1"], ["created_at", 2017-01-22 14:57:18 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (8.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (26.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (7.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-01-22 14:58:51 UTC], ["updated_at", 2017-01-22 14:58:51 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 1], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "aaba61e7-28c6-4c57-a28c-ba2e29c86fef"], ["created_at", 2017-01-22 14:58:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (27.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-01-22 14:59:41 UTC], ["updated_at", 2017-01-22 14:59:41 UTC]]
  [1m[35mSQL (6.9ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 1], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "6f8db91d-92fe-49bb-a803-19b86797fc5b"], ["created_at", 2017-01-22 14:59:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-01-22 14:59:42 UTC], ["updated_at", 2017-01-22 14:59:42 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "a91d1132-7866-47bf-9120-4ea7c825e1c7"], ["created_at", 2017-01-22 14:59:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (32.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (8.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-01-22 15:00:13 UTC], ["updated_at", 2017-01-22 15:00:13 UTC]]
  [1m[35mSQL (8.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 1], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "f3e7c045-f6ee-492d-ba18-cdce22796189"], ["created_at", 2017-01-22 15:00:14 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-01-22 15:00:14 UTC], ["updated_at", 2017-01-22 15:00:14 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "8e9cad54-2f6f-4f36-bfa3-d09283e16d13"], ["created_at", 2017-01-22 15:00:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (28.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-01-22 15:01:27 UTC], ["updated_at", 2017-01-22 15:01:27 UTC]]
  [1m[35mSQL (12.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 1], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "cdc0d3c8-8a41-46be-a3aa-464af1fc2af6"], ["created_at", 2017-01-22 15:01:29 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-01-22 15:01:29 UTC], ["updated_at", 2017-01-22 15:01:29 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "8745fbab-fba4-46de-9436-f559e08443b9"], ["created_at", 2017-01-22 15:01:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}\""], ["record_uuid", "f938604c-7edc-43f3-8091-6c072cc91daf"], ["created_at", 2017-01-22 15:01:40 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-01-22 15:01:35 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-01-22 15:01:40 UTC], ["updated_at", 2017-01-22 15:01:40 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 3], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "064493b6-2298-4727-9fe1-68fc8448575d"], ["created_at", 2017-01-22 15:01:41 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.6ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (28.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (8.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-01-22 15:02:04 UTC], ["updated_at", 2017-01-22 15:02:04 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 1], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "6c1c4016-1864-4093-b83e-02fc23ba87eb"], ["created_at", 2017-01-22 15:02:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-01-22 15:02:06 UTC], ["updated_at", 2017-01-22 15:02:06 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "19a1fb58-3e3b-46b3-b9f0-13c4bc5a9a3f"], ["created_at", 2017-01-22 15:02:07 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}\""], ["record_uuid", "984ae03f-a407-4062-bb74-c808dcac49f2"], ["created_at", 2017-01-22 15:02:08 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-01-22 15:02:07 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-01-22 15:02:27 UTC], ["updated_at", 2017-01-22 15:02:27 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 3], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "098daa28-869d-460a-89fa-1e75fafe8c92"], ["created_at", 2017-01-22 15:02:28 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.0ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (23.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.4ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-01-22 15:02:45 UTC], ["updated_at", 2017-01-22 15:02:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (7.1ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 1], ["record_changes", "\"{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}\""], ["record_uuid", "3eefb57e-8387-4267-92ef-b073ddfce2b8"], ["created_at", 2017-01-22 15:02:58 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-01-22 15:02:52 UTC], ["id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (26.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (12.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (13.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-01-22 15:03:29 UTC], ["updated_at", 2017-01-22 15:03:29 UTC]]
  [1m[35mSQL (6.9ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 1], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "491ff356-4b6b-4d11-934c-a717695ed0bb"], ["created_at", 2017-01-22 15:03:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-01-22 15:03:46 UTC], ["updated_at", 2017-01-22 15:03:46 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "2c6cb758-eff2-4c61-895e-d00bf35ba4ae"], ["created_at", 2017-01-22 15:03:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}\""], ["record_uuid", "d0de1721-ab03-4595-b94c-48f10882ed78"], ["created_at", 2017-01-22 15:03:54 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-01-22 15:03:54 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-01-22 15:03:54 UTC], ["updated_at", 2017-01-22 15:03:54 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 3], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "dce0d0e3-5fa5-445e-a807-4ddff716dc18"], ["created_at", 2017-01-22 15:03:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (24.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.0ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-01-22 15:04:01 UTC], ["updated_at", 2017-01-22 15:04:01 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 1], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "80161b90-1313-4541-8c45-9afa8ced797c"], ["created_at", 2017-01-22 15:04:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-01-22 15:04:09 UTC], ["updated_at", 2017-01-22 15:04:09 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "e33d9898-b97c-4967-895c-7823e35a8489"], ["created_at", 2017-01-22 15:05:10 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}\""], ["record_uuid", "9f8c587b-5467-459c-9c01-6fd73fd282ed"], ["created_at", 2017-01-22 15:05:12 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-01-22 15:05:11 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-01-22 15:05:12 UTC], ["updated_at", 2017-01-22 15:05:12 UTC]]
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 3], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "019a7ac4-253a-494f-b8fe-f82a4971bae8"], ["created_at", 2017-01-22 15:05:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.7ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (11.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-01-22 15:05:18 UTC], ["updated_at", 2017-01-22 15:05:18 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 1], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "67c12fc9-2257-47e8-a724-125e879b1621"], ["created_at", 2017-01-22 15:05:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-01-22 15:05:20 UTC], ["updated_at", 2017-01-22 15:05:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}\""], ["record_uuid", "b1eafa75-31ae-44da-9eeb-39e5a0e5f0c0"], ["created_at", 2017-01-22 15:05:32 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-01-22 15:05:28 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-01-22 15:05:32 UTC], ["updated_at", 2017-01-22 15:05:32 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 3], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "a4268cf8-76a5-465e-8370-a79332f76b49"], ["created_at", 2017-01-22 15:05:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (28.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (60.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (25.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 10:01:16 UTC], ["updated_at", 2017-02-01 10:01:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "a03f9841-be05-4d9c-8cdc-111e99ec2c83"], ["created_at", 2017-02-01 10:01:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:01:16 UTC], ["updated_at", 2017-02-01 10:01:16 UTC]]
  [1m[35mSQL (6.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "d3337365-7528-41c6-9d22-5c1ce2bb135e"], ["created_at", 2017-02-01 10:01:20 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:01:20 UTC], ["updated_at", 2017-02-01 10:01:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}\""], ["record_uuid", "eb5f56af-8966-4dca-99a0-fd6203f8eb4d"], ["created_at", 2017-02-01 10:01:21 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 10:01:21 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:01:21 UTC], ["updated_at", 2017-02-01 10:01:21 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 4], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "e26e7844-882c-45ca-b80a-92f42f28946e"], ["created_at", 2017-02-01 10:01:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (14.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (34.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.3ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (12.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 10:15:04 UTC], ["updated_at", 2017-02-01 10:15:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (7.7ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "87b1b906-3473-4a2f-88fe-1b6e66e29c8e"], ["created_at", 2017-02-01 10:15:04 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:15:04 UTC], ["updated_at", 2017-02-01 10:15:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:15:04 UTC], ["updated_at", 2017-02-01 10:15:04 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 10:15:04 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:15:04 UTC], ["updated_at", 2017-02-01 10:15:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (2.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:15:04 UTC], ["updated_at", 2017-02-01 10:15:04 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.6ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (29.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.1ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (17.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (17.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 10:15:56 UTC], ["updated_at", 2017-02-01 10:15:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (12.4ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "14ce3624-26c0-4fe2-8cef-0fe99ed0e898"], ["created_at", 2017-02-01 10:15:56 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:15:56 UTC], ["updated_at", 2017-02-01 10:15:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:15:56 UTC], ["updated_at", 2017-02-01 10:15:56 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 10:15:57 UTC], ["id", 3]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:15:57 UTC], ["updated_at", 2017-02-01 10:15:57 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:15:57 UTC], ["updated_at", 2017-02-01 10:15:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.6ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (27.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.4ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 10:16:26 UTC], ["updated_at", 2017-02-01 10:16:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "234f62e9-1a85-47df-b68c-2d44a30aadbd"], ["created_at", 2017-02-01 10:16:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:16:26 UTC], ["updated_at", 2017-02-01 10:16:26 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "325a673c-4f51-4615-bcb0-15dd54a8adf6"], ["action", "create"], ["created_at", 2017-02-01 10:16:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:16:26 UTC], ["updated_at", 2017-02-01 10:16:26 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 10:16:27 UTC], ["id", 3]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}\""], ["record_uuid", "42b3ff46-dd44-4350-91fa-9c8e006c5cd9"], ["action", "create"], ["created_at", 2017-02-01 10:16:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:16:27 UTC], ["updated_at", 2017-02-01 10:16:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:16:27 UTC], ["updated_at", 2017-02-01 10:16:27 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 5], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "5bbc934e-77f2-4640-bacb-17d2e8c65605"], ["action", "create"], ["created_at", 2017-02-01 10:16:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.2ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (24.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (24.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (3.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 10:16:41 UTC], ["updated_at", 2017-02-01 10:16:41 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (7.4ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "7debd431-0f38-4846-a225-2930dd79ccb2"], ["created_at", 2017-02-01 10:16:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:16:57 UTC], ["updated_at", 2017-02-01 10:16:57 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "329c483b-74b2-4476-b713-dd8684440f18"], ["action", "create"], ["created_at", 2017-02-01 10:17:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:17:02 UTC], ["updated_at", 2017-02-01 10:17:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 10:17:07 UTC], ["id", 3]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}\""], ["record_uuid", "37e564b7-167d-4bf9-a409-c8509923b291"], ["action", "create"], ["created_at", 2017-02-01 10:17:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:17:09 UTC], ["updated_at", 2017-02-01 10:17:09 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:18:35 UTC], ["updated_at", 2017-02-01 10:18:35 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 5], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "1130be14-ccbb-4d23-9ad0-e9f5fa241bca"], ["action", "create"], ["created_at", 2017-02-01 10:18:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (9.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (12.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.2ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 10:18:43 UTC], ["updated_at", 2017-02-01 10:18:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "6f6c6804-8def-4685-8f28-d8073e17d6d7"], ["created_at", 2017-02-01 10:18:43 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:18:43 UTC], ["updated_at", 2017-02-01 10:18:43 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:18:43 UTC], ["updated_at", 2017-02-01 10:18:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 10:18:43 UTC], ["id", 3]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:18:43 UTC], ["updated_at", 2017-02-01 10:18:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:18:43 UTC], ["updated_at", 2017-02-01 10:18:43 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (25.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (8.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 10:21:04 UTC], ["updated_at", 2017-02-01 10:21:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "37c0ee99-85f4-4a4d-843a-8ae73bc02bbb"], ["created_at", 2017-02-01 10:21:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:21:04 UTC], ["updated_at", 2017-02-01 10:21:04 UTC]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "3959ff5e-4387-4f16-819f-80e4c9578f37"], ["action", "create"], ["created_at", 2017-02-01 10:21:04 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:21:04 UTC], ["updated_at", 2017-02-01 10:21:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 10:21:04 UTC], ["id", 3]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}\""], ["record_uuid", "acec908b-6f40-4f52-8d79-adb11908a25b"], ["action", "create"], ["created_at", 2017-02-01 10:21:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:21:04 UTC], ["updated_at", 2017-02-01 10:21:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35m (2.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:21:04 UTC], ["updated_at", 2017-02-01 10:21:04 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 5], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "b4448046-1850-44c4-bb41-d446970c65f0"], ["action", "create"], ["created_at", 2017-02-01 10:21:04 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.7ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (33.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (32.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 10:22:25 UTC], ["updated_at", 2017-02-01 10:22:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "4c7f6908-838b-49b5-8c03-b1578165e7d2"], ["created_at", 2017-02-01 10:22:25 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:22:25 UTC], ["updated_at", 2017-02-01 10:22:25 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "36ff054f-b422-4018-b6a9-c1a34c76f86d"], ["action", "create"], ["created_at", 2017-02-01 10:22:25 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:22:25 UTC], ["updated_at", 2017-02-01 10:22:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 10:22:25 UTC], ["id", 3]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}\""], ["record_uuid", "ff3f553d-ccc0-420a-8e7e-38882255d576"], ["action", "create"], ["created_at", 2017-02-01 10:22:25 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:22:25 UTC], ["updated_at", 2017-02-01 10:22:25 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (4.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{}\""], ["record_uuid", "51f612b5-271c-4b23-b066-3c6894f67d39"], ["action", "create"], ["created_at", 2017-02-01 10:22:25 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:23:15 UTC], ["updated_at", 2017-02-01 10:23:15 UTC]]
  [1m[35mSQL (3.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 5], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "79a15544-ab55-4ed0-be5e-76f9d6ebbd8d"], ["action", "create"], ["created_at", 2017-02-01 10:23:15 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (31.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (41.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (14.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (15.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (12.6ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (30.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (8.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 10:25:50 UTC], ["updated_at", 2017-02-01 10:25:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "3db2d9c9-23b3-48d0-ad53-1df2e8395608"], ["created_at", 2017-02-01 10:25:50 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:25:50 UTC], ["updated_at", 2017-02-01 10:25:50 UTC]]
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "594c3829-4b31-4337-be39-3bcfe6ff9780"], ["action", "create"], ["created_at", 2017-02-01 10:25:50 UTC]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:25:50 UTC], ["updated_at", 2017-02-01 10:25:50 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 10:25:50 UTC], ["id", 3]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}\""], ["record_uuid", "7b2d40c4-d1d4-4400-a46a-1502d04aca33"], ["action", "create"], ["created_at", 2017-02-01 10:25:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:25:50 UTC], ["updated_at", 2017-02-01 10:25:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{}\""], ["record_uuid", "8dcd1a3b-d224-4424-9f50-a7fc8dbcaedb"], ["action", "create"], ["created_at", 2017-02-01 10:25:50 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:25:50 UTC], ["updated_at", 2017-02-01 10:25:50 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 5], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "93020a66-067f-450d-bee4-38574994f6bc"], ["action", "create"], ["created_at", 2017-02-01 10:25:50 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (27.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 10:26:14 UTC], ["updated_at", 2017-02-01 10:26:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "865baff8-e31f-4069-adb9-3fc0d4058efc"], ["created_at", 2017-02-01 10:26:14 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:26:14 UTC], ["updated_at", 2017-02-01 10:26:14 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "34ea0451-187c-4e2d-b5a4-bc9c278eabfb"], ["action", "create"], ["created_at", 2017-02-01 10:26:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:26:14 UTC], ["updated_at", 2017-02-01 10:26:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 10:26:14 UTC], ["id", 3]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}\""], ["record_uuid", "b601600d-a9f9-4e38-a593-16dd2bbcc386"], ["action", "create"], ["created_at", 2017-02-01 10:26:14 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:26:14 UTC], ["updated_at", 2017-02-01 10:26:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{}\""], ["record_uuid", "b9a2882b-530f-4b5c-89f5-c5dafe339659"], ["action", "create"], ["created_at", 2017-02-01 10:26:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:26:14 UTC], ["updated_at", 2017-02-01 10:26:14 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 5], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "85ceb375-7863-461c-9f8e-dbdba35ef35c"], ["action", "create"], ["created_at", 2017-02-01 10:26:14 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (20.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 10:26:45 UTC], ["updated_at", 2017-02-01 10:26:45 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "8502f986-974c-486f-9e6d-d02bf08bd657"], ["created_at", 2017-02-01 10:26:51 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:26:51 UTC], ["updated_at", 2017-02-01 10:26:51 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "d24c644b-5c2b-40c0-b362-de8708befad4"], ["action", "create"], ["created_at", 2017-02-01 10:26:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:26:56 UTC], ["updated_at", 2017-02-01 10:26:56 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 10:27:01 UTC], ["id", 3]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}\""], ["record_uuid", "e552b16f-42ba-466c-ad3d-41b1cfce8311"], ["action", "create"], ["created_at", 2017-02-01 10:27:51 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:27:51 UTC], ["updated_at", 2017-02-01 10:27:51 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{}\""], ["record_uuid", "c8aa5cf3-b03b-41b5-82dc-a8fecdf6e3a4"], ["action", "create"], ["created_at", 2017-02-01 10:27:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:27:58 UTC], ["updated_at", 2017-02-01 10:27:58 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 5], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "fe087333-d3e8-4626-b03d-76bd7163968b"], ["action", "create"], ["created_at", 2017-02-01 10:28:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (26.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 10:28:41 UTC], ["updated_at", 2017-02-01 10:28:41 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (7.0ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "75918737-28e5-4378-becd-c91ee17e1f79"], ["created_at", 2017-02-01 10:28:41 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:28:41 UTC], ["updated_at", 2017-02-01 10:28:41 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "5b32b82e-c244-4291-8462-2f5355898080"], ["action", "create"], ["created_at", 2017-02-01 10:28:41 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:28:41 UTC], ["updated_at", 2017-02-01 10:28:41 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 10:28:41 UTC], ["id", 3]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}\""], ["record_uuid", "dfde85f7-57ec-49cf-915e-0b9114e1c157"], ["action", "update"], ["created_at", 2017-02-01 10:28:44 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:28:44 UTC], ["updated_at", 2017-02-01 10:28:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{}\""], ["record_uuid", "1ca6d66a-8dd9-48bb-910a-bf779b5e9279"], ["action", "destroy"], ["created_at", 2017-02-01 10:28:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:28:44 UTC], ["updated_at", 2017-02-01 10:28:44 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 5], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "cdb1996f-f907-4571-904d-429c8cefc7fb"], ["action", "create"], ["created_at", 2017-02-01 10:28:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (20.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 10:28:59 UTC], ["updated_at", 2017-02-01 10:28:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "0e83485c-6a11-4774-be1e-bf88fa779d9e"], ["created_at", 2017-02-01 10:28:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:28:59 UTC], ["updated_at", 2017-02-01 10:28:59 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "0493fc30-a305-4987-b9b3-5833d7a3be7b"], ["action", "create"], ["created_at", 2017-02-01 10:28:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:28:59 UTC], ["updated_at", 2017-02-01 10:28:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 10:28:59 UTC], ["id", 3]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}\""], ["record_uuid", "98305de9-edc0-46e7-9cec-b4f8f76fe883"], ["action", "create"], ["created_at", 2017-02-01 10:28:59 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:28:59 UTC], ["updated_at", 2017-02-01 10:28:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{}\""], ["record_uuid", "da89da09-a4b3-4f76-8864-ee27cad40852"], ["action", "create"], ["created_at", 2017-02-01 10:28:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:28:59 UTC], ["updated_at", 2017-02-01 10:28:59 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 5], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "894f67e7-7f5d-4341-800c-8b63eda749ac"], ["action", "create"], ["created_at", 2017-02-01 10:28:59 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (8.6ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (26.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 10:29:10 UTC], ["updated_at", 2017-02-01 10:29:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "e7c21d0e-c55c-47ab-83a6-cc5947cc0cad"], ["created_at", 2017-02-01 10:29:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:29:10 UTC], ["updated_at", 2017-02-01 10:29:10 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "15193ac1-c3d5-46ca-b074-d694fb873361"], ["action", "create"], ["created_at", 2017-02-01 10:29:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:29:10 UTC], ["updated_at", 2017-02-01 10:29:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 10:29:10 UTC], ["id", 3]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}\""], ["record_uuid", "f79d60c7-3926-4584-bd9e-6a64f3e8693f"], ["action", "update"], ["created_at", 2017-02-01 10:29:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:29:10 UTC], ["updated_at", 2017-02-01 10:29:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{}\""], ["record_uuid", "58f600e3-1076-4472-8eaf-8c1ee4a2fd88"], ["action", "destroy"], ["created_at", 2017-02-01 10:29:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:29:10 UTC], ["updated_at", 2017-02-01 10:29:10 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 5], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "b45ed032-72c6-4ac4-99fa-cc546c5f34e2"], ["action", "create"], ["created_at", 2017-02-01 10:29:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (8.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (72.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.8ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (16.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 10:38:50 UTC], ["updated_at", 2017-02-01 10:38:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "422ddb5b-24d3-4a17-8745-e8c710995afb"], ["created_at", 2017-02-01 10:38:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:38:50 UTC], ["updated_at", 2017-02-01 10:38:50 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "46d9e3fe-9c0c-4308-86e6-d9d59277562c"], ["action", "create"], ["created_at", 2017-02-01 10:38:50 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:38:50 UTC], ["updated_at", 2017-02-01 10:38:50 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 10:38:50 UTC], ["id", 3]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}\""], ["record_uuid", "fb1af73a-b31b-4e71-9514-14d914cf40e2"], ["action", "update"], ["created_at", 2017-02-01 10:38:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:38:50 UTC], ["updated_at", 2017-02-01 10:38:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{}\""], ["record_uuid", "8da37e52-49df-4060-a33e-ff6efd17a271"], ["action", "destroy"], ["created_at", 2017-02-01 10:38:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:38:50 UTC], ["updated_at", 2017-02-01 10:38:50 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 5], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "bb8361e4-0fc4-4ba5-a7fb-20158919a46f"], ["action", "create"], ["created_at", 2017-02-01 10:38:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:38:50 UTC], ["updated_at", 2017-02-01 10:38:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.9ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (27.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 10:39:14 UTC], ["updated_at", 2017-02-01 10:39:14 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (7.0ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "8298090a-16d3-4750-aaab-55009fc84a81"], ["created_at", 2017-02-01 10:39:14 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:39:14 UTC], ["updated_at", 2017-02-01 10:39:14 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "21f74261-09ee-4c9e-9aab-de9f1c7756d8"], ["action", "create"], ["created_at", 2017-02-01 10:39:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:39:14 UTC], ["updated_at", 2017-02-01 10:39:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 10:39:14 UTC], ["id", 3]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}\""], ["record_uuid", "d242163a-03f7-4278-9461-f113f7791832"], ["action", "update"], ["created_at", 2017-02-01 10:39:14 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:39:14 UTC], ["updated_at", 2017-02-01 10:39:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{}\""], ["record_uuid", "c5d46e8e-2332-4287-b46b-3251845d11e2"], ["action", "destroy"], ["created_at", 2017-02-01 10:39:14 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:39:14 UTC], ["updated_at", 2017-02-01 10:39:14 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 5], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "abbed359-8b80-4b17-8b05-6f0862f28cc6"], ["action", "create"], ["created_at", 2017-02-01 10:39:14 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:39:14 UTC], ["updated_at", 2017-02-01 10:39:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:39:14 UTC], ["updated_at", 2017-02-01 10:39:14 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 6], ["subject_type", "Models::UserOnly"], ["subject_id", 7], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "bbf85768-bb4f-4ccb-863c-7219417f6d53"], ["action", "create"], ["created_at", 2017-02-01 10:39:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (15.9ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (35.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (35.2ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (26.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 10:39:38 UTC], ["updated_at", 2017-02-01 10:39:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "7124ba12-7450-4956-bed9-3113b5dad625"], ["created_at", 2017-02-01 10:39:38 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:39:38 UTC], ["updated_at", 2017-02-01 10:39:38 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}\""], ["record_uuid", "ad49a0c3-3a9d-4db0-9b26-7254a6aa186d"], ["action", "create"], ["created_at", 2017-02-01 10:39:38 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:39:38 UTC], ["updated_at", 2017-02-01 10:39:38 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 10:39:38 UTC], ["id", 3]]
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}\""], ["record_uuid", "b21abd2c-1766-4411-9ed8-0299dae039fa"], ["action", "update"], ["created_at", 2017-02-01 10:39:38 UTC]]
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:39:38 UTC], ["updated_at", 2017-02-01 10:39:38 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{}\""], ["record_uuid", "6f1172d2-61cc-4c0f-916c-f15f19dfb877"], ["action", "destroy"], ["created_at", 2017-02-01 10:39:38 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:39:38 UTC], ["updated_at", 2017-02-01 10:39:38 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 5], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "9cb54b04-0f81-407b-b960-819c1792bf30"], ["action", "create"], ["created_at", 2017-02-01 10:39:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:39:38 UTC], ["updated_at", 2017-02-01 10:39:38 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (3.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:39:39 UTC], ["updated_at", 2017-02-01 10:39:39 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 6], ["subject_type", "Models::UserOnly"], ["subject_id", 7], ["record_changes", "\"{\\\"email\\\":[null,\\\"test\\\"]}\""], ["record_uuid", "17ec7e98-f766-4fc8-b424-c80d2462f019"], ["action", "create"], ["created_at", 2017-02-01 10:39:39 UTC]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (8.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (53.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (5.0ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 10:54:01 UTC], ["updated_at", 2017-02-01 10:54:01 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "1e755c05-1a5c-4345-a9ba-1f82ced9f40a"], ["created_at", 2017-02-01 10:54:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:54:01 UTC], ["updated_at", 2017-02-01 10:54:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:54:01 UTC], ["updated_at", 2017-02-01 10:54:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 10:54:01 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:54:01 UTC], ["updated_at", 2017-02-01 10:54:01 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:54:01 UTC], ["updated_at", 2017-02-01 10:54:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:54:01 UTC], ["updated_at", 2017-02-01 10:54:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:54:01 UTC], ["updated_at", 2017-02-01 10:54:01 UTC]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (30.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (17.5ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 10:55:28 UTC], ["updated_at", 2017-02-01 10:55:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.8ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "71cf048b-c705-4bb3-a698-56114875ae36"], ["created_at", 2017-02-01 10:55:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:55:28 UTC], ["updated_at", 2017-02-01 10:55:28 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "df3e650a-0587-485a-b0cb-86acebd09376"], ["action", "create"], ["created_at", 2017-02-01 10:55:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:55:28 UTC], ["updated_at", 2017-02-01 10:55:28 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 10:55:28 UTC], ["id", 3]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "c7a319bb-9658-478a-b451-e50b25e1c0e5"], ["action", "update"], ["created_at", 2017-02-01 10:55:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:55:28 UTC], ["updated_at", 2017-02-01 10:55:28 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "e68a3b56-2dca-48e2-b1bb-d225d5218bdd"], ["action", "destroy"], ["created_at", 2017-02-01 10:55:28 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (9.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:55:28 UTC], ["updated_at", 2017-02-01 10:55:28 UTC]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "55e5ef06-b709-4f67-939d-31ed7cd1600a"], ["action", "create"], ["created_at", 2017-02-01 10:55:28 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:55:28 UTC], ["updated_at", 2017-02-01 10:55:28 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:55:28 UTC], ["updated_at", 2017-02-01 10:55:28 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 6], ["subject_type", "Models::UserOnly"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "c313f2f2-0c69-45b1-a796-dce291114b3d"], ["action", "create"], ["created_at", 2017-02-01 10:55:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.9ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (11.9ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (33.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 10:57:46 UTC], ["updated_at", 2017-02-01 10:57:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "a95384fd-d177-4771-87a2-b3f6eb993a3c"], ["created_at", 2017-02-01 10:57:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:57:46 UTC], ["updated_at", 2017-02-01 10:57:46 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "7c5f593b-331e-43a3-a75e-60b887ffa53f"], ["action", "create"], ["created_at", 2017-02-01 10:57:46 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:57:46 UTC], ["updated_at", 2017-02-01 10:57:46 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 10:57:46 UTC], ["id", 3]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "ccf19f39-3017-4a58-9eb0-9ac3c8b72212"], ["action", "update"], ["created_at", 2017-02-01 10:57:46 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:57:46 UTC], ["updated_at", 2017-02-01 10:57:46 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "a3906396-4f57-4fd7-8d07-a029e732b93c"], ["action", "destroy"], ["created_at", 2017-02-01 10:57:46 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:57:46 UTC], ["updated_at", 2017-02-01 10:57:46 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "5cc9a685-7505-4ebd-ae55-05c9dd108673"], ["action", "create"], ["created_at", 2017-02-01 10:57:46 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:57:46 UTC], ["updated_at", 2017-02-01 10:57:46 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:57:46 UTC], ["updated_at", 2017-02-01 10:57:46 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 6], ["subject_type", "Models::UserOnly"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "0da68cc5-0a2a-41ed-871c-642b3e6cb096"], ["action", "create"], ["created_at", 2017-02-01 10:57:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (33.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (49.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.4ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 10:59:19 UTC], ["updated_at", 2017-02-01 10:59:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "5bdca3d2-5927-4896-b17a-2a7accfc7139"], ["created_at", 2017-02-01 10:59:19 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:59:19 UTC], ["updated_at", 2017-02-01 10:59:19 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "65679e04-0ea7-4490-bc37-b4d22a0f1df2"], ["action", "create"], ["created_at", 2017-02-01 10:59:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:59:19 UTC], ["updated_at", 2017-02-01 10:59:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 10:59:19 UTC], ["id", 3]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "f72133f8-2362-4486-8925-c310f172ec6f"], ["action", "update"], ["created_at", 2017-02-01 10:59:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:59:19 UTC], ["updated_at", 2017-02-01 10:59:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "5ec9784e-fa80-4032-870e-9e0277801ef5"], ["action", "destroy"], ["created_at", 2017-02-01 10:59:19 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (2.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:59:19 UTC], ["updated_at", 2017-02-01 10:59:19 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "e8bc63a5-0cd8-4b7c-8aae-1df1bd150122"], ["action", "create"], ["created_at", 2017-02-01 10:59:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:59:19 UTC], ["updated_at", 2017-02-01 10:59:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:59:19 UTC], ["updated_at", 2017-02-01 10:59:19 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 6], ["subject_type", "Models::UserOnly"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "90a34950-e467-4556-9794-77b5f7683592"], ["action", "create"], ["created_at", 2017-02-01 10:59:19 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 10:59:19 UTC], ["updated_at", 2017-02-01 10:59:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (23.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (26.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 11:01:53 UTC], ["updated_at", 2017-02-01 11:01:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (8.1ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "b17bdb98-86d3-4c9e-a6ed-72eb85c0a3f3"], ["created_at", 2017-02-01 11:01:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:01:54 UTC], ["updated_at", 2017-02-01 11:01:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:01:54 UTC], ["updated_at", 2017-02-01 11:01:54 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "bc7cb62a-95fe-41bf-a674-222b06c2fd47"], ["action", "create"], ["created_at", 2017-02-01 11:01:54 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:01:54 UTC], ["updated_at", 2017-02-01 11:01:54 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 11:01:54 UTC], ["id", 4]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "78a54bd3-05b5-4ba5-98ae-747c66d6fa8a"], ["action", "update"], ["created_at", 2017-02-01 11:01:54 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:01:54 UTC], ["updated_at", 2017-02-01 11:01:54 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "8242d51b-0ad1-482c-9194-2668a0aa1108"], ["action", "destroy"], ["created_at", 2017-02-01 11:01:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:01:54 UTC], ["updated_at", 2017-02-01 11:01:54 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "27bd18e0-7213-4733-b086-35432b5c03e0"], ["action", "create"], ["created_at", 2017-02-01 11:01:54 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:01:54 UTC], ["updated_at", 2017-02-01 11:01:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:01:54 UTC], ["updated_at", 2017-02-01 11:01:54 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 7], ["subject_type", "Models::UserOnly"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "f8275af4-abba-475c-a290-1068ead49563"], ["action", "create"], ["created_at", 2017-02-01 11:01:54 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (13.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (29.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.3ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (9.5ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 11:06:19 UTC], ["updated_at", 2017-02-01 11:06:19 UTC]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:06:19 UTC], ["updated_at", 2017-02-01 11:06:19 UTC]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:06:19 UTC], ["updated_at", 2017-02-01 11:06:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:06:19 UTC], ["updated_at", 2017-02-01 11:06:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:06:19 UTC], ["updated_at", 2017-02-01 11:06:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:06:19 UTC], ["updated_at", 2017-02-01 11:06:19 UTC]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:06:19 UTC], ["updated_at", 2017-02-01 11:06:19 UTC]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.5ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (24.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (9.6ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (7.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (13.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (3.0ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 11:06:34 UTC], ["updated_at", 2017-02-01 11:06:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:06:34 UTC], ["updated_at", 2017-02-01 11:06:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:06:34 UTC], ["updated_at", 2017-02-01 11:06:34 UTC]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:06:34 UTC], ["updated_at", 2017-02-01 11:06:34 UTC]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:06:34 UTC], ["updated_at", 2017-02-01 11:06:34 UTC]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:06:34 UTC], ["updated_at", 2017-02-01 11:06:34 UTC]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:06:34 UTC], ["updated_at", 2017-02-01 11:06:34 UTC]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.9ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (20.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 11:06:58 UTC], ["updated_at", 2017-02-01 11:06:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "0926ef85-c008-4cf2-b684-02f9634c9b80"], ["created_at", 2017-02-01 11:06:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:06:58 UTC], ["updated_at", 2017-02-01 11:06:58 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:06:58 UTC], ["updated_at", 2017-02-01 11:06:58 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "ef2d1afa-59a5-42c4-809d-d77a10a7567f"], ["action", "create"], ["created_at", 2017-02-01 11:06:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:06:58 UTC], ["updated_at", 2017-02-01 11:06:58 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 11:06:58 UTC], ["id", 4]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "05a4c599-4679-4868-9309-a48cbcc6da8d"], ["action", "update"], ["created_at", 2017-02-01 11:06:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:06:58 UTC], ["updated_at", 2017-02-01 11:06:58 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "0652b781-e205-47e8-9c15-9003424c7280"], ["action", "destroy"], ["created_at", 2017-02-01 11:06:58 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:06:58 UTC], ["updated_at", 2017-02-01 11:06:58 UTC]]
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "d323c218-ce8b-4958-8249-52bcf0528f24"], ["action", "create"], ["created_at", 2017-02-01 11:06:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:06:58 UTC], ["updated_at", 2017-02-01 11:06:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:06:58 UTC], ["updated_at", 2017-02-01 11:06:58 UTC]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 7], ["subject_type", "Models::UserOnly"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "14cdc3c9-1e1c-41f7-8bc3-c17eb7cdd3c4"], ["action", "create"], ["created_at", 2017-02-01 11:06:58 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.6ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (25.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (12.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 11:07:19 UTC], ["updated_at", 2017-02-01 11:07:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (13.1ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "557d3646-5f26-4322-af86-0f9d588bf0fd"], ["created_at", 2017-02-01 11:07:19 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:07:19 UTC], ["updated_at", 2017-02-01 11:07:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:07:19 UTC], ["updated_at", 2017-02-01 11:07:19 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "9d846b8d-f7fc-4994-926d-38e5f853ad2d"], ["action", "create"], ["created_at", 2017-02-01 11:07:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:07:19 UTC], ["updated_at", 2017-02-01 11:07:19 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 11:07:19 UTC], ["id", 4]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "52196037-3183-4226-b218-c944c53ef3bf"], ["action", "update"], ["created_at", 2017-02-01 11:07:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:07:19 UTC], ["updated_at", 2017-02-01 11:07:19 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "9d333cd6-5c19-4b08-a441-a5f148dba306"], ["action", "destroy"], ["created_at", 2017-02-01 11:07:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:07:19 UTC], ["updated_at", 2017-02-01 11:07:19 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "7f948ac8-d9d8-46e0-a5e7-7477d3d0e394"], ["action", "create"], ["created_at", 2017-02-01 11:07:19 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:07:19 UTC], ["updated_at", 2017-02-01 11:07:19 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:07:19 UTC], ["updated_at", 2017-02-01 11:07:19 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 7], ["subject_type", "Models::UserOnly"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "c9d62cb3-7893-4a1f-8dd9-d9b762b57571"], ["action", "create"], ["created_at", 2017-02-01 11:07:19 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.9ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (23.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (7.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 11:08:15 UTC], ["updated_at", 2017-02-01 11:08:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "57f38694-78c2-40e0-a4cb-a35da1a8e404"], ["created_at", 2017-02-01 11:08:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:08:15 UTC], ["updated_at", 2017-02-01 11:08:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:08:15 UTC], ["updated_at", 2017-02-01 11:08:15 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "b108c477-617a-45af-b869-40a2eeab3d7a"], ["action", "create"], ["created_at", 2017-02-01 11:08:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:08:15 UTC], ["updated_at", 2017-02-01 11:08:15 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 11:08:15 UTC], ["id", 4]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "d0c25b32-39a8-4892-9b86-1331056a3724"], ["action", "update"], ["created_at", 2017-02-01 11:08:15 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:08:15 UTC], ["updated_at", 2017-02-01 11:08:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "f1c35885-bd63-490e-b246-c3a3206a84f3"], ["action", "destroy"], ["created_at", 2017-02-01 11:08:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:08:15 UTC], ["updated_at", 2017-02-01 11:08:15 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "8322ae43-2bdb-4c2d-99ca-782d6b2df9de"], ["action", "create"], ["created_at", 2017-02-01 11:08:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (2.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:08:16 UTC], ["updated_at", 2017-02-01 11:08:16 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:08:16 UTC], ["updated_at", 2017-02-01 11:08:16 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 7], ["subject_type", "Models::UserOnly"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "bedbeb04-6a70-4ba3-a0d5-5f6ac0161de7"], ["action", "create"], ["created_at", 2017-02-01 11:08:16 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.8ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (30.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.9ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (12.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 11:10:13 UTC], ["updated_at", 2017-02-01 11:10:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (12.5ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "f90208a4-69a4-49bf-b94d-2139ca1edd26"], ["created_at", 2017-02-01 11:10:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:10:13 UTC], ["updated_at", 2017-02-01 11:10:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:10:13 UTC], ["updated_at", 2017-02-01 11:10:13 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "f45ae4e5-7c63-4d59-b13b-4a588a884aa5"], ["action", "create"], ["created_at", 2017-02-01 11:10:13 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:10:14 UTC], ["updated_at", 2017-02-01 11:10:14 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 11:10:14 UTC], ["id", 4]]
  [1m[35mSQL (3.1ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "eb3e4c15-7db0-4672-9fef-01a04a4f6bb5"], ["action", "update"], ["created_at", 2017-02-01 11:10:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:10:14 UTC], ["updated_at", 2017-02-01 11:10:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "95995991-8168-4208-9117-95deac2620a6"], ["action", "destroy"], ["created_at", 2017-02-01 11:10:14 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:10:14 UTC], ["updated_at", 2017-02-01 11:10:14 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "f459640e-f28d-40ee-8212-97580388ac6f"], ["action", "create"], ["created_at", 2017-02-01 11:10:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:10:14 UTC], ["updated_at", 2017-02-01 11:10:14 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:10:14 UTC], ["updated_at", 2017-02-01 11:10:14 UTC]]
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 7], ["subject_type", "Models::UserOnly"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "2d08bc55-cf9c-44b2-8a30-b53721223375"], ["action", "create"], ["created_at", 2017-02-01 11:10:14 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.8ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (28.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (12.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (11.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 11:17:56 UTC], ["updated_at", 2017-02-01 11:17:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "0dd54bb1-da1f-4044-a9e9-5bddddbc2702"], ["created_at", 2017-02-01 11:17:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:17:56 UTC], ["updated_at", 2017-02-01 11:17:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:17:56 UTC], ["updated_at", 2017-02-01 11:17:56 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "99d5f43d-7e12-46ef-9bc6-1261be68c015"], ["action", "create"], ["created_at", 2017-02-01 11:17:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:17:56 UTC], ["updated_at", 2017-02-01 11:17:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 11:17:56 UTC], ["id", 4]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "020dadee-56f4-4971-a447-0b4c5e13f4f6"], ["action", "update"], ["created_at", 2017-02-01 11:17:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:17:56 UTC], ["updated_at", 2017-02-01 11:17:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "eae96555-8819-4785-88a2-20d0800a2e91"], ["action", "destroy"], ["created_at", 2017-02-01 11:17:56 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:17:56 UTC], ["updated_at", 2017-02-01 11:17:56 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "cdf02a1e-826d-494c-82aa-2b680678ccd5"], ["action", "create"], ["created_at", 2017-02-01 11:17:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:17:56 UTC], ["updated_at", 2017-02-01 11:17:56 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMeta"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "4a8872dc-41e5-4f5f-9c8e-5f83e87c3c5c"], ["action", "create"], ["created_at", 2017-02-01 11:17:56 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (2.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:17:56 UTC], ["updated_at", 2017-02-01 11:17:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:17:56 UTC], ["updated_at", 2017-02-01 11:17:56 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 8], ["subject_type", "Models::UserOnly"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "393a70b7-83ac-49b4-a6cb-adf00cd5449c"], ["action", "create"], ["created_at", 2017-02-01 11:17:56 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (27.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.5ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (9.5ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (9.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (24.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.2ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 11:20:58 UTC], ["updated_at", 2017-02-01 11:20:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.1ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "f156fe0d-7855-4fc2-bb7a-e87e31efe8b3"], ["created_at", 2017-02-01 11:20:58 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:20:58 UTC], ["updated_at", 2017-02-01 11:20:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:20:58 UTC], ["updated_at", 2017-02-01 11:20:58 UTC]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "e8a1877e-6f25-4720-98f7-e5c76049bf56"], ["action", "create"], ["created_at", 2017-02-01 11:20:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:20:58 UTC], ["updated_at", 2017-02-01 11:20:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 11:20:58 UTC], ["id", 4]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "0c4d4b9e-1702-4e05-91cd-484ef9c12015"], ["action", "update"], ["created_at", 2017-02-01 11:20:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:20:58 UTC], ["updated_at", 2017-02-01 11:20:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "4eaf5e13-c46b-421d-916f-4e80da78a3e9"], ["action", "destroy"], ["created_at", 2017-02-01 11:20:58 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:20:58 UTC], ["updated_at", 2017-02-01 11:20:58 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "65b0bd85-6092-482e-b3e3-a9b0f3cf6b38"], ["action", "create"], ["created_at", 2017-02-01 11:20:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:20:58 UTC], ["updated_at", 2017-02-01 11:20:58 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaTrue"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "cce9f0fe-ccb2-4200-953d-8494e3172c7b"], ["action", "create"], ["created_at", 2017-02-01 11:20:58 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (2.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:20:58 UTC], ["updated_at", 2017-02-01 11:20:58 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaSymbol"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "bc35c5b5-346f-4a8d-9a6e-eea013cfc064"], ["action", "create"], ["created_at", 2017-02-01 11:20:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:20:58 UTC], ["updated_at", 2017-02-01 11:20:58 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaProc"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"Models::UserMetaProc\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "6b44abe6-a086-47d6-ad90-d948ff4aed3e"], ["action", "create"], ["created_at", 2017-02-01 11:20:58 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:20:58 UTC], ["updated_at", 2017-02-01 11:20:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:20:58 UTC], ["updated_at", 2017-02-01 11:20:58 UTC]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 10], ["subject_type", "Models::UserOnly"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "434f8194-a4b6-4e2b-ae05-1e2ba002e327"], ["action", "create"], ["created_at", 2017-02-01 11:20:58 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (35.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (6.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (14.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:25:10 UTC], ["updated_at", 2017-02-01 11:25:10 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaProc"], ["subject_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"Models::UserMetaProc\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "9da63978-2218-43b4-bcbf-4fd69fd3aea1"], ["action", "create"], ["created_at", 2017-02-01 11:25:48 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.2ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (11.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:25:53 UTC], ["updated_at", 2017-02-01 11:25:53 UTC]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (8.5ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (25.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:26:32 UTC], ["updated_at", 2017-02-01 11:26:32 UTC]]
  [1m[35mSQL (18.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaProc"], ["subject_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "055f5d1a-5ba4-4ea5-855a-e33c1f0a89a3"], ["action", "create"], ["created_at", 2017-02-01 11:26:36 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (12.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (27.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "company" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (9.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 11:48:55 UTC], ["updated_at", 2017-02-01 11:48:55 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (21.5ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "b2531081-c06a-4aa6-a3dc-8daace071a07"], ["created_at", 2017-02-01 11:48:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:48:55 UTC], ["updated_at", 2017-02-01 11:48:55 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:48:55 UTC], ["updated_at", 2017-02-01 11:48:55 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "f1aeb016-c479-4879-a3f4-38d231bf68cb"], ["action", "create"], ["created_at", 2017-02-01 11:48:55 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:48:55 UTC], ["updated_at", 2017-02-01 11:48:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 11:48:55 UTC], ["id", 4]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "33c94ea4-7d1b-485f-b661-27b463a046bf"], ["action", "update"], ["created_at", 2017-02-01 11:48:55 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:48:55 UTC], ["updated_at", 2017-02-01 11:48:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "df942419-7e15-484f-ba90-1aa1bd28cf59"], ["action", "destroy"], ["created_at", 2017-02-01 11:48:55 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:48:55 UTC], ["updated_at", 2017-02-01 11:48:55 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "62d842c5-5e6b-41fa-9f91-ae7fa8ceb6ba"], ["action", "create"], ["created_at", 2017-02-01 11:48:55 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:48:55 UTC], ["updated_at", 2017-02-01 11:48:55 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaTrue"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "0855b44f-cff3-405f-a3a6-b414bdd3a4f8"], ["action", "create"], ["created_at", 2017-02-01 11:48:55 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:48:55 UTC], ["updated_at", 2017-02-01 11:48:55 UTC]]
  [1m[35mSQL (3.1ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaSymbol"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "84de91fd-d455-4851-8cf8-97f1bc216dfd"], ["action", "create"], ["created_at", 2017-02-01 11:48:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:48:55 UTC], ["updated_at", 2017-02-01 11:48:55 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaProc"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "590859d2-76a4-4a2b-a108-fddd6d35441a"], ["action", "create"], ["created_at", 2017-02-01 11:48:55 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:48:55 UTC], ["updated_at", 2017-02-01 11:48:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:48:55 UTC], ["updated_at", 2017-02-01 11:48:55 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 10], ["subject_type", "Models::UserOnly"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "b418d034-f19e-41ec-b787-0f66ef1ed41d"], ["action", "create"], ["created_at", 2017-02-01 11:48:55 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (33.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE "company"[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "company" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (7.6ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 11:49:09 UTC], ["updated_at", 2017-02-01 11:49:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (12.6ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "651245ca-ae18-4961-a946-68cb8f4f9882"], ["created_at", 2017-02-01 11:49:09 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:49:09 UTC], ["updated_at", 2017-02-01 11:49:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:49:09 UTC], ["updated_at", 2017-02-01 11:49:09 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "bf473485-3093-40bf-a145-1d1f62fc279e"], ["action", "create"], ["created_at", 2017-02-01 11:49:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:49:09 UTC], ["updated_at", 2017-02-01 11:49:09 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 11:49:09 UTC], ["id", 4]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "72189e8c-6ea6-4b93-9b2f-0ac9f21d7a01"], ["action", "update"], ["created_at", 2017-02-01 11:49:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:49:09 UTC], ["updated_at", 2017-02-01 11:49:09 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "8bead6c2-d8ad-45ce-b3c1-0a6c2f38e908"], ["action", "destroy"], ["created_at", 2017-02-01 11:49:09 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:49:09 UTC], ["updated_at", 2017-02-01 11:49:09 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "957dceec-263f-4f83-b0dc-359ecf333455"], ["action", "create"], ["created_at", 2017-02-01 11:49:09 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:49:09 UTC], ["updated_at", 2017-02-01 11:49:09 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaTrue"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "772167a1-928f-4e79-ba6f-16c7f310cc3c"], ["action", "create"], ["created_at", 2017-02-01 11:49:09 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:49:09 UTC], ["updated_at", 2017-02-01 11:49:09 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaSymbol"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "ef84e42e-5c61-4605-bff2-9e00f839777f"], ["action", "create"], ["created_at", 2017-02-01 11:49:09 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:49:09 UTC], ["updated_at", 2017-02-01 11:49:09 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaProc"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "9f66770a-8754-4ee1-b38b-6ea22f25b897"], ["action", "create"], ["created_at", 2017-02-01 11:49:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:49:09 UTC], ["updated_at", 2017-02-01 11:49:09 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:49:09 UTC], ["updated_at", 2017-02-01 11:49:09 UTC]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 10], ["subject_type", "Models::UserOnly"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "6529be20-2eeb-4826-9a28-3a2148a8be97"], ["action", "create"], ["created_at", 2017-02-01 11:49:09 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (20.8ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (29.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (8.5ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 11:49:25 UTC], ["updated_at", 2017-02-01 11:49:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.1ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "13aeab4b-1f3e-4f05-9ea0-96c9a98366db"], ["created_at", 2017-02-01 11:49:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:49:25 UTC], ["updated_at", 2017-02-01 11:49:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:49:25 UTC], ["updated_at", 2017-02-01 11:49:25 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "1fc5dc4e-9d41-42a1-aa3c-48083c3fe599"], ["action", "create"], ["created_at", 2017-02-01 11:49:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:49:25 UTC], ["updated_at", 2017-02-01 11:49:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 11:49:25 UTC], ["id", 4]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "b2041e30-aa83-40db-8093-941afe27bc3a"], ["action", "update"], ["created_at", 2017-02-01 11:49:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:49:25 UTC], ["updated_at", 2017-02-01 11:49:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "74eff90b-0fc2-49b0-8845-4ec8c789e14d"], ["action", "destroy"], ["created_at", 2017-02-01 11:49:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:49:25 UTC], ["updated_at", 2017-02-01 11:49:25 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "2a165e66-952d-4faa-9c2a-ff9ea895fa84"], ["action", "create"], ["created_at", 2017-02-01 11:49:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:49:25 UTC], ["updated_at", 2017-02-01 11:49:25 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaTrue"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "afecc492-3c4c-49c5-a197-09224650aa31"], ["action", "create"], ["created_at", 2017-02-01 11:49:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:49:25 UTC], ["updated_at", 2017-02-01 11:49:25 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaSymbol"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "609fe00e-d9bd-46bb-8220-ae596d7c4128"], ["action", "create"], ["created_at", 2017-02-01 11:49:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:49:25 UTC], ["updated_at", 2017-02-01 11:49:25 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaProc"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "962510a0-af71-473a-ad1b-e3a71be75387"], ["action", "create"], ["created_at", 2017-02-01 11:49:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:49:25 UTC], ["updated_at", 2017-02-01 11:49:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:49:25 UTC], ["updated_at", 2017-02-01 11:49:25 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 10], ["subject_type", "Models::UserOnly"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "f6c0c6e9-6c04-4739-a947-e7fafde63d54"], ["action", "create"], ["created_at", 2017-02-01 11:49:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (12.9ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-01 11:49:25 UTC], ["updated_at", 2017-02-01 11:49:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-01 11:49:25 UTC], ["updated_at", 2017-02-01 11:49:25 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["subject_type", "Models::UserWithCompany"], ["subject_id", 12], ["parent_type", "Models::Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "b8a5ee99-457d-4a07-8d99-8dd67d949cdd"], ["action", "create"], ["created_at", 2017-02-01 11:49:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::Company Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.2ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (27.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (7.9ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (18.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 11:50:47 UTC], ["updated_at", 2017-02-01 11:50:47 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "5860a172-ae43-433a-bb85-06323b6d782d"], ["created_at", 2017-02-01 11:50:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:50:47 UTC], ["updated_at", 2017-02-01 11:50:47 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (2.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:50:47 UTC], ["updated_at", 2017-02-01 11:50:47 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "52aa67cd-580b-4369-9b6b-286f893114fd"], ["action", "create"], ["created_at", 2017-02-01 11:50:47 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:50:47 UTC], ["updated_at", 2017-02-01 11:50:47 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 11:50:47 UTC], ["id", 4]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "a9eadebd-8e71-4a2b-93ef-b95c8cc2d3ac"], ["action", "update"], ["created_at", 2017-02-01 11:50:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:50:47 UTC], ["updated_at", 2017-02-01 11:50:47 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "61a2a996-c9fd-416e-b2ad-9837309432b3"], ["action", "destroy"], ["created_at", 2017-02-01 11:50:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:50:47 UTC], ["updated_at", 2017-02-01 11:50:47 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "6b8277ec-e384-412e-953a-a66205c10ab3"], ["action", "create"], ["created_at", 2017-02-01 11:50:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:50:47 UTC], ["updated_at", 2017-02-01 11:50:47 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaTrue"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "94cd99d6-60d8-41ef-b390-912d4f7cdae2"], ["action", "create"], ["created_at", 2017-02-01 11:50:47 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:50:47 UTC], ["updated_at", 2017-02-01 11:50:47 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaSymbol"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "9533dcb9-9d38-49c4-8050-92a512fbf125"], ["action", "create"], ["created_at", 2017-02-01 11:50:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:50:47 UTC], ["updated_at", 2017-02-01 11:50:47 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaProc"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "0a332392-8f45-48a8-9967-521f2e4d71ad"], ["action", "create"], ["created_at", 2017-02-01 11:50:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:50:47 UTC], ["updated_at", 2017-02-01 11:50:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:50:47 UTC], ["updated_at", 2017-02-01 11:50:47 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 10], ["subject_type", "Models::UserOnly"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "9f058fe6-4a33-41d1-8963-eb489a900fe3"], ["action", "create"], ["created_at", 2017-02-01 11:50:47 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-01 11:50:47 UTC], ["updated_at", 2017-02-01 11:50:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-01 11:50:47 UTC], ["updated_at", 2017-02-01 11:50:47 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["subject_type", "Models::UserWithCompany"], ["subject_id", 12], ["parent_type", "Models::Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":null}\""], ["record_uuid", "2d621ae1-fab3-4dbd-adf8-da51f47f905a"], ["action", "create"], ["created_at", 2017-02-01 11:50:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::Company Load (0.6ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (9.5ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (27.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (3.9ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (10.1ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (8.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (12.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 11:52:02 UTC], ["updated_at", 2017-02-01 11:52:02 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "d9518c4c-cdc0-4b6d-aac1-a039a87f4c75"], ["created_at", 2017-02-01 11:52:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:52:02 UTC], ["updated_at", 2017-02-01 11:52:02 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:52:02 UTC], ["updated_at", 2017-02-01 11:52:02 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "7e3a9571-38e6-4cd6-bfb2-e4f628f85b1e"], ["action", "create"], ["created_at", 2017-02-01 11:52:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:52:02 UTC], ["updated_at", 2017-02-01 11:52:02 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 11:52:02 UTC], ["id", 4]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "740f62e0-aff1-4b29-a615-471050698882"], ["action", "update"], ["created_at", 2017-02-01 11:52:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:52:02 UTC], ["updated_at", 2017-02-01 11:52:02 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "ac4349b0-2ac3-41fb-8224-5260be551b02"], ["action", "destroy"], ["created_at", 2017-02-01 11:52:02 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:52:02 UTC], ["updated_at", 2017-02-01 11:52:02 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "ea4182cd-73d7-4d7f-861c-efd2af6e3689"], ["action", "create"], ["created_at", 2017-02-01 11:52:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:52:02 UTC], ["updated_at", 2017-02-01 11:52:02 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaTrue"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "bd47be2b-2e6b-4c70-af2e-32667c84737a"], ["action", "create"], ["created_at", 2017-02-01 11:52:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (4.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:52:02 UTC], ["updated_at", 2017-02-01 11:52:02 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaSymbol"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "c03f8244-d4f8-4df4-abe4-3972e909eac0"], ["action", "create"], ["created_at", 2017-02-01 11:52:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:52:02 UTC], ["updated_at", 2017-02-01 11:52:02 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaProc"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "5577aa7a-74ec-4806-8b70-7225f04df424"], ["action", "create"], ["created_at", 2017-02-01 11:52:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:52:02 UTC], ["updated_at", 2017-02-01 11:52:02 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 11:52:02 UTC], ["updated_at", 2017-02-01 11:52:02 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 10], ["subject_type", "Models::UserOnly"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "2713fd3e-9a48-4cbb-932f-3006da259911"], ["action", "create"], ["created_at", 2017-02-01 11:52:02 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-01 11:52:02 UTC], ["updated_at", 2017-02-01 11:52:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-01 11:52:02 UTC], ["updated_at", 2017-02-01 11:52:02 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "Models::UserWithCompany"], ["subject_id", 12], ["parent_type", "Models::Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "3aeff870-f607-430a-82d1-4f58d0b0cfa8"], ["action", "create"], ["created_at", 2017-02-01 11:52:02 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::Company Load (1.0ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (11.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (46.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (18.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (5.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 18:47:31 UTC], ["updated_at", 2017-02-01 18:47:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "a05a9462-d98d-4b26-b9de-c0bb734a1f5a"], ["created_at", 2017-02-01 18:47:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 18:47:31 UTC], ["updated_at", 2017-02-01 18:47:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 18:47:31 UTC], ["updated_at", 2017-02-01 18:47:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 18:47:31 UTC], ["updated_at", 2017-02-01 18:47:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 18:47:31 UTC], ["updated_at", 2017-02-01 18:47:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-01 18:47:31 UTC], ["updated_at", 2017-02-01 18:47:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.6ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (25.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (22.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (11.5ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (12.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 18:50:36 UTC], ["updated_at", 2017-02-01 18:50:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.9ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "947166e9-b8a0-4dd1-a8fb-9e2f94664e6b"], ["created_at", 2017-02-01 18:50:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 18:50:36 UTC], ["updated_at", 2017-02-01 18:50:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 18:50:36 UTC], ["updated_at", 2017-02-01 18:50:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 18:50:36 UTC], ["updated_at", 2017-02-01 18:50:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 18:50:36 UTC], ["updated_at", 2017-02-01 18:50:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-01 18:50:36 UTC], ["updated_at", 2017-02-01 18:50:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (15.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (28.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (9.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (39.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-01 18:51:08 UTC], ["updated_at", 2017-02-01 18:51:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "3d63fad8-df33-407e-83e1-6fefbc6cec71"], ["created_at", 2017-02-01 18:51:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 18:51:08 UTC], ["updated_at", 2017-02-01 18:51:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 18:51:08 UTC], ["updated_at", 2017-02-01 18:51:08 UTC]]
  [1m[35mSQL (6.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "fa603f3c-46c3-48dc-9582-1763c646147a"], ["action", "create"], ["created_at", 2017-02-01 18:51:08 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 18:51:08 UTC], ["updated_at", 2017-02-01 18:51:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.0ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-01 18:51:08 UTC], ["id", 4]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "5c06fb3b-223b-4917-be6d-df8993cf49f5"], ["action", "update"], ["created_at", 2017-02-01 18:51:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 18:51:08 UTC], ["updated_at", 2017-02-01 18:51:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "626c5b19-090b-4b85-8d18-9eb349419e00"], ["action", "destroy"], ["created_at", 2017-02-01 18:51:08 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 18:51:08 UTC], ["updated_at", 2017-02-01 18:51:08 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "449b14ef-e991-425f-a23b-2685f0000231"], ["action", "create"], ["created_at", 2017-02-01 18:51:08 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 18:51:09 UTC], ["updated_at", 2017-02-01 18:51:09 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaTrue"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "b55e65e6-b5ab-4604-a341-b0f490f029bd"], ["action", "create"], ["created_at", 2017-02-01 18:51:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 18:51:09 UTC], ["updated_at", 2017-02-01 18:51:09 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaSymbol"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "71732afc-92dc-4e87-b760-fee2010b52fa"], ["action", "create"], ["created_at", 2017-02-01 18:51:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 18:51:09 UTC], ["updated_at", 2017-02-01 18:51:09 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaProc"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "26bb74dd-1e2d-4949-8fa6-2dc47c99f860"], ["action", "create"], ["created_at", 2017-02-01 18:51:09 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 18:51:09 UTC], ["updated_at", 2017-02-01 18:51:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-01 18:51:09 UTC], ["updated_at", 2017-02-01 18:51:09 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 10], ["subject_type", "Models::UserOnly"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "60e54fe0-47ab-4b9e-b7ec-432cb7516c2e"], ["action", "create"], ["created_at", 2017-02-01 18:51:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-01 18:51:09 UTC], ["updated_at", 2017-02-01 18:51:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-01 18:51:09 UTC], ["updated_at", 2017-02-01 18:51:09 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "Models::UserWithCompany"], ["subject_id", 12], ["parent_type", "Models::Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "e4c46e4c-dc63-436b-8964-375e81169683"], ["action", "create"], ["created_at", 2017-02-01 18:51:09 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::Company Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (24.9ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (67.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (9.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (15.4ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (40.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (8.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (47.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (49.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 14:43:38 UTC], ["updated_at", 2017-02-02 14:43:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (12.6ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "26ef4014-5fe4-45fc-89d4-fdb11583c7eb"], ["created_at", 2017-02-02 14:43:38 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:43:38 UTC], ["updated_at", 2017-02-02 14:43:38 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:43:38 UTC], ["updated_at", 2017-02-02 14:43:38 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "b6cf4fdc-cfb4-4d52-a411-34f8784b1ff1"], ["action", "create"], ["created_at", 2017-02-02 14:43:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:43:38 UTC], ["updated_at", 2017-02-02 14:43:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 14:43:38 UTC], ["id", 4]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "e7d139e5-f088-4a64-8742-25b316b6e716"], ["action", "update"], ["created_at", 2017-02-02 14:43:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:43:38 UTC], ["updated_at", 2017-02-02 14:43:38 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (3.1ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "674171e3-f86b-4062-85b0-ee52d39b6c27"], ["action", "destroy"], ["created_at", 2017-02-02 14:43:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:43:38 UTC], ["updated_at", 2017-02-02 14:43:38 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "3f7f9757-5e66-4fb7-92df-3d3e079d1871"], ["action", "create"], ["created_at", 2017-02-02 14:43:38 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:43:38 UTC], ["updated_at", 2017-02-02 14:43:38 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaTrue"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "21a3d088-5c20-4955-addc-f419c61b3a7c"], ["action", "create"], ["created_at", 2017-02-02 14:43:38 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:43:38 UTC], ["updated_at", 2017-02-02 14:43:38 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaSymbol"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "f3a9fb6d-3051-47a2-92b7-b3e4174980a0"], ["action", "create"], ["created_at", 2017-02-02 14:43:38 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:43:38 UTC], ["updated_at", 2017-02-02 14:43:38 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaProc"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "dba3a879-0f4b-4bc6-adc4-1039078a3b93"], ["action", "create"], ["created_at", 2017-02-02 14:43:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:43:38 UTC], ["updated_at", 2017-02-02 14:43:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:43:38 UTC], ["updated_at", 2017-02-02 14:43:38 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 10], ["subject_type", "Models::UserOnly"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "bd2a3aef-b6d3-4151-8676-0485e9e57b92"], ["action", "create"], ["created_at", 2017-02-02 14:43:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.9ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 14:43:38 UTC], ["updated_at", 2017-02-02 14:43:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-02 14:43:38 UTC], ["updated_at", 2017-02-02 14:43:38 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "Models::UserWithCompany"], ["subject_id", 12], ["parent_type", "Models::Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "d55852e6-dfc0-4ebd-8ca1-5c453e10f100"], ["action", "create"], ["created_at", 2017-02-02 14:43:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::Company Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (28.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (29.8ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (7.5ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (27.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 14:44:02 UTC], ["updated_at", 2017-02-02 14:44:02 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "379d110f-925e-4e57-8a87-70915ea1379c"], ["created_at", 2017-02-02 14:44:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:44:02 UTC], ["updated_at", 2017-02-02 14:44:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:44:02 UTC], ["updated_at", 2017-02-02 14:44:02 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "998c8e02-d730-4a80-91cf-b14134c4660d"], ["action", "create"], ["created_at", 2017-02-02 14:44:02 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:44:02 UTC], ["updated_at", 2017-02-02 14:44:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 14:44:02 UTC], ["id", 4]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "31254400-a693-44ec-8be9-bce9e1b5d837"], ["action", "update"], ["created_at", 2017-02-02 14:44:02 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:44:02 UTC], ["updated_at", 2017-02-02 14:44:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "27d895f4-86bc-4774-acfb-bb5604d490ae"], ["action", "destroy"], ["created_at", 2017-02-02 14:44:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:44:02 UTC], ["updated_at", 2017-02-02 14:44:02 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "6bb9b266-ccce-4383-b79f-4059ccae7938"], ["action", "create"], ["created_at", 2017-02-02 14:44:02 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:44:02 UTC], ["updated_at", 2017-02-02 14:44:02 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaTrue"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "1e6dc738-e9d3-4383-b3f3-12ec1a5b0897"], ["action", "create"], ["created_at", 2017-02-02 14:44:02 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:44:02 UTC], ["updated_at", 2017-02-02 14:44:02 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaSymbol"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "b7b22988-ee10-4d6d-b0ec-5274e5e9acf5"], ["action", "create"], ["created_at", 2017-02-02 14:44:02 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:44:02 UTC], ["updated_at", 2017-02-02 14:44:02 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaProc"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "31d1440b-921a-4360-8e6f-4f55c73483b9"], ["action", "create"], ["created_at", 2017-02-02 14:44:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:44:02 UTC], ["updated_at", 2017-02-02 14:44:02 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:44:02 UTC], ["updated_at", 2017-02-02 14:44:02 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 10], ["subject_type", "Models::UserOnly"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "2e4b378a-0d5e-447a-8d1c-b56de2832d99"], ["action", "create"], ["created_at", 2017-02-02 14:44:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 14:44:02 UTC], ["updated_at", 2017-02-02 14:44:02 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-02 14:44:02 UTC], ["updated_at", 2017-02-02 14:44:02 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "Models::UserWithCompany"], ["subject_id", 12], ["parent_type", "Models::Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "05693fc6-d160-4969-9462-6d162969c90b"], ["action", "create"], ["created_at", 2017-02-02 14:44:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::Company Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (26.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (8.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (33.5ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (12.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (12.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"users"=>{"email"=>"Email", "name"=>"buja"}}
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 14:44:42 UTC], ["updated_at", 2017-02-02 14:44:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "5f8b0b8d-74b2-4369-a750-78ef6914adf8"], ["created_at", 2017-02-02 14:44:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:44:42 UTC], ["updated_at", 2017-02-02 14:44:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:44:42 UTC], ["updated_at", 2017-02-02 14:44:42 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "78f57195-e2a2-41fc-bb06-37600b2f3ce2"], ["action", "create"], ["created_at", 2017-02-02 14:44:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:44:42 UTC], ["updated_at", 2017-02-02 14:44:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 14:44:42 UTC], ["id", 4]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "d7bd267d-fd47-43e6-ac84-43f4db569c18"], ["action", "update"], ["created_at", 2017-02-02 14:44:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:44:42 UTC], ["updated_at", 2017-02-02 14:44:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "440f83c0-9b0e-4e64-b755-6cd71267b3a1"], ["action", "destroy"], ["created_at", 2017-02-02 14:44:42 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:44:42 UTC], ["updated_at", 2017-02-02 14:44:42 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "4493397b-c2b8-4a07-83aa-1afedcccbf5d"], ["action", "create"], ["created_at", 2017-02-02 14:44:42 UTC]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:44:42 UTC], ["updated_at", 2017-02-02 14:44:42 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaTrue"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "12f463b3-71d4-4240-bc9b-f22279fb403f"], ["action", "create"], ["created_at", 2017-02-02 14:44:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:44:42 UTC], ["updated_at", 2017-02-02 14:44:42 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaSymbol"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "3ba62bb1-ec57-4e5c-9147-4e319c6da870"], ["action", "create"], ["created_at", 2017-02-02 14:44:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:44:42 UTC], ["updated_at", 2017-02-02 14:44:42 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaProc"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "035b3930-fcda-4e10-81b8-03423d6c421f"], ["action", "create"], ["created_at", 2017-02-02 14:44:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:44:42 UTC], ["updated_at", 2017-02-02 14:44:42 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:44:42 UTC], ["updated_at", 2017-02-02 14:44:42 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 10], ["subject_type", "Models::UserOnly"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "87a2a20e-4283-4eab-b03d-a2740dbe9cc8"], ["action", "create"], ["created_at", 2017-02-02 14:44:42 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (7.7ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 14:44:42 UTC], ["updated_at", 2017-02-02 14:44:42 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (2.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-02 14:44:42 UTC], ["updated_at", 2017-02-02 14:44:42 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "Models::UserWithCompany"], ["subject_id", 12], ["parent_type", "Models::Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "ea803fcd-d7e5-4b74-a8af-c055548d0f21"], ["action", "create"], ["created_at", 2017-02-02 14:44:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::Company Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.5ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (28.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (26.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 14:45:33 UTC], ["updated_at", 2017-02-02 14:45:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (7.5ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "e7e11326-b506-4884-bfba-421c2c7cc72b"], ["created_at", 2017-02-02 14:45:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:45:33 UTC], ["updated_at", 2017-02-02 14:45:33 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:45:33 UTC], ["updated_at", 2017-02-02 14:45:33 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "b5195e53-ca95-4c7b-87b9-f2610cae89ea"], ["action", "create"], ["created_at", 2017-02-02 14:45:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:45:33 UTC], ["updated_at", 2017-02-02 14:45:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 14:45:33 UTC], ["id", 4]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "b123b219-8e92-46b8-a6b5-df2a366ff043"], ["action", "update"], ["created_at", 2017-02-02 14:45:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:45:33 UTC], ["updated_at", 2017-02-02 14:45:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "a1f948c1-25fc-43f4-ac8f-21b714af42cb"], ["action", "destroy"], ["created_at", 2017-02-02 14:45:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:45:33 UTC], ["updated_at", 2017-02-02 14:45:33 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "d553284d-da8c-43de-9d21-e4afc8cb00e0"], ["action", "create"], ["created_at", 2017-02-02 14:45:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:45:33 UTC], ["updated_at", 2017-02-02 14:45:33 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaTrue"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "93dea96f-6341-4292-b0ce-d7c18054961f"], ["action", "create"], ["created_at", 2017-02-02 14:45:33 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:45:33 UTC], ["updated_at", 2017-02-02 14:45:33 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaSymbol"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "a40c39b0-e12f-4c26-8b49-d7eff7c3f9b8"], ["action", "create"], ["created_at", 2017-02-02 14:45:33 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:45:33 UTC], ["updated_at", 2017-02-02 14:45:33 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaProc"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "7977083c-300b-4e8b-98de-d1beae843e39"], ["action", "create"], ["created_at", 2017-02-02 14:45:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:45:33 UTC], ["updated_at", 2017-02-02 14:45:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:45:33 UTC], ["updated_at", 2017-02-02 14:45:33 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 10], ["subject_type", "Models::UserOnly"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "c10885cd-7e54-4c89-9d3c-9fa0bf542430"], ["action", "create"], ["created_at", 2017-02-02 14:45:33 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 14:45:33 UTC], ["updated_at", 2017-02-02 14:45:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-02 14:45:33 UTC], ["updated_at", 2017-02-02 14:45:33 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "Models::UserWithCompany"], ["subject_id", 12], ["parent_type", "Models::Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "74a0ce28-2921-42e4-b1e2-f68e070b1b29"], ["action", "create"], ["created_at", 2017-02-02 14:45:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::Company Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (28.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (13.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (18.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 14:45:49 UTC], ["updated_at", 2017-02-02 14:45:49 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"users"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mModels::User Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 14:45:49 UTC], ["updated_at", 2017-02-02 14:45:49 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "489ddb75-a791-4f9b-adbb-80611478a545"], ["created_at", 2017-02-02 14:45:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:45:49 UTC], ["updated_at", 2017-02-02 14:45:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:45:49 UTC], ["updated_at", 2017-02-02 14:45:49 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "153b1d1f-3344-4531-8001-69247ef540ac"], ["action", "create"], ["created_at", 2017-02-02 14:45:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:45:50 UTC], ["updated_at", 2017-02-02 14:45:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 14:45:50 UTC], ["id", 5]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "a1d5f757-ec57-41a8-bcc0-9f269674b928"], ["action", "update"], ["created_at", 2017-02-02 14:45:50 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:45:50 UTC], ["updated_at", 2017-02-02 14:45:50 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 6]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "ab155ac2-8480-44e0-8efb-1f37f8214130"], ["action", "destroy"], ["created_at", 2017-02-02 14:45:50 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:45:50 UTC], ["updated_at", 2017-02-02 14:45:50 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "3f14196a-17fb-4896-b09a-d84d297ca73a"], ["action", "create"], ["created_at", 2017-02-02 14:45:50 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:45:50 UTC], ["updated_at", 2017-02-02 14:45:50 UTC]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaTrue"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "3187aecb-dc76-4fce-bbed-ef1bfb04cf9c"], ["action", "create"], ["created_at", 2017-02-02 14:45:50 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:45:50 UTC], ["updated_at", 2017-02-02 14:45:50 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaSymbol"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "8d672f8e-e77e-4d81-a852-ee47b59e8e53"], ["action", "create"], ["created_at", 2017-02-02 14:45:50 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:45:50 UTC], ["updated_at", 2017-02-02 14:45:50 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaProc"], ["subject_id", 10], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "27863cb8-a62a-4045-a8ec-4fd4dcc053f8"], ["action", "create"], ["created_at", 2017-02-02 14:45:50 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:45:50 UTC], ["updated_at", 2017-02-02 14:45:50 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:45:50 UTC], ["updated_at", 2017-02-02 14:45:50 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 11], ["subject_type", "Models::UserOnly"], ["subject_id", 12], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "17d70fcd-323f-4039-b2d6-e996a170368d"], ["action", "create"], ["created_at", 2017-02-02 14:45:50 UTC]]
  [1m[35m (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 14:45:50 UTC], ["updated_at", 2017-02-02 14:45:50 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-02 14:45:50 UTC], ["updated_at", 2017-02-02 14:45:50 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "Models::UserWithCompany"], ["subject_id", 13], ["parent_type", "Models::Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "fe1a911e-4b42-43af-a76f-ebeaa1bdec74"], ["action", "create"], ["created_at", 2017-02-02 14:45:50 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::Company Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.7ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (25.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (6.8ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 14:46:03 UTC], ["updated_at", 2017-02-02 14:46:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"users"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mModels::User Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Completed 400 Bad Request in 2ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 14:46:03 UTC], ["updated_at", 2017-02-02 14:46:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "480bc0f3-212b-483c-825d-088795a9abc0"], ["created_at", 2017-02-02 14:46:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:46:03 UTC], ["updated_at", 2017-02-02 14:46:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:46:03 UTC], ["updated_at", 2017-02-02 14:46:03 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "127dc33a-6ecc-44e1-994e-ae5b0ddb15f3"], ["action", "create"], ["created_at", 2017-02-02 14:46:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:46:03 UTC], ["updated_at", 2017-02-02 14:46:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 14:46:03 UTC], ["id", 5]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "27c777c5-38c3-44f7-bad9-01145babc199"], ["action", "update"], ["created_at", 2017-02-02 14:46:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:46:03 UTC], ["updated_at", 2017-02-02 14:46:03 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 6]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "facfe6f8-5399-4923-9961-9a0c2d4bcb9b"], ["action", "destroy"], ["created_at", 2017-02-02 14:46:03 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:46:03 UTC], ["updated_at", 2017-02-02 14:46:03 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "f84f28a8-9c21-4706-a166-2509634420e7"], ["action", "create"], ["created_at", 2017-02-02 14:46:03 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:46:03 UTC], ["updated_at", 2017-02-02 14:46:03 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaTrue"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "7a1b7a24-0b5d-43e9-bf92-c2a883177f77"], ["action", "create"], ["created_at", 2017-02-02 14:46:03 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:46:03 UTC], ["updated_at", 2017-02-02 14:46:03 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaSymbol"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "763c9217-9347-459a-944b-fa23c2538bad"], ["action", "create"], ["created_at", 2017-02-02 14:46:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (3.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:46:03 UTC], ["updated_at", 2017-02-02 14:46:03 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaProc"], ["subject_id", 10], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "98e09797-d2eb-4208-bb1b-562b5fb80e61"], ["action", "create"], ["created_at", 2017-02-02 14:46:03 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:46:03 UTC], ["updated_at", 2017-02-02 14:46:03 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:46:03 UTC], ["updated_at", 2017-02-02 14:46:03 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 11], ["subject_type", "Models::UserOnly"], ["subject_id", 12], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "ea44f9f3-d7ed-49fc-882a-b1b84dc7cada"], ["action", "create"], ["created_at", 2017-02-02 14:46:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 14:46:03 UTC], ["updated_at", 2017-02-02 14:46:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-02 14:46:03 UTC], ["updated_at", 2017-02-02 14:46:03 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "Models::UserWithCompany"], ["subject_id", 13], ["parent_type", "Models::Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "5907a9ee-e7a1-4f5f-8268-0af2ef76fc9b"], ["action", "create"], ["created_at", 2017-02-02 14:46:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::Company Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (26.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (27.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (18.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 14:46:18 UTC], ["updated_at", 2017-02-02 14:46:18 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mModels::User Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 14:46:18 UTC], ["updated_at", 2017-02-02 14:46:18 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 1], ["subject_type", "Models::User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "96cbdaf8-1cc4-4682-9c97-ae530acd529d"], ["action", "create"], ["created_at", 2017-02-02 14:46:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 25ms (Views: 0.2ms | ActiveRecord: 2.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mModels::User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 14:46:45 UTC], ["updated_at", 2017-02-02 14:46:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "24a35958-e67e-4300-92a6-36d7a5a07cd4"], ["created_at", 2017-02-02 14:46:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:46:45 UTC], ["updated_at", 2017-02-02 14:46:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:46:45 UTC], ["updated_at", 2017-02-02 14:46:45 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "8cf02647-92bb-45ac-9274-7289563c4139"], ["action", "create"], ["created_at", 2017-02-02 14:46:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:46:46 UTC], ["updated_at", 2017-02-02 14:46:46 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 14:46:46 UTC], ["id", 6]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "793b92f8-7ebb-4e9d-a0a4-a4791ff3d0cf"], ["action", "update"], ["created_at", 2017-02-02 14:46:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:46:46 UTC], ["updated_at", 2017-02-02 14:46:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 7]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::User"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "642180f1-c509-4028-b714-46650012018a"], ["action", "destroy"], ["created_at", 2017-02-02 14:46:46 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:46:46 UTC], ["updated_at", 2017-02-02 14:46:46 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "Models::UserOnly"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "9badc9d1-30a2-4ff3-bd20-c97e330ca534"], ["action", "create"], ["created_at", 2017-02-02 14:46:46 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:46:46 UTC], ["updated_at", 2017-02-02 14:46:46 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaTrue"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "5e92fe62-72d2-4685-a73a-7c7dc56a3de3"], ["action", "create"], ["created_at", 2017-02-02 14:46:46 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:46:46 UTC], ["updated_at", 2017-02-02 14:46:46 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaSymbol"], ["subject_id", 10], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "7f66a672-13e4-4e8c-aafd-72e82651be98"], ["action", "create"], ["created_at", 2017-02-02 14:46:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:46:46 UTC], ["updated_at", 2017-02-02 14:46:46 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "Models::UserMetaProc"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "eaa4674f-af02-4368-bc3a-2e8219f4afae"], ["action", "create"], ["created_at", 2017-02-02 14:46:46 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:46:46 UTC], ["updated_at", 2017-02-02 14:46:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:46:46 UTC], ["updated_at", 2017-02-02 14:46:46 UTC]]
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "Models::User"], ["author_id", 12], ["subject_type", "Models::UserOnly"], ["subject_id", 13], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "abc636d6-cfcb-439e-b82f-8a15e49cb3b6"], ["action", "create"], ["created_at", 2017-02-02 14:46:46 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.9ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::User Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 14:46:46 UTC], ["updated_at", 2017-02-02 14:46:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-02 14:46:46 UTC], ["updated_at", 2017-02-02 14:46:46 UTC]]
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "Models::UserWithCompany"], ["subject_id", 14], ["parent_type", "Models::Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "66735a63-e3d0-421e-99de-e0da631978c2"], ["action", "create"], ["created_at", 2017-02-02 14:46:46 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mModels::Company Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (54.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (4.4ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (7.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (13.6ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (13.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (14.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 14:48:19 UTC], ["updated_at", 2017-02-02 14:48:19 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 14:48:19 UTC], ["updated_at", 2017-02-02 14:48:19 UTC]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "93afc67b-cb32-4cd0-9ae6-596eb9e414af"], ["action", "create"], ["created_at", 2017-02-02 14:48:19 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 34ms (Views: 0.2ms | ActiveRecord: 5.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 14:48:19 UTC], ["updated_at", 2017-02-02 14:48:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "2a4904a3-939f-42c8-8db1-3faa79a376aa"], ["created_at", 2017-02-02 14:48:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:48:19 UTC], ["updated_at", 2017-02-02 14:48:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:48:19 UTC], ["updated_at", 2017-02-02 14:48:19 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "67c07952-9d87-4c6d-b148-8b39138804af"], ["action", "create"], ["created_at", 2017-02-02 14:48:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:48:19 UTC], ["updated_at", 2017-02-02 14:48:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 14:48:19 UTC], ["id", 6]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "eb9ea881-5191-49cd-b066-d3076f0809b8"], ["action", "update"], ["created_at", 2017-02-02 14:48:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:48:19 UTC], ["updated_at", 2017-02-02 14:48:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 7]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "238d9a84-29a6-41f9-bbec-35d7322501e1"], ["action", "destroy"], ["created_at", 2017-02-02 14:48:19 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:48:19 UTC], ["updated_at", 2017-02-02 14:48:19 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "4eaf6878-3b03-462e-be20-1756cf064802"], ["action", "create"], ["created_at", 2017-02-02 14:48:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:48:20 UTC], ["updated_at", 2017-02-02 14:48:20 UTC]]
  [1m[35mSQL (2.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "b1a5b7f4-3b38-4ca9-87ad-270cc0239465"], ["action", "create"], ["created_at", 2017-02-02 14:48:20 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:48:20 UTC], ["updated_at", 2017-02-02 14:48:20 UTC]]
  [1m[35mSQL (3.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 10], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "01154b91-2e79-49c0-a821-3584146d94a1"], ["action", "create"], ["created_at", 2017-02-02 14:48:20 UTC]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:48:20 UTC], ["updated_at", 2017-02-02 14:48:20 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "9a919cbe-7844-4e9c-bdcc-bba44d3f6846"], ["action", "create"], ["created_at", 2017-02-02 14:48:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:48:20 UTC], ["updated_at", 2017-02-02 14:48:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:48:20 UTC], ["updated_at", 2017-02-02 14:48:20 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 12], ["subject_type", "UserOnly"], ["subject_id", 13], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "e6060224-f941-4530-a472-fa063150e173"], ["action", "create"], ["created_at", 2017-02-02 14:48:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.9ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (14.0ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 14:48:20 UTC], ["updated_at", 2017-02-02 14:48:20 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-02 14:48:20 UTC], ["updated_at", 2017-02-02 14:48:20 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "418a1816-389a-457a-9833-13c4aa9de515"], ["action", "create"], ["created_at", 2017-02-02 14:48:20 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.7ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (28.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (7.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 14:48:48 UTC], ["updated_at", 2017-02-02 14:48:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 14:48:48 UTC], ["updated_at", 2017-02-02 14:48:48 UTC]]
  [1m[35mSQL (17.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "80374268-21fb-457e-a341-4c8dc9de0513"], ["action", "create"], ["created_at", 2017-02-02 14:48:48 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 50ms (Views: 0.2ms | ActiveRecord: 19.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 14:48:49 UTC], ["updated_at", 2017-02-02 14:48:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "90392334-db95-423a-9d45-1a7eaa29ffe4"], ["created_at", 2017-02-02 14:48:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:48:49 UTC], ["updated_at", 2017-02-02 14:48:49 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:48:49 UTC], ["updated_at", 2017-02-02 14:48:49 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "5dd0920b-2dea-4318-aabd-71848f1d015f"], ["action", "create"], ["created_at", 2017-02-02 14:48:49 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:48:49 UTC], ["updated_at", 2017-02-02 14:48:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 14:48:49 UTC], ["id", 6]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "3defa200-167f-449f-86f6-133a2d237e51"], ["action", "update"], ["created_at", 2017-02-02 14:48:49 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:48:49 UTC], ["updated_at", 2017-02-02 14:48:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 7]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "71b4f911-dedd-4055-be3c-96e287db5e20"], ["action", "destroy"], ["created_at", 2017-02-02 14:48:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:48:49 UTC], ["updated_at", 2017-02-02 14:48:49 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "36dcc41e-85bc-44f9-b576-cb44e456923e"], ["action", "create"], ["created_at", 2017-02-02 14:48:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:48:49 UTC], ["updated_at", 2017-02-02 14:48:49 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "3eac6f6d-6b1c-4fa7-ad6b-c999c6208dd1"], ["action", "create"], ["created_at", 2017-02-02 14:48:49 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:48:49 UTC], ["updated_at", 2017-02-02 14:48:49 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 10], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "87a2ccc6-8a98-4286-a854-4b3cb5ac223c"], ["action", "create"], ["created_at", 2017-02-02 14:48:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:48:49 UTC], ["updated_at", 2017-02-02 14:48:49 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "33803bb2-bffd-4e7c-9f1c-d5835894c4b4"], ["action", "create"], ["created_at", 2017-02-02 14:48:49 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:48:49 UTC], ["updated_at", 2017-02-02 14:48:49 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:48:49 UTC], ["updated_at", 2017-02-02 14:48:49 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 12], ["subject_type", "UserOnly"], ["subject_id", 13], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "b4ddf222-47ae-4205-9ef9-841eca2577c8"], ["action", "create"], ["created_at", 2017-02-02 14:48:49 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 14:48:49 UTC], ["updated_at", 2017-02-02 14:48:49 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-02 14:48:49 UTC], ["updated_at", 2017-02-02 14:48:49 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "4564b085-66c7-409d-9247-10f247cc3228"], ["action", "create"], ["created_at", 2017-02-02 14:48:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.2ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (25.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (8.1ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (21.5ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 14:49:25 UTC], ["updated_at", 2017-02-02 14:49:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 14:49:25 UTC], ["updated_at", 2017-02-02 14:49:25 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "b49e6ec5-193e-401c-aa16-6064ea60f63d"], ["action", "create"], ["created_at", 2017-02-02 14:49:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 26ms (Views: 0.2ms | ActiveRecord: 2.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 14:49:25 UTC], ["updated_at", 2017-02-02 14:49:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "b219c6e1-f031-45c1-a797-f673e9d94644"], ["created_at", 2017-02-02 14:49:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:49:25 UTC], ["updated_at", 2017-02-02 14:49:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:49:25 UTC], ["updated_at", 2017-02-02 14:49:25 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "bec6c91f-971f-43f8-985c-80e0d72369b9"], ["action", "create"], ["created_at", 2017-02-02 14:49:25 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:49:25 UTC], ["updated_at", 2017-02-02 14:49:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 14:49:25 UTC], ["id", 6]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "9b345248-b646-4ffe-8c4a-3a710c896ccb"], ["action", "update"], ["created_at", 2017-02-02 14:49:25 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:49:25 UTC], ["updated_at", 2017-02-02 14:49:25 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 7]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "0aec3a68-599d-408a-b8fe-808b40026e1d"], ["action", "destroy"], ["created_at", 2017-02-02 14:49:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:49:25 UTC], ["updated_at", 2017-02-02 14:49:25 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "534ae807-af37-4ae0-ba12-895f6d350568"], ["action", "create"], ["created_at", 2017-02-02 14:49:25 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:49:25 UTC], ["updated_at", 2017-02-02 14:49:25 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "b190b6b4-e35e-44b0-a77d-6ee83fab0a5e"], ["action", "create"], ["created_at", 2017-02-02 14:49:25 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:49:26 UTC], ["updated_at", 2017-02-02 14:49:26 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 10], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "9bc99987-c29b-4480-a10b-912264d25019"], ["action", "create"], ["created_at", 2017-02-02 14:49:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:49:26 UTC], ["updated_at", 2017-02-02 14:49:26 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "64edd9c3-1058-4543-9c2b-a63c8fff906c"], ["action", "create"], ["created_at", 2017-02-02 14:49:26 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:49:26 UTC], ["updated_at", 2017-02-02 14:49:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 14:49:26 UTC], ["updated_at", 2017-02-02 14:49:26 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 12], ["subject_type", "UserOnly"], ["subject_id", 13], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "73430cde-5172-405e-bf81-7e1a4728ae33"], ["action", "create"], ["created_at", 2017-02-02 14:49:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 14:49:26 UTC], ["updated_at", 2017-02-02 14:49:26 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-02 14:49:26 UTC], ["updated_at", 2017-02-02 14:49:26 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "94b8dd9c-9f57-4823-83c4-2cb6a05cbb33"], ["action", "create"], ["created_at", 2017-02-02 14:49:26 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (17.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (36.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (11.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.3ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (8.6ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (14.0ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:05:14 UTC], ["updated_at", 2017-02-02 15:05:14 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 15:05:14 UTC], ["updated_at", 2017-02-02 15:05:14 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (20.1ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "22d4dc40-d318-41de-b440-09e98cc3da98"], ["created_at", 2017-02-02 15:05:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:05:14 UTC], ["updated_at", 2017-02-02 15:05:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:05:14 UTC], ["updated_at", 2017-02-02 15:05:14 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "76ae0f29-5e1b-4eb2-a92b-8a926aeec2f8"], ["action", "create"], ["created_at", 2017-02-02 15:05:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:05:14 UTC], ["updated_at", 2017-02-02 15:05:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 15:05:14 UTC], ["id", 5]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "0cd5475b-e18f-4a4b-b334-88b26c45254b"], ["action", "update"], ["created_at", 2017-02-02 15:05:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:05:14 UTC], ["updated_at", 2017-02-02 15:05:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 6]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "335798a4-242a-445e-836c-52fe733d32d4"], ["action", "destroy"], ["created_at", 2017-02-02 15:05:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:05:14 UTC], ["updated_at", 2017-02-02 15:05:14 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "7ca07fb0-5b29-4862-bdee-7871c5e0ef4b"], ["action", "create"], ["created_at", 2017-02-02 15:05:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:05:14 UTC], ["updated_at", 2017-02-02 15:05:14 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "be299158-ba63-494e-9fe2-579205ea26f7"], ["action", "create"], ["created_at", 2017-02-02 15:05:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:05:14 UTC], ["updated_at", 2017-02-02 15:05:14 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "0f15d1c1-e27b-4495-af73-dec2b04cf360"], ["action", "create"], ["created_at", 2017-02-02 15:05:14 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:05:14 UTC], ["updated_at", 2017-02-02 15:05:14 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 10], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "f5865d8c-d097-401d-8600-1c1581740090"], ["action", "create"], ["created_at", 2017-02-02 15:05:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:05:14 UTC], ["updated_at", 2017-02-02 15:05:14 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:05:14 UTC], ["updated_at", 2017-02-02 15:05:14 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 11], ["subject_type", "UserOnly"], ["subject_id", 12], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "557be25a-40bc-4a9d-934a-cbd54b9bc97b"], ["action", "create"], ["created_at", 2017-02-02 15:05:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.1ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 15:05:14 UTC], ["updated_at", 2017-02-02 15:05:14 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-02 15:05:14 UTC], ["updated_at", 2017-02-02 15:05:14 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 13], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "f9455a4c-a758-4174-9e1e-30c84fe0a289"], ["action", "create"], ["created_at", 2017-02-02 15:05:14 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (4.4ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (13.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (15.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:05:38 UTC], ["updated_at", 2017-02-02 15:05:38 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 15:05:38 UTC], ["updated_at", 2017-02-02 15:05:38 UTC]]
  [1m[35m (3.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "02793518-f8b5-4ba0-a950-3cbe1797ed31"], ["created_at", 2017-02-02 15:05:38 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:05:38 UTC], ["updated_at", 2017-02-02 15:05:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:05:38 UTC], ["updated_at", 2017-02-02 15:05:38 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "b18e8592-256f-499a-b92b-caa46a780f96"], ["action", "create"], ["created_at", 2017-02-02 15:05:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:05:38 UTC], ["updated_at", 2017-02-02 15:05:38 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 15:05:38 UTC], ["id", 5]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "24f6bfcf-aac8-44d8-81ab-78abb59fd483"], ["action", "update"], ["created_at", 2017-02-02 15:05:38 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:05:38 UTC], ["updated_at", 2017-02-02 15:05:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 6]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "511cc085-219a-4a52-85f2-7f2f32cb8ef0"], ["action", "destroy"], ["created_at", 2017-02-02 15:05:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (2.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:05:38 UTC], ["updated_at", 2017-02-02 15:05:38 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "125d313b-f7f1-4f0e-b92d-d2a1e9bf4c84"], ["action", "create"], ["created_at", 2017-02-02 15:05:38 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:05:38 UTC], ["updated_at", 2017-02-02 15:05:38 UTC]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "2cfe7326-0020-4527-938d-33c0744da48d"], ["action", "create"], ["created_at", 2017-02-02 15:05:38 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:05:38 UTC], ["updated_at", 2017-02-02 15:05:38 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "9ecf3188-d47c-4277-a9b6-32ffc3846ef7"], ["action", "create"], ["created_at", 2017-02-02 15:05:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:05:38 UTC], ["updated_at", 2017-02-02 15:05:38 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 10], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "5228e3fb-2084-44af-b8dc-29dd23d6291e"], ["action", "create"], ["created_at", 2017-02-02 15:05:38 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:05:38 UTC], ["updated_at", 2017-02-02 15:05:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:05:38 UTC], ["updated_at", 2017-02-02 15:05:38 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 11], ["subject_type", "UserOnly"], ["subject_id", 12], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "16cb5df4-3f8a-4a93-8807-280e68c6f14b"], ["action", "create"], ["created_at", 2017-02-02 15:05:38 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 15:05:38 UTC], ["updated_at", 2017-02-02 15:05:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-02 15:05:38 UTC], ["updated_at", 2017-02-02 15:05:38 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 13], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "bb8f336b-b630-4faa-b9da-254d756528dd"], ["action", "create"], ["created_at", 2017-02-02 15:05:38 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (27.0ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (29.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (6.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:07:10 UTC], ["updated_at", 2017-02-02 15:07:10 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:07:10 UTC], ["updated_at", 2017-02-02 15:07:10 UTC]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "59b71fa3-62f1-4c88-991b-2d0f77bd48bd"], ["action", "create"], ["created_at", 2017-02-02 15:07:10 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 63ms (Views: 0.4ms | ActiveRecord: 3.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 15:07:10 UTC], ["updated_at", 2017-02-02 15:07:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "3dac502b-8010-4784-8d39-926c3a7fc7d0"], ["created_at", 2017-02-02 15:07:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:07:10 UTC], ["updated_at", 2017-02-02 15:07:10 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:07:10 UTC], ["updated_at", 2017-02-02 15:07:10 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "6821ffd3-a40f-474d-9cb6-21db27e22086"], ["action", "create"], ["created_at", 2017-02-02 15:07:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:07:10 UTC], ["updated_at", 2017-02-02 15:07:10 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 15:07:10 UTC], ["id", 6]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "8bdebb1d-3fa9-4cb8-a4aa-cbe3fdbd5d3c"], ["action", "update"], ["created_at", 2017-02-02 15:07:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:07:10 UTC], ["updated_at", 2017-02-02 15:07:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 7]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "11b4b7b2-ffef-403f-be3c-5ba448acb8da"], ["action", "destroy"], ["created_at", 2017-02-02 15:07:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:07:10 UTC], ["updated_at", 2017-02-02 15:07:10 UTC]]
  [1m[35mSQL (3.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "d74eeffb-7e9c-4234-8f06-8047ff3b83cc"], ["action", "create"], ["created_at", 2017-02-02 15:07:10 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:07:10 UTC], ["updated_at", 2017-02-02 15:07:10 UTC]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "e39d1281-c335-4b9b-a34f-8464ddfff479"], ["action", "create"], ["created_at", 2017-02-02 15:07:10 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:07:10 UTC], ["updated_at", 2017-02-02 15:07:10 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 10], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "f6562619-8705-4c80-8751-bb8aeda23280"], ["action", "create"], ["created_at", 2017-02-02 15:07:10 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:07:10 UTC], ["updated_at", 2017-02-02 15:07:10 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "1c1592c4-22ab-443a-8492-d6ddf0b50ab6"], ["action", "create"], ["created_at", 2017-02-02 15:07:10 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.9ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:07:10 UTC], ["updated_at", 2017-02-02 15:07:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:07:10 UTC], ["updated_at", 2017-02-02 15:07:10 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 12], ["subject_type", "UserOnly"], ["subject_id", 13], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "4f79cb31-3b69-40c1-ba2e-b2016588c13a"], ["action", "create"], ["created_at", 2017-02-02 15:07:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 15:07:10 UTC], ["updated_at", 2017-02-02 15:07:10 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-02 15:07:10 UTC], ["updated_at", 2017-02-02 15:07:10 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "1d704ef1-8d10-492f-8cb3-15b223f0a263"], ["action", "create"], ["created_at", 2017-02-02 15:07:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (16.2ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (36.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (6.9ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.1ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (66.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (23.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (8.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:18:57 UTC], ["updated_at", 2017-02-02 15:18:57 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:18:57 UTC], ["updated_at", 2017-02-02 15:18:57 UTC]]
  [1m[35mSQL (18.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "66e663b8-cded-4e7d-afff-9890251ec7ab"], ["action", "create"], ["created_at", 2017-02-02 15:18:57 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 81ms (Views: 1.3ms | ActiveRecord: 22.2ms)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 15:18:57 UTC], ["updated_at", 2017-02-02 15:18:57 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "b3c8454c-fa1e-4cb8-a6ae-4d071d06738b"], ["created_at", 2017-02-02 15:18:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (3.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:18:58 UTC], ["updated_at", 2017-02-02 15:18:58 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:18:58 UTC], ["updated_at", 2017-02-02 15:18:58 UTC]]
  [1m[35mSQL (2.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "44005c6f-d045-461f-96ed-b56e76fddc31"], ["action", "create"], ["created_at", 2017-02-02 15:18:58 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (2.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:18:58 UTC], ["updated_at", 2017-02-02 15:18:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (21.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 15:18:58 UTC], ["id", 6]]
  [1m[35mSQL (5.0ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "55c6d25d-3ece-40e2-9ad0-ffb6faf954c1"], ["action", "update"], ["created_at", 2017-02-02 15:18:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:18:58 UTC], ["updated_at", 2017-02-02 15:18:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 7]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "a0f3d6d7-ec5f-4895-a04f-455676b8f569"], ["action", "destroy"], ["created_at", 2017-02-02 15:18:58 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:18:58 UTC], ["updated_at", 2017-02-02 15:18:58 UTC]]
  [1m[35mSQL (4.0ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "a7aa12e9-e03c-42af-89eb-29be3eb6e209"], ["action", "create"], ["created_at", 2017-02-02 15:18:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:18:58 UTC], ["updated_at", 2017-02-02 15:18:58 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "1f814978-a2ae-42ee-91d4-d92d958a492b"], ["action", "create"], ["created_at", 2017-02-02 15:18:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:18:58 UTC], ["updated_at", 2017-02-02 15:18:58 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 10], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "e6345428-146f-4235-a813-fff834677ba4"], ["action", "create"], ["created_at", 2017-02-02 15:18:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:18:58 UTC], ["updated_at", 2017-02-02 15:18:58 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "0e80f730-1269-4750-8bd3-256d95124805"], ["action", "create"], ["created_at", 2017-02-02 15:18:58 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:18:58 UTC], ["updated_at", 2017-02-02 15:18:58 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:18:58 UTC], ["updated_at", 2017-02-02 15:18:58 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 12], ["subject_type", "UserOnly"], ["subject_id", 13], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "916f08de-4aba-4aab-8ea0-6efc77831659"], ["action", "create"], ["created_at", 2017-02-02 15:18:58 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.0ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 15:18:58 UTC], ["updated_at", 2017-02-02 15:18:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (2.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-02 15:18:58 UTC], ["updated_at", 2017-02-02 15:18:58 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "65744b53-1cee-461d-b458-8aec7884d463"], ["action", "create"], ["created_at", 2017-02-02 15:18:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (28.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (12.6ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:19:35 UTC], ["updated_at", 2017-02-02 15:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:19:35 UTC], ["updated_at", 2017-02-02 15:19:35 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "e73763e7-0e40-46ba-aec8-a8629cb5c9ca"], ["action", "create"], ["created_at", 2017-02-02 15:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 35ms (Views: 0.2ms | ActiveRecord: 3.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 15:19:35 UTC], ["updated_at", 2017-02-02 15:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "3fc89ba3-e7f8-4b5f-9d2b-661a24d590f5"], ["created_at", 2017-02-02 15:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:19:35 UTC], ["updated_at", 2017-02-02 15:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:19:35 UTC], ["updated_at", 2017-02-02 15:19:35 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "49ea5e6a-33fe-43f1-8eb3-c32f77b4e9c1"], ["action", "create"], ["created_at", 2017-02-02 15:19:35 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:19:35 UTC], ["updated_at", 2017-02-02 15:19:35 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 15:19:36 UTC], ["id", 6]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "9b26b534-628e-4253-b2a1-16b435156437"], ["action", "update"], ["created_at", 2017-02-02 15:19:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:19:36 UTC], ["updated_at", 2017-02-02 15:19:36 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 7]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "04d23569-1642-4eb3-8c3b-522d5dbaf43a"], ["action", "destroy"], ["created_at", 2017-02-02 15:19:36 UTC]]
  [1m[35m (2.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:19:36 UTC], ["updated_at", 2017-02-02 15:19:36 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "d4a4dfe5-9ad9-4cdb-bb42-aa6b90013077"], ["action", "create"], ["created_at", 2017-02-02 15:19:36 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:19:36 UTC], ["updated_at", 2017-02-02 15:19:36 UTC]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "ff127d74-f85a-4943-8f7a-808ff0f412e8"], ["action", "create"], ["created_at", 2017-02-02 15:19:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:19:36 UTC], ["updated_at", 2017-02-02 15:19:36 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 10], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "14791528-814a-486c-b753-6c98af7da34e"], ["action", "create"], ["created_at", 2017-02-02 15:19:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:19:36 UTC], ["updated_at", 2017-02-02 15:19:36 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "5632ee2c-fbe1-4995-989f-b4542eee0260"], ["action", "create"], ["created_at", 2017-02-02 15:19:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:19:36 UTC], ["updated_at", 2017-02-02 15:19:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:19:36 UTC], ["updated_at", 2017-02-02 15:19:36 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 12], ["subject_type", "UserOnly"], ["subject_id", 13], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "1eb06942-ea5f-48c0-b71a-823376b19c0e"], ["action", "create"], ["created_at", 2017-02-02 15:19:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (7.8ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 15:19:36 UTC], ["updated_at", 2017-02-02 15:19:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-02 15:19:36 UTC], ["updated_at", 2017-02-02 15:19:36 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "c599f98e-14c8-4731-afc8-b80a2b457ca9"], ["action", "create"], ["created_at", 2017-02-02 15:19:36 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (12.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (5.1ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (13.5ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (3.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:19:45 UTC], ["updated_at", 2017-02-02 15:19:45 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:19:45 UTC], ["updated_at", 2017-02-02 15:19:45 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "0c254a3b-5a22-4006-bd2c-7c91ca1a8974"], ["action", "create"], ["created_at", 2017-02-02 15:19:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 40ms (Views: 0.2ms | ActiveRecord: 2.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 15:19:45 UTC], ["updated_at", 2017-02-02 15:19:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "c86b16eb-548d-4714-b626-93e616cf27f0"], ["created_at", 2017-02-02 15:19:45 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:19:45 UTC], ["updated_at", 2017-02-02 15:19:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:19:45 UTC], ["updated_at", 2017-02-02 15:19:45 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "3089a519-dd30-422d-9a63-65af88eaeb86"], ["action", "create"], ["created_at", 2017-02-02 15:19:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:19:45 UTC], ["updated_at", 2017-02-02 15:19:45 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 15:19:45 UTC], ["id", 6]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "2e99bc28-3148-43df-9be1-2a5c8a0ccc60"], ["action", "update"], ["created_at", 2017-02-02 15:19:45 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:19:45 UTC], ["updated_at", 2017-02-02 15:19:45 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 7]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "ea57dfd1-7a69-4a1a-b005-629476eb8859"], ["action", "destroy"], ["created_at", 2017-02-02 15:19:45 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:19:45 UTC], ["updated_at", 2017-02-02 15:19:45 UTC]]
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "638ac5dd-48aa-4ab2-92a1-810ec61f9c00"], ["action", "create"], ["created_at", 2017-02-02 15:19:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:19:45 UTC], ["updated_at", 2017-02-02 15:19:45 UTC]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "704e1ed8-4b45-4536-a947-4711279055ad"], ["action", "create"], ["created_at", 2017-02-02 15:19:45 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (2.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:19:45 UTC], ["updated_at", 2017-02-02 15:19:45 UTC]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 10], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "f3cd3351-3c2d-4b21-b83d-217d742335ff"], ["action", "create"], ["created_at", 2017-02-02 15:19:45 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:19:45 UTC], ["updated_at", 2017-02-02 15:19:45 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "ea38926c-dabc-4c04-9b73-49c4169424ee"], ["action", "create"], ["created_at", 2017-02-02 15:19:45 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:19:45 UTC], ["updated_at", 2017-02-02 15:19:45 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:19:45 UTC], ["updated_at", 2017-02-02 15:19:45 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 12], ["subject_type", "UserOnly"], ["subject_id", 13], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "c676d630-f916-4492-b7d6-784723061285"], ["action", "create"], ["created_at", 2017-02-02 15:19:45 UTC]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.7ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 15:19:45 UTC], ["updated_at", 2017-02-02 15:19:45 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (6.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-02 15:19:45 UTC], ["updated_at", 2017-02-02 15:19:45 UTC]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "bd74bd5b-045c-469f-8ca3-859752cf4610"], ["action", "create"], ["created_at", 2017-02-02 15:19:46 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.0ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (31.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (13.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:20:01 UTC], ["updated_at", 2017-02-02 15:20:01 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (6.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:20:01 UTC], ["updated_at", 2017-02-02 15:20:01 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "d4f9a5e8-b1b1-4ee1-a3fe-2ae1b7309e0d"], ["action", "create"], ["created_at", 2017-02-02 15:20:01 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 38ms (Views: 0.2ms | ActiveRecord: 3.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (8.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 15:20:01 UTC], ["updated_at", 2017-02-02 15:20:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "41fbe3d1-2173-4abc-824a-445029fe82e2"], ["created_at", 2017-02-02 15:20:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:20:01 UTC], ["updated_at", 2017-02-02 15:20:01 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:20:01 UTC], ["updated_at", 2017-02-02 15:20:01 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 5], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "3391577d-666c-4043-a249-859d1f715ad1"], ["action", "create"], ["created_at", 2017-02-02 15:20:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:20:01 UTC], ["updated_at", 2017-02-02 15:20:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 15:20:01 UTC], ["id", 6]]
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "91489734-66ec-498a-a17b-7e17cd3bb76a"], ["action", "update"], ["created_at", 2017-02-02 15:20:01 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:20:01 UTC], ["updated_at", 2017-02-02 15:20:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 7]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "acd06ab0-2103-40a3-9328-decbd815a478"], ["action", "destroy"], ["created_at", 2017-02-02 15:20:01 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:20:01 UTC], ["updated_at", 2017-02-02 15:20:01 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "f9de03b9-29e4-48b7-b161-024b65c83ebe"], ["action", "create"], ["created_at", 2017-02-02 15:20:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:20:01 UTC], ["updated_at", 2017-02-02 15:20:01 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "b0a27cfa-18e0-413e-9bc2-f69440f3ceb1"], ["action", "create"], ["created_at", 2017-02-02 15:20:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:20:01 UTC], ["updated_at", 2017-02-02 15:20:01 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 10], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "d011a116-5fcc-4e5f-bfc9-d5ea9fb3b49f"], ["action", "create"], ["created_at", 2017-02-02 15:20:01 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:20:01 UTC], ["updated_at", 2017-02-02 15:20:01 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "42950938-dc3c-4ffb-87e1-2e1a8ac134c4"], ["action", "create"], ["created_at", 2017-02-02 15:20:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:20:01 UTC], ["updated_at", 2017-02-02 15:20:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:20:01 UTC], ["updated_at", 2017-02-02 15:20:01 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 12], ["subject_type", "UserOnly"], ["subject_id", 13], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "39512cd4-3d2d-426a-b7b6-fbee907f923d"], ["action", "create"], ["created_at", 2017-02-02 15:20:01 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 15:20:01 UTC], ["updated_at", 2017-02-02 15:20:01 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-02 15:20:01 UTC], ["updated_at", 2017-02-02 15:20:01 UTC]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "a80c6fd1-51e9-4252-92da-bbbdca990a0d"], ["action", "create"], ["created_at", 2017-02-02 15:20:01 UTC]]
  [1m[35m (2.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.0ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (34.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (8.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:21:13 UTC], ["updated_at", 2017-02-02 15:21:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:21:13 UTC], ["updated_at", 2017-02-02 15:21:13 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "aa37bab7-aff9-4c8b-b9c9-9e20cfc357e4"], ["action", "create"], ["created_at", 2017-02-02 15:21:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 25ms (Views: 0.2ms | ActiveRecord: 2.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:21:13 UTC], ["updated_at", 2017-02-02 15:21:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 15:21:13 UTC], ["updated_at", 2017-02-02 15:21:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "ef9afeae-afb5-4bab-af25-e470d7fa0024"], ["created_at", 2017-02-02 15:21:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:13 UTC], ["updated_at", 2017-02-02 15:21:13 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:13 UTC], ["updated_at", 2017-02-02 15:21:13 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "26df98ae-c505-43ec-a4b9-49979f09781d"], ["action", "create"], ["created_at", 2017-02-02 15:21:13 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:13 UTC], ["updated_at", 2017-02-02 15:21:13 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 15:21:13 UTC], ["id", 7]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "45156c8d-e264-4385-be36-6493a92e438a"], ["action", "update"], ["created_at", 2017-02-02 15:21:13 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:13 UTC], ["updated_at", 2017-02-02 15:21:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "6eb165fd-dacf-4804-a8e0-c7e704364c3f"], ["action", "destroy"], ["created_at", 2017-02-02 15:21:13 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:13 UTC], ["updated_at", 2017-02-02 15:21:13 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "d3545a7d-8993-4ad6-9d59-e3d971a78d8f"], ["action", "create"], ["created_at", 2017-02-02 15:21:13 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:13 UTC], ["updated_at", 2017-02-02 15:21:13 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 10], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "57632344-c418-4892-af60-068255fa9bd8"], ["action", "create"], ["created_at", 2017-02-02 15:21:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:13 UTC], ["updated_at", 2017-02-02 15:21:13 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "e1097e1a-ef41-4ba9-829e-73a05b630348"], ["action", "create"], ["created_at", 2017-02-02 15:21:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:13 UTC], ["updated_at", 2017-02-02 15:21:13 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 12], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "045be8be-7c65-4ff4-ad4e-5dbf9f59571c"], ["action", "create"], ["created_at", 2017-02-02 15:21:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:13 UTC], ["updated_at", 2017-02-02 15:21:13 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:13 UTC], ["updated_at", 2017-02-02 15:21:13 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserOnly"], ["subject_id", 14], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "0280d232-8c93-401f-ac77-fdada9b2b78a"], ["action", "create"], ["created_at", 2017-02-02 15:21:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 15:21:13 UTC], ["updated_at", 2017-02-02 15:21:13 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-02 15:21:13 UTC], ["updated_at", 2017-02-02 15:21:13 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "0ba94198-50aa-4174-8ddd-0e060747f6ad"], ["action", "create"], ["created_at", 2017-02-02 15:21:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (8.5ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (23.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (7.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:21:33 UTC], ["updated_at", 2017-02-02 15:21:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:21:33 UTC], ["updated_at", 2017-02-02 15:21:33 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "d5067997-f662-4826-8e10-ee1e73b79402"], ["action", "create"], ["created_at", 2017-02-02 15:21:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 36ms (Views: 0.2ms | ActiveRecord: 2.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:21:33 UTC], ["updated_at", 2017-02-02 15:21:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 15:21:33 UTC], ["updated_at", 2017-02-02 15:21:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "79d139bb-6299-4aff-a38e-9624cd41dbf7"], ["created_at", 2017-02-02 15:21:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:33 UTC], ["updated_at", 2017-02-02 15:21:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:33 UTC], ["updated_at", 2017-02-02 15:21:33 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "5720a293-45eb-4623-b8da-357fe72091a1"], ["action", "create"], ["created_at", 2017-02-02 15:21:33 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.0ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:33 UTC], ["updated_at", 2017-02-02 15:21:33 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 15:21:33 UTC], ["id", 7]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "555969ea-d5a6-43ef-b1a3-52c0a37343ea"], ["action", "update"], ["created_at", 2017-02-02 15:21:33 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:33 UTC], ["updated_at", 2017-02-02 15:21:33 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "05f71d77-e625-4eb1-b4cd-6a7d75b8b01e"], ["action", "destroy"], ["created_at", 2017-02-02 15:21:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (2.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:33 UTC], ["updated_at", 2017-02-02 15:21:33 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "15ce69ce-9ba0-4c9b-a16d-d54d0d37aa25"], ["action", "create"], ["created_at", 2017-02-02 15:21:33 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.9ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:33 UTC], ["updated_at", 2017-02-02 15:21:33 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 10], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "bacd1c41-6383-438e-b7a2-51dba06696ad"], ["action", "create"], ["created_at", 2017-02-02 15:21:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.0ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:33 UTC], ["updated_at", 2017-02-02 15:21:33 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "20ef510d-2397-495f-aa8a-fbb297b439cd"], ["action", "create"], ["created_at", 2017-02-02 15:21:33 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:33 UTC], ["updated_at", 2017-02-02 15:21:33 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 12], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "938efb6d-eeaa-4766-b010-ffe0972bbe75"], ["action", "create"], ["created_at", 2017-02-02 15:21:33 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:33 UTC], ["updated_at", 2017-02-02 15:21:33 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:33 UTC], ["updated_at", 2017-02-02 15:21:33 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserOnly"], ["subject_id", 14], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "aed34014-62b3-4dd8-afe0-c1230e8e8a59"], ["action", "create"], ["created_at", 2017-02-02 15:21:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 15:21:33 UTC], ["updated_at", 2017-02-02 15:21:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-02 15:21:33 UTC], ["updated_at", 2017-02-02 15:21:33 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "e1a9c727-952d-4dc0-ba28-02fac5a6c151"], ["action", "create"], ["created_at", 2017-02-02 15:21:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (9.5ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (27.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (8.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:21:57 UTC], ["updated_at", 2017-02-02 15:21:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:21:57 UTC], ["updated_at", 2017-02-02 15:21:57 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "483cd3c0-303f-4aba-9c4c-f5084404d687"], ["action", "create"], ["created_at", 2017-02-02 15:21:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 28ms (Views: 0.2ms | ActiveRecord: 2.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:21:58 UTC], ["updated_at", 2017-02-02 15:21:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:21:58 UTC], ["updated_at", 2017-02-02 15:21:58 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "04a77fc8-c6b3-4673-9d0f-149cf5e427ef"], ["action", "register"], ["created_at", 2017-02-02 15:21:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 15:21:58 UTC], ["updated_at", 2017-02-02 15:21:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "75eef4a0-a5f0-46cf-9229-b13303fc5b1d"], ["created_at", 2017-02-02 15:21:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:58 UTC], ["updated_at", 2017-02-02 15:21:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:58 UTC], ["updated_at", 2017-02-02 15:21:58 UTC]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "4a7e9c4c-fee0-4164-bb3e-60a710ef8b1c"], ["action", "create"], ["created_at", 2017-02-02 15:21:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:58 UTC], ["updated_at", 2017-02-02 15:21:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 15:21:58 UTC], ["id", 8]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "70652b80-256a-4b24-b2d2-ee07b982a25a"], ["action", "update"], ["created_at", 2017-02-02 15:21:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:58 UTC], ["updated_at", 2017-02-02 15:21:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "ddb64ede-6649-4045-ad66-90f73f01499f"], ["action", "destroy"], ["created_at", 2017-02-02 15:21:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (2.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:58 UTC], ["updated_at", 2017-02-02 15:21:58 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 10], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "0ad02996-1868-4980-b5b9-0abb9edc632d"], ["action", "create"], ["created_at", 2017-02-02 15:21:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:58 UTC], ["updated_at", 2017-02-02 15:21:58 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "3eb3e0f1-df23-457d-b5cd-30d8dd2d7ce1"], ["action", "create"], ["created_at", 2017-02-02 15:21:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:58 UTC], ["updated_at", 2017-02-02 15:21:58 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 12], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "71cc59fb-9f00-403c-8d3d-8dda6aed1d15"], ["action", "create"], ["created_at", 2017-02-02 15:21:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:58 UTC], ["updated_at", 2017-02-02 15:21:58 UTC]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 13], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "ef19fc4a-2026-4163-ab17-3a6bdd8cbb96"], ["action", "create"], ["created_at", 2017-02-02 15:21:58 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:58 UTC], ["updated_at", 2017-02-02 15:21:58 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:21:58 UTC], ["updated_at", 2017-02-02 15:21:58 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 14], ["subject_type", "UserOnly"], ["subject_id", 15], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "b18d2e80-27b5-4fa5-a13a-e6ff2c9dbcd5"], ["action", "create"], ["created_at", 2017-02-02 15:21:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 15:21:58 UTC], ["updated_at", 2017-02-02 15:21:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-02 15:21:58 UTC], ["updated_at", 2017-02-02 15:21:58 UTC]]
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "c3abc494-5810-4c3e-ad67-23e104a67ea3"], ["action", "create"], ["created_at", 2017-02-02 15:21:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (26.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (28.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:29:05 UTC], ["updated_at", 2017-02-02 15:29:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:29:05 UTC], ["updated_at", 2017-02-02 15:29:05 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "f14c666b-7e38-48f7-b9e6-384b0e3793cd"], ["action", "create"], ["created_at", 2017-02-02 15:29:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 28ms (Views: 0.2ms | ActiveRecord: 2.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:29:05 UTC], ["updated_at", 2017-02-02 15:29:05 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:29:05 UTC], ["updated_at", 2017-02-02 15:29:05 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "b7368fac-3134-4742-9adc-834a33ceffbd"], ["action", "register"], ["created_at", 2017-02-02 15:29:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:29:05 UTC], ["updated_at", 2017-02-02 15:29:05 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "67a97310-0d1f-4ef0-8fc8-3732fd8e1272"], ["created_at", 2017-02-02 15:29:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "user_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 15:29:05 UTC], ["updated_at", 2017-02-02 15:29:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "b67e2aec-7688-4f64-8465-7d853419f47d"], ["created_at", 2017-02-02 15:29:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:05 UTC], ["updated_at", 2017-02-02 15:29:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:05 UTC], ["updated_at", 2017-02-02 15:29:05 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "782ef870-6918-4927-a398-1ee5ba591d6a"], ["action", "create"], ["created_at", 2017-02-02 15:29:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:05 UTC], ["updated_at", 2017-02-02 15:29:05 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 15:29:06 UTC], ["id", 9]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "c7209742-91c8-41c7-9c29-01122f6262b2"], ["action", "update"], ["created_at", 2017-02-02 15:29:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:06 UTC], ["updated_at", 2017-02-02 15:29:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 10]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 10], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "669cc7ac-f460-42da-8edf-29c0445263e8"], ["action", "destroy"], ["created_at", 2017-02-02 15:29:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:06 UTC], ["updated_at", 2017-02-02 15:29:06 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "75348252-3c85-4d48-a6c4-d9e0605fa54b"], ["action", "create"], ["created_at", 2017-02-02 15:29:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:06 UTC], ["updated_at", 2017-02-02 15:29:06 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 12], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "100b3585-1dd7-44cd-94b4-9f6cdaaa59c9"], ["action", "create"], ["created_at", 2017-02-02 15:29:06 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:06 UTC], ["updated_at", 2017-02-02 15:29:06 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 13], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "eb2cdb4a-e561-423d-b88e-0148cb492e97"], ["action", "create"], ["created_at", 2017-02-02 15:29:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:06 UTC], ["updated_at", 2017-02-02 15:29:06 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 14], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "d7f8ea26-4926-48d8-a622-23e6095a4605"], ["action", "create"], ["created_at", 2017-02-02 15:29:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:06 UTC], ["updated_at", 2017-02-02 15:29:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:06 UTC], ["updated_at", 2017-02-02 15:29:06 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 15], ["subject_type", "UserOnly"], ["subject_id", 16], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "76c24eb0-990f-43da-8ef2-4eeabc53f29a"], ["action", "create"], ["created_at", 2017-02-02 15:29:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.1ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 15:29:06 UTC], ["updated_at", 2017-02-02 15:29:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-02 15:29:06 UTC], ["updated_at", 2017-02-02 15:29:06 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 17], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "cfa1b701-9382-4444-8099-58c8700d4157"], ["action", "create"], ["created_at", 2017-02-02 15:29:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (23.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (11.3ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (16.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:29:33 UTC], ["updated_at", 2017-02-02 15:29:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:29:33 UTC], ["updated_at", 2017-02-02 15:29:33 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "4b227d98-4631-4346-ac9a-509efc07d78c"], ["action", "create"], ["created_at", 2017-02-02 15:29:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 29ms (Views: 0.3ms | ActiveRecord: 2.4ms)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:29:33 UTC], ["updated_at", 2017-02-02 15:29:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:29:33 UTC], ["updated_at", 2017-02-02 15:29:33 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "ba8afeda-f7bc-49d1-8cfb-b6a2cfd47ba8"], ["action", "register"], ["created_at", 2017-02-02 15:29:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:29:33 UTC], ["updated_at", 2017-02-02 15:29:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "b54d8ecf-b002-4533-8012-f8cef69e7fe5"], ["created_at", 2017-02-02 15:29:33 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "user_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
Completed 400 Bad Request in 5ms (ActiveRecord: 0.7ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 15:29:33 UTC], ["updated_at", 2017-02-02 15:29:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "0caad9df-5ed0-4636-bad6-446427faca2c"], ["created_at", 2017-02-02 15:29:33 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:33 UTC], ["updated_at", 2017-02-02 15:29:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:33 UTC], ["updated_at", 2017-02-02 15:29:33 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "2c6cb1a3-1fab-4b69-9f36-d4e138bd2a31"], ["action", "create"], ["created_at", 2017-02-02 15:29:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:33 UTC], ["updated_at", 2017-02-02 15:29:33 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 15:29:33 UTC], ["id", 9]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "16f65113-d149-4b4c-8bd0-6278435348a3"], ["action", "update"], ["created_at", 2017-02-02 15:29:33 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:33 UTC], ["updated_at", 2017-02-02 15:29:33 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 10]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 10], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "5017e3f0-dfea-47ec-9758-3f047283eaa0"], ["action", "destroy"], ["created_at", 2017-02-02 15:29:33 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:33 UTC], ["updated_at", 2017-02-02 15:29:33 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "4355fe15-b4e9-4aa3-bf4a-4f883a3f0630"], ["action", "create"], ["created_at", 2017-02-02 15:29:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:33 UTC], ["updated_at", 2017-02-02 15:29:33 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 12], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "95819da4-a0f2-4b4f-aba4-fcd5eab54470"], ["action", "create"], ["created_at", 2017-02-02 15:29:33 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.9ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:33 UTC], ["updated_at", 2017-02-02 15:29:33 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 13], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "3730d25a-fa96-4445-a464-43a590b22130"], ["action", "create"], ["created_at", 2017-02-02 15:29:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:33 UTC], ["updated_at", 2017-02-02 15:29:33 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 14], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "392d602d-879d-4384-ab38-096606b4ebba"], ["action", "create"], ["created_at", 2017-02-02 15:29:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:33 UTC], ["updated_at", 2017-02-02 15:29:33 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:33 UTC], ["updated_at", 2017-02-02 15:29:33 UTC]]
  [1m[35mSQL (3.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 15], ["subject_type", "UserOnly"], ["subject_id", 16], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "34a83025-58a2-4a39-9562-3435470d6fec"], ["action", "create"], ["created_at", 2017-02-02 15:29:33 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (2.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 15:29:33 UTC], ["updated_at", 2017-02-02 15:29:33 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 1], ["created_at", 2017-02-02 15:29:33 UTC], ["updated_at", 2017-02-02 15:29:33 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 17], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "a8f7784c-110a-4338-9773-1f5c4c99e317"], ["action", "create"], ["created_at", 2017-02-02 15:29:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (23.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (12.8ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (9.8ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:29:50 UTC], ["updated_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:29:50 UTC], ["updated_at", 2017-02-02 15:29:50 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "3528bffb-b769-4262-9cfc-b69a5f9eab1e"], ["action", "create"], ["created_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 27ms (Views: 0.2ms | ActiveRecord: 2.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:29:50 UTC], ["updated_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:29:50 UTC], ["updated_at", 2017-02-02 15:29:50 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "6d8eab3c-1c6d-47a1-9608-fa8a87072c9d"], ["action", "register"], ["created_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:29:50 UTC], ["updated_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "4eb2d8b3-aac1-484a-929e-fc02f0413e2f"], ["created_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "user_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
Unpermitted parameter: user_attributes
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.9ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-02 15:29:50 UTC], ["updated_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 33ms (Views: 0.2ms | ActiveRecord: 9.6ms)
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "record_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["record_uuid", "701ea801-dfb3-4f67-a6b6-5cbda07f0507"], ["created_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 15:29:50 UTC], ["updated_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "6330b62d-6f33-4d90-88ba-5b255ffdc3bf"], ["created_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:50 UTC], ["updated_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:50 UTC], ["updated_at", 2017-02-02 15:29:50 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "3039faad-df6e-44da-b0cc-74154fd32725"], ["action", "create"], ["created_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:50 UTC], ["updated_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 15:29:50 UTC], ["id", 9]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "e52d051b-ca52-44ac-a10e-76e71473d5aa"], ["action", "update"], ["created_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:50 UTC], ["updated_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 10]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 10], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "8038b577-1397-4a2e-87dd-daccf339e9f8"], ["action", "destroy"], ["created_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (2.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:50 UTC], ["updated_at", 2017-02-02 15:29:50 UTC]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "dae6fc06-20d0-4a07-a945-125a954216a3"], ["action", "create"], ["created_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.9ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:50 UTC], ["updated_at", 2017-02-02 15:29:50 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 12], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "fa67a62e-eadc-4482-bfb2-7a62c3c5d6fb"], ["action", "create"], ["created_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (2.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:50 UTC], ["updated_at", 2017-02-02 15:29:50 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 13], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "5a102e9e-9d28-4fc3-81a6-e69882525064"], ["action", "create"], ["created_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:50 UTC], ["updated_at", 2017-02-02 15:29:50 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 14], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "5e5e0427-f510-49c6-8674-5600bac9b045"], ["action", "create"], ["created_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:50 UTC], ["updated_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:29:50 UTC], ["updated_at", 2017-02-02 15:29:50 UTC]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 15], ["subject_type", "UserOnly"], ["subject_id", 16], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "ac26f899-b6d8-4494-8274-2c615e19659e"], ["action", "create"], ["created_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 15:29:50 UTC], ["updated_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 2], ["created_at", 2017-02-02 15:29:50 UTC], ["updated_at", 2017-02-02 15:29:50 UTC]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 17], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,2]}}\""], ["record_uuid", "4b2e3aa9-19ab-4f65-85af-7affeb344262"], ["action", "create"], ["created_at", 2017-02-02 15:29:50 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (24.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (9.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (9.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:30:32 UTC], ["updated_at", 2017-02-02 15:30:32 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:30:32 UTC], ["updated_at", 2017-02-02 15:30:32 UTC]]
  [1m[35mSQL (7.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "f642db04-1733-4cea-ae46-517f19b0feb4"], ["action", "create"], ["created_at", 2017-02-02 15:30:32 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 39ms (Views: 0.3ms | ActiveRecord: 10.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:30:32 UTC], ["updated_at", 2017-02-02 15:30:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:30:32 UTC], ["updated_at", 2017-02-02 15:30:32 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "45f479e0-739b-4aff-a4eb-cf9c658ebca4"], ["action", "register"], ["created_at", 2017-02-02 15:30:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:30:32 UTC], ["updated_at", 2017-02-02 15:30:32 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "3a0d926c-d04b-4adb-a046-b6b16c4f2c47"], ["created_at", 2017-02-02 15:30:32 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "user_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
Unpermitted parameter: user_attributes
Unpermitted parameter: user_attributes
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (8.8ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-02 15:30:46 UTC], ["updated_at", 2017-02-02 15:30:46 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14333ms (Views: 0.4ms | ActiveRecord: 12.3ms)
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "record_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["record_uuid", "0f3974f0-2ba2-4726-90a8-690b0df212a2"], ["created_at", 2017-02-02 15:30:46 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 15:30:46 UTC], ["updated_at", 2017-02-02 15:30:46 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "1a7d89f6-c341-4416-9cc9-70b8d5e90263"], ["created_at", 2017-02-02 15:30:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:30:46 UTC], ["updated_at", 2017-02-02 15:30:46 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:30:46 UTC], ["updated_at", 2017-02-02 15:30:46 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "bc4c60d4-c794-4759-94e4-ed7abffca146"], ["action", "create"], ["created_at", 2017-02-02 15:30:46 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:30:46 UTC], ["updated_at", 2017-02-02 15:30:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 15:30:46 UTC], ["id", 9]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 9], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "78259563-ef5a-43b7-86ea-7a977992c836"], ["action", "update"], ["created_at", 2017-02-02 15:30:46 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:30:46 UTC], ["updated_at", 2017-02-02 15:30:46 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 10]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 10], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "40ff4cd1-08e8-4385-8694-825bd0d05118"], ["action", "destroy"], ["created_at", 2017-02-02 15:30:46 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:30:46 UTC], ["updated_at", 2017-02-02 15:30:46 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "72a93b61-64ed-40c6-9dae-0f79c068d59a"], ["action", "create"], ["created_at", 2017-02-02 15:30:46 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:30:46 UTC], ["updated_at", 2017-02-02 15:30:46 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 12], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "d5cb51f3-7723-4217-ab22-509cd3e8389f"], ["action", "create"], ["created_at", 2017-02-02 15:30:46 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:30:46 UTC], ["updated_at", 2017-02-02 15:30:46 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 13], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "8af3905f-8423-476e-8063-e59e8a1570fe"], ["action", "create"], ["created_at", 2017-02-02 15:30:46 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:30:47 UTC], ["updated_at", 2017-02-02 15:30:47 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 14], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "fdef9be4-04bf-41d3-a877-c0d1bb9098d0"], ["action", "create"], ["created_at", 2017-02-02 15:30:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:30:47 UTC], ["updated_at", 2017-02-02 15:30:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:30:47 UTC], ["updated_at", 2017-02-02 15:30:47 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 15], ["subject_type", "UserOnly"], ["subject_id", 16], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "86cab18b-8c71-451d-b11a-272385792795"], ["action", "create"], ["created_at", 2017-02-02 15:30:47 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 15:30:47 UTC], ["updated_at", 2017-02-02 15:30:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 2], ["created_at", 2017-02-02 15:30:47 UTC], ["updated_at", 2017-02-02 15:30:47 UTC]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 17], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,2]}}\""], ["record_uuid", "b491d45d-a60f-4fb1-bd61-bb8e19dc6719"], ["action", "create"], ["created_at", 2017-02-02 15:30:47 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.8ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (25.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:30:54 UTC], ["updated_at", 2017-02-02 15:30:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:30:54 UTC], ["updated_at", 2017-02-02 15:30:54 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "bdb8b776-cbb7-4a58-bd72-3eb299119be4"], ["action", "create"], ["created_at", 2017-02-02 15:30:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 38ms (Views: 0.2ms | ActiveRecord: 3.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:30:54 UTC], ["updated_at", 2017-02-02 15:30:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:30:54 UTC], ["updated_at", 2017-02-02 15:30:54 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "08920cb2-c28d-4d30-bd86-d1304e6bca57"], ["action", "register"], ["created_at", 2017-02-02 15:30:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:30:55 UTC], ["updated_at", 2017-02-02 15:30:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "b4324381-b0ea-4dd5-af84-5374a181695c"], ["created_at", 2017-02-02 15:30:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-02 15:30:58 UTC], ["updated_at", 2017-02-02 15:30:58 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-02 15:30:58 UTC], ["updated_at", 2017-02-02 15:30:58 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "1c2deaf7-1d11-4dc4-8613-bb1ef66ca3a7"], ["action", "create"], ["created_at", 2017-02-02 15:30:58 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-02 15:30:58 UTC], ["updated_at", 2017-02-02 15:30:58 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "6720eee1-af67-4e1a-acae-590f64a0ae89"], ["action", "create"], ["created_at", 2017-02-02 15:30:58 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-02 15:30:58 UTC], ["updated_at", 2017-02-02 15:30:58 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "8a523461-2234-4f46-912e-51caa89b38f4"], ["action", "create"], ["created_at", 2017-02-02 15:30:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3391ms (Views: 0.2ms | ActiveRecord: 5.2ms)
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "record_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["record_uuid", "3244fe38-dc88-492f-be81-0ac4c96a60e1"], ["created_at", 2017-02-02 15:30:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 15:30:58 UTC], ["updated_at", 2017-02-02 15:30:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "c40a1f86-d4f1-447c-a855-ca4564667a36"], ["created_at", 2017-02-02 15:30:58 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:30:58 UTC], ["updated_at", 2017-02-02 15:30:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:30:58 UTC], ["updated_at", 2017-02-02 15:30:58 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "1a67dcae-514c-43d8-bcce-b3be3b7cc643"], ["action", "create"], ["created_at", 2017-02-02 15:30:58 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:30:58 UTC], ["updated_at", 2017-02-02 15:30:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 15:30:58 UTC], ["id", 12]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 12], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "e3f790d6-43ce-4bcb-8eeb-499569399cf2"], ["action", "update"], ["created_at", 2017-02-02 15:30:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.9ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:30:58 UTC], ["updated_at", 2017-02-02 15:30:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 13]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 13], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "c6f3c1f5-f976-4aa0-8246-4788bf93a982"], ["action", "destroy"], ["created_at", 2017-02-02 15:30:58 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:30:58 UTC], ["updated_at", 2017-02-02 15:30:58 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 14], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "811d9420-1a87-49a8-8386-8b641dd530b9"], ["action", "create"], ["created_at", 2017-02-02 15:30:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:30:58 UTC], ["updated_at", 2017-02-02 15:30:58 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 15], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "b7d187a9-911c-4e67-b2f1-2144a94fe489"], ["action", "create"], ["created_at", 2017-02-02 15:30:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:30:58 UTC], ["updated_at", 2017-02-02 15:30:58 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 16], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "0b26e12f-770e-4ec3-8aa7-f0b62ce9e545"], ["action", "create"], ["created_at", 2017-02-02 15:30:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:30:58 UTC], ["updated_at", 2017-02-02 15:30:58 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 17], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "d9605727-e379-41cf-ac94-485336b702b2"], ["action", "create"], ["created_at", 2017-02-02 15:30:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:30:58 UTC], ["updated_at", 2017-02-02 15:30:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:30:58 UTC], ["updated_at", 2017-02-02 15:30:58 UTC]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 19], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "768760c5-4ca6-4e63-a96b-c75f10807454"], ["action", "create"], ["created_at", 2017-02-02 15:30:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 15:30:58 UTC], ["updated_at", 2017-02-02 15:30:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 2], ["created_at", 2017-02-02 15:30:58 UTC], ["updated_at", 2017-02-02 15:30:58 UTC]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 20], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,2]}}\""], ["record_uuid", "58c45d4b-26cf-4baf-99cd-583280bf9e3c"], ["action", "create"], ["created_at", 2017-02-02 15:30:58 UTC]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (10.0ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (36.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:36:48 UTC], ["updated_at", 2017-02-02 15:36:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:36:48 UTC], ["updated_at", 2017-02-02 15:36:48 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "64d1471d-5cd7-4d61-9539-4eefdebd0456"], ["action", "create"], ["created_at", 2017-02-02 15:36:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 27ms (Views: 0.2ms | ActiveRecord: 2.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:36:48 UTC], ["updated_at", 2017-02-02 15:36:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:36:48 UTC], ["updated_at", 2017-02-02 15:36:48 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "d15bb1ac-e273-401e-ab3a-d00f4cd49731"], ["action", "register"], ["created_at", 2017-02-02 15:36:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:36:48 UTC], ["updated_at", 2017-02-02 15:36:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-02 15:36:50 UTC], ["updated_at", 2017-02-02 15:36:50 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-02 15:36:50 UTC], ["updated_at", 2017-02-02 15:36:50 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "95aa4287-1ea2-4c3c-8215-2e7d374561e0"], ["action", "create"], ["created_at", 2017-02-02 15:36:50 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-02 15:36:50 UTC], ["updated_at", 2017-02-02 15:36:50 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "c3056943-7581-4de3-964f-df7c4ccade45"], ["action", "create"], ["created_at", 2017-02-02 15:36:50 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-02 15:36:50 UTC], ["updated_at", 2017-02-02 15:36:50 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "13625b83-789c-4d3e-9d3e-3a4ee65eca91"], ["action", "create"], ["created_at", 2017-02-02 15:36:50 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1381ms (Views: 0.4ms | ActiveRecord: 6.0ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 15:36:50 UTC], ["updated_at", 2017-02-02 15:36:50 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "78201ce1-5df1-4378-934b-ad93d4422110"], ["created_at", 2017-02-02 15:36:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:36:50 UTC], ["updated_at", 2017-02-02 15:36:50 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:36:50 UTC], ["updated_at", 2017-02-02 15:36:50 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "8ab98bf9-4f94-44e0-9c65-43996837e9e6"], ["action", "create"], ["created_at", 2017-02-02 15:36:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:36:50 UTC], ["updated_at", 2017-02-02 15:36:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 15:36:50 UTC], ["id", 12]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 12], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "91411574-dbe3-4004-8274-18bba8d0e297"], ["action", "update"], ["created_at", 2017-02-02 15:36:50 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:36:50 UTC], ["updated_at", 2017-02-02 15:36:50 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 13]]
  [1m[35mSQL (3.1ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 13], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "6ff2c025-58a5-41b6-b67e-f76ef25eb25a"], ["action", "destroy"], ["created_at", 2017-02-02 15:36:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:36:50 UTC], ["updated_at", 2017-02-02 15:36:50 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 14], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "5d5b4689-6a5a-47c3-9c17-1e4f575dc393"], ["action", "create"], ["created_at", 2017-02-02 15:36:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:36:50 UTC], ["updated_at", 2017-02-02 15:36:50 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 15], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "87d510af-1f51-42c5-aff0-13f89cfa86ec"], ["action", "create"], ["created_at", 2017-02-02 15:36:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:36:50 UTC], ["updated_at", 2017-02-02 15:36:50 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 16], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "de94cea6-e7d3-4cd6-b7f6-946c145cfe6e"], ["action", "create"], ["created_at", 2017-02-02 15:36:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (2.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:36:50 UTC], ["updated_at", 2017-02-02 15:36:50 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 17], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "fb4079f1-e49c-4df1-b39d-9e532b12a091"], ["action", "create"], ["created_at", 2017-02-02 15:36:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:36:50 UTC], ["updated_at", 2017-02-02 15:36:50 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:36:50 UTC], ["updated_at", 2017-02-02 15:36:50 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 19], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "894034cc-59d2-4766-9979-59f9264538d6"], ["action", "create"], ["created_at", 2017-02-02 15:36:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 15:36:50 UTC], ["updated_at", 2017-02-02 15:36:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (2.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 2], ["created_at", 2017-02-02 15:36:50 UTC], ["updated_at", 2017-02-02 15:36:50 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 20], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,2]}}\""], ["record_uuid", "780ae20e-1976-4e04-b34f-e2ea9007b269"], ["action", "create"], ["created_at", 2017-02-02 15:36:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.2ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (38.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (7.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (7.4ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (13.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:37:03 UTC], ["updated_at", 2017-02-02 15:37:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:37:03 UTC], ["updated_at", 2017-02-02 15:37:03 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "410fb3d4-a853-4b04-8f4e-a7c5c257f304"], ["action", "create"], ["created_at", 2017-02-02 15:37:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 26ms (Views: 0.2ms | ActiveRecord: 2.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:37:03 UTC], ["updated_at", 2017-02-02 15:37:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:37:03 UTC], ["updated_at", 2017-02-02 15:37:03 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "4294e170-327a-4ce0-9bdd-434915dc63dd"], ["action", "register"], ["created_at", 2017-02-02 15:37:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:37:03 UTC], ["updated_at", 2017-02-02 15:37:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-02 15:37:04 UTC], ["updated_at", 2017-02-02 15:37:04 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-02 15:37:04 UTC], ["updated_at", 2017-02-02 15:37:04 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "47082726-3156-4803-adb8-930ad3223ea9"], ["action", "create"], ["created_at", 2017-02-02 15:37:04 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-02 15:37:04 UTC], ["updated_at", 2017-02-02 15:37:04 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "34fccb0a-ec48-4816-b9b8-b87606920874"], ["action", "create"], ["created_at", 2017-02-02 15:37:04 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-02 15:37:04 UTC], ["updated_at", 2017-02-02 15:37:04 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "3d566e6b-2308-47df-a54f-060d3856ec8c"], ["action", "create"], ["created_at", 2017-02-02 15:37:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 576ms (Views: 0.2ms | ActiveRecord: 5.7ms)
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 15:38:01 UTC], ["updated_at", 2017-02-02 15:38:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "f3668ee3-cdb1-4b4f-9142-c941080af17c"], ["created_at", 2017-02-02 15:38:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:01 UTC], ["updated_at", 2017-02-02 15:38:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:01 UTC], ["updated_at", 2017-02-02 15:38:01 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "59a76d64-6fc5-4b71-b046-f94baa41b5fc"], ["action", "create"], ["created_at", 2017-02-02 15:38:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:01 UTC], ["updated_at", 2017-02-02 15:38:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 15:38:01 UTC], ["id", 12]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 12], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "4f304bad-fc42-4e29-979e-69aa76189741"], ["action", "update"], ["created_at", 2017-02-02 15:38:01 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:01 UTC], ["updated_at", 2017-02-02 15:38:01 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 13]]
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 13], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "a5c3bf9c-f56e-4c89-8b90-17292023d2a7"], ["action", "destroy"], ["created_at", 2017-02-02 15:38:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:01 UTC], ["updated_at", 2017-02-02 15:38:01 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 14], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "b5fc528c-4645-4052-96d0-166cfcbae307"], ["action", "create"], ["created_at", 2017-02-02 15:38:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:01 UTC], ["updated_at", 2017-02-02 15:38:01 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 15], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "a635a9df-8eaf-42c9-b08d-9666334b8031"], ["action", "create"], ["created_at", 2017-02-02 15:38:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:01 UTC], ["updated_at", 2017-02-02 15:38:01 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 16], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "3254998c-f1e0-4992-9803-2f2db9ad3172"], ["action", "create"], ["created_at", 2017-02-02 15:38:01 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:01 UTC], ["updated_at", 2017-02-02 15:38:01 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 17], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "dfa913ef-4a2c-4fe6-aabf-f31c84536e82"], ["action", "create"], ["created_at", 2017-02-02 15:38:01 UTC]]
  [1m[35m (5.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:01 UTC], ["updated_at", 2017-02-02 15:38:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:01 UTC], ["updated_at", 2017-02-02 15:38:01 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 19], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "31b4e90b-9b3d-4d3d-9b2d-832c38a236f2"], ["action", "create"], ["created_at", 2017-02-02 15:38:01 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.0ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 15:38:01 UTC], ["updated_at", 2017-02-02 15:38:01 UTC]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 2], ["created_at", 2017-02-02 15:38:01 UTC], ["updated_at", 2017-02-02 15:38:01 UTC]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 20], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,2]}}\""], ["record_uuid", "86f876bd-341c-4ba1-b100-af9fcf8d9a80"], ["action", "create"], ["created_at", 2017-02-02 15:38:01 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.0ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (12.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:38:06 UTC], ["updated_at", 2017-02-02 15:38:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:38:06 UTC], ["updated_at", 2017-02-02 15:38:06 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "6c8ed2f0-3b27-4d2e-8f9d-758a5d753c86"], ["action", "create"], ["created_at", 2017-02-02 15:38:06 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 31ms (Views: 0.2ms | ActiveRecord: 2.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:38:06 UTC], ["updated_at", 2017-02-02 15:38:06 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:38:06 UTC], ["updated_at", 2017-02-02 15:38:06 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "38b5be33-94a5-47ba-824e-fe69ed139846"], ["action", "register"], ["created_at", 2017-02-02 15:38:06 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 2.3ms | ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:38:06 UTC], ["updated_at", 2017-02-02 15:38:06 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-02 15:38:06 UTC], ["updated_at", 2017-02-02 15:38:06 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-02 15:38:06 UTC], ["updated_at", 2017-02-02 15:38:06 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "df38d309-7534-46d7-8c22-b3da24cf3d89"], ["action", "create"], ["created_at", 2017-02-02 15:38:06 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-02 15:38:06 UTC], ["updated_at", 2017-02-02 15:38:06 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "c5570e10-d9a7-43b0-b7e6-19ed2b22ea62"], ["action", "create"], ["created_at", 2017-02-02 15:38:06 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-02 15:38:06 UTC], ["updated_at", 2017-02-02 15:38:06 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "14cbb336-a7ea-487d-ab3f-f26db36a5997"], ["action", "create"], ["created_at", 2017-02-02 15:38:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13650ms (Views: 0.3ms | ActiveRecord: 6.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 15:38:20 UTC], ["updated_at", 2017-02-02 15:38:20 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "5a1f4703-1a41-494c-a47c-3ac73e6668a8"], ["created_at", 2017-02-02 15:38:20 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:20 UTC], ["updated_at", 2017-02-02 15:38:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:20 UTC], ["updated_at", 2017-02-02 15:38:20 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "c6bdcda6-ea2a-416a-9259-b6c5916b67cb"], ["action", "create"], ["created_at", 2017-02-02 15:38:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:20 UTC], ["updated_at", 2017-02-02 15:38:20 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 15:38:20 UTC], ["id", 12]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 12], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "df6486a0-acc2-4d73-b99f-a82e98fdd5ef"], ["action", "update"], ["created_at", 2017-02-02 15:38:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:20 UTC], ["updated_at", 2017-02-02 15:38:20 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 13]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 13], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "26ec2c56-ec10-4590-8b18-b4e7b13f5de4"], ["action", "destroy"], ["created_at", 2017-02-02 15:38:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:20 UTC], ["updated_at", 2017-02-02 15:38:20 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 14], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "9a904637-8e0d-4fd9-ba0d-f60ac15b7f41"], ["action", "create"], ["created_at", 2017-02-02 15:38:20 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:20 UTC], ["updated_at", 2017-02-02 15:38:20 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 15], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "ef2233b3-e279-4b9f-a0b3-389381c9b29c"], ["action", "create"], ["created_at", 2017-02-02 15:38:20 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:20 UTC], ["updated_at", 2017-02-02 15:38:20 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 16], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "9266629c-d76d-4bcd-835a-f9ab6d1fc295"], ["action", "create"], ["created_at", 2017-02-02 15:38:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:20 UTC], ["updated_at", 2017-02-02 15:38:20 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 17], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "d320741a-da1e-4a8c-91b4-49633d1c5164"], ["action", "create"], ["created_at", 2017-02-02 15:38:20 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:20 UTC], ["updated_at", 2017-02-02 15:38:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:20 UTC], ["updated_at", 2017-02-02 15:38:20 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 19], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "bb07d96b-a387-4875-8010-a8b1febc1b72"], ["action", "create"], ["created_at", 2017-02-02 15:38:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 15:38:20 UTC], ["updated_at", 2017-02-02 15:38:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 2], ["created_at", 2017-02-02 15:38:20 UTC], ["updated_at", 2017-02-02 15:38:20 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 20], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,2]}}\""], ["record_uuid", "52bd868e-02ce-446c-bf53-df4d2abe21a0"], ["action", "create"], ["created_at", 2017-02-02 15:38:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.5ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (27.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.4ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:38:43 UTC], ["updated_at", 2017-02-02 15:38:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:38:43 UTC], ["updated_at", 2017-02-02 15:38:43 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "5735807f-eea3-4cef-84a5-b8f69dc6f369"], ["action", "create"], ["created_at", 2017-02-02 15:38:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 33ms (Views: 0.2ms | ActiveRecord: 3.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:38:43 UTC], ["updated_at", 2017-02-02 15:38:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:38:43 UTC], ["updated_at", 2017-02-02 15:38:43 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "011ce95d-7527-4f55-9e56-1975f1eb487a"], ["action", "register"], ["created_at", 2017-02-02 15:38:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:38:43 UTC], ["updated_at", 2017-02-02 15:38:43 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.6ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-02 15:38:43 UTC], ["updated_at", 2017-02-02 15:38:43 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["record_uuid", "ac804fe2-916b-41c7-8045-ed3ae23496a0"], ["action", "create"], ["created_at", 2017-02-02 15:38:43 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-02 15:38:43 UTC], ["updated_at", 2017-02-02 15:38:43 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "2564acdf-3e9a-46ff-a87c-1606783f1b46"], ["action", "create"], ["created_at", 2017-02-02 15:38:43 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-02 15:38:43 UTC], ["updated_at", 2017-02-02 15:38:43 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "29e337f1-f69e-4936-ba7a-af2fab9ada54"], ["action", "create"], ["created_at", 2017-02-02 15:38:43 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-02 15:38:43 UTC], ["updated_at", 2017-02-02 15:38:43 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "e24c39b8-c7ab-4ec2-8a9f-61253e4277ba"], ["action", "create"], ["created_at", 2017-02-02 15:38:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 66ms (Views: 0.2ms | ActiveRecord: 13.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 15:38:45 UTC], ["updated_at", 2017-02-02 15:38:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "6df87d4f-5861-4e57-bd6b-0f4f629d3b99"], ["created_at", 2017-02-02 15:38:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:45 UTC], ["updated_at", 2017-02-02 15:38:45 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:45 UTC], ["updated_at", 2017-02-02 15:38:45 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "89e8fe68-ed39-44fe-aefb-8d46b66b641a"], ["action", "create"], ["created_at", 2017-02-02 15:38:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:45 UTC], ["updated_at", 2017-02-02 15:38:45 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 15:38:45 UTC], ["id", 12]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 12], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "d162f921-8790-45bc-b1a9-20bf2e54c65e"], ["action", "update"], ["created_at", 2017-02-02 15:38:45 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:45 UTC], ["updated_at", 2017-02-02 15:38:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 13]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 13], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "ee684c4e-8633-4ac6-832b-8b37db64a15f"], ["action", "destroy"], ["created_at", 2017-02-02 15:38:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.9ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:45 UTC], ["updated_at", 2017-02-02 15:38:45 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 14], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "08b8683d-25c9-45e7-9562-e30c6e18eb80"], ["action", "create"], ["created_at", 2017-02-02 15:38:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:45 UTC], ["updated_at", 2017-02-02 15:38:45 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 15], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "c32fefd9-37b4-4c37-9bff-af73534097d8"], ["action", "create"], ["created_at", 2017-02-02 15:38:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:45 UTC], ["updated_at", 2017-02-02 15:38:45 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 16], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "9d99cac4-213d-4104-907f-099e03b5dd2e"], ["action", "create"], ["created_at", 2017-02-02 15:38:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:45 UTC], ["updated_at", 2017-02-02 15:38:45 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 17], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "3cac07e8-c792-478d-994f-255324909bef"], ["action", "create"], ["created_at", 2017-02-02 15:38:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:45 UTC], ["updated_at", 2017-02-02 15:38:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:38:45 UTC], ["updated_at", 2017-02-02 15:38:45 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 19], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "c0978c1a-629c-4d56-afc6-912dae4eaeb6"], ["action", "create"], ["created_at", 2017-02-02 15:38:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 15:38:45 UTC], ["updated_at", 2017-02-02 15:38:45 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 2], ["created_at", 2017-02-02 15:38:45 UTC], ["updated_at", 2017-02-02 15:38:45 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 20], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,2]}}\""], ["record_uuid", "392c851e-467f-48eb-a433-3f4172ae842c"], ["action", "create"], ["created_at", 2017-02-02 15:38:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (28.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:38:56 UTC], ["updated_at", 2017-02-02 15:38:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:38:56 UTC], ["updated_at", 2017-02-02 15:38:56 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "91d8a313-9f9c-4d74-a466-f50576dda322"], ["action", "create"], ["created_at", 2017-02-02 15:38:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 32ms (Views: 0.2ms | ActiveRecord: 2.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:38:56 UTC], ["updated_at", 2017-02-02 15:38:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:38:56 UTC], ["updated_at", 2017-02-02 15:38:56 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "521f49fd-f769-47f6-ac7c-d067dda81b77"], ["action", "register"], ["created_at", 2017-02-02 15:38:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.8ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:38:56 UTC], ["updated_at", 2017-02-02 15:38:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-02 15:38:56 UTC], ["updated_at", 2017-02-02 15:38:56 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["record_uuid", "7e3026f4-2606-44d3-a03a-2e128fdc518f"], ["action", "create"], ["created_at", 2017-02-02 15:38:56 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-02 15:38:56 UTC], ["updated_at", 2017-02-02 15:38:56 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "6c1109b7-f962-4b42-83a7-b1943feac9b1"], ["action", "create"], ["created_at", 2017-02-02 15:38:56 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-02 15:38:56 UTC], ["updated_at", 2017-02-02 15:38:56 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "1a532e67-1af1-4548-886a-dacbcbb75b1b"], ["action", "create"], ["created_at", 2017-02-02 15:38:56 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-02 15:38:56 UTC], ["updated_at", 2017-02-02 15:38:56 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "a342e066-c608-4b68-b6b8-58daed0d408c"], ["action", "create"], ["created_at", 2017-02-02 15:38:56 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 51ms (Views: 0.5ms | ActiveRecord: 5.0ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 15:43:26 UTC], ["updated_at", 2017-02-02 15:43:26 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "7acc6b46-fba5-4ae2-971f-584fac44d74e"], ["created_at", 2017-02-02 15:43:26 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (2.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:43:26 UTC], ["updated_at", 2017-02-02 15:43:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:43:26 UTC], ["updated_at", 2017-02-02 15:43:26 UTC]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "d252c080-a824-4b23-944b-e678a5094cc1"], ["action", "create"], ["created_at", 2017-02-02 15:43:26 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:43:26 UTC], ["updated_at", 2017-02-02 15:43:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 15:43:26 UTC], ["id", 12]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 12], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "32225474-6dbe-4344-b3a8-03543131333a"], ["action", "update"], ["created_at", 2017-02-02 15:43:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:43:26 UTC], ["updated_at", 2017-02-02 15:43:26 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 13]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 13], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "12d3f374-80a1-4f5a-8715-5af2feb0150f"], ["action", "destroy"], ["created_at", 2017-02-02 15:43:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:43:26 UTC], ["updated_at", 2017-02-02 15:43:26 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 14], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "9ee27736-b49c-433d-8068-f36f85943f5d"], ["action", "create"], ["created_at", 2017-02-02 15:43:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:43:26 UTC], ["updated_at", 2017-02-02 15:43:26 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 15], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "5c01d8a3-4dec-416d-8675-5797e6ef1f85"], ["action", "create"], ["created_at", 2017-02-02 15:43:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:43:26 UTC], ["updated_at", 2017-02-02 15:43:26 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 16], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "956f1e40-479c-441a-9363-a29a079d798f"], ["action", "create"], ["created_at", 2017-02-02 15:43:26 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:43:26 UTC], ["updated_at", 2017-02-02 15:43:26 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 17], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "bc537380-9eea-47c9-8ad1-7f4170f1d4ab"], ["action", "create"], ["created_at", 2017-02-02 15:43:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:43:26 UTC], ["updated_at", 2017-02-02 15:43:26 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:43:26 UTC], ["updated_at", 2017-02-02 15:43:26 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 19], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "e4e85ccc-28f3-43c0-addb-d985c6a280f9"], ["action", "create"], ["created_at", 2017-02-02 15:43:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 15:43:26 UTC], ["updated_at", 2017-02-02 15:43:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 2], ["created_at", 2017-02-02 15:43:26 UTC], ["updated_at", 2017-02-02 15:43:26 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 20], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,2]}}\""], ["record_uuid", "c9b3f03a-48cd-4683-b312-127677a2edf6"], ["action", "create"], ["created_at", 2017-02-02 15:43:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (9.8ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (30.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (11.4ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (29.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:45:47 UTC], ["updated_at", 2017-02-02 15:45:47 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:45:47 UTC], ["updated_at", 2017-02-02 15:45:47 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "b4fd4bd9-c671-4b81-9bee-09ad1fd9ebbc"], ["action", "create"], ["created_at", 2017-02-02 15:45:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 28ms (Views: 0.2ms | ActiveRecord: 3.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:45:48 UTC], ["updated_at", 2017-02-02 15:45:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:45:48 UTC], ["updated_at", 2017-02-02 15:45:48 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "4437de1b-3a07-4c94-8719-ec1636651169"], ["action", "register"], ["created_at", 2017-02-02 15:45:48 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.3ms | ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:45:48 UTC], ["updated_at", 2017-02-02 15:45:48 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-02 15:45:48 UTC], ["updated_at", 2017-02-02 15:45:48 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["record_uuid", "f0a49d89-4697-4cda-aea3-68b7ec761632"], ["action", "create"], ["created_at", 2017-02-02 15:45:48 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-02 15:45:48 UTC], ["updated_at", 2017-02-02 15:45:48 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "9ca2a966-f045-4542-b16e-af543a978ad4"], ["action", "create"], ["created_at", 2017-02-02 15:45:48 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-02 15:45:48 UTC], ["updated_at", 2017-02-02 15:45:48 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "6453dd8a-8964-4f87-be67-97582271bf43"], ["action", "create"], ["created_at", 2017-02-02 15:45:48 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-02 15:45:48 UTC], ["updated_at", 2017-02-02 15:45:48 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "13458e4e-b627-4098-a118-b80136557e4c"], ["action", "create"], ["created_at", 2017-02-02 15:45:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 51ms (Views: 0.2ms | ActiveRecord: 5.0ms)
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 15:45:48 UTC], ["updated_at", 2017-02-02 15:45:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "04f06502-f3fd-42a3-bb8c-0b4e8696e255"], ["created_at", 2017-02-02 15:45:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:45:48 UTC], ["updated_at", 2017-02-02 15:45:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:45:48 UTC], ["updated_at", 2017-02-02 15:45:48 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "ba14074a-b6f8-4ae3-9f1b-31f412e2a158"], ["action", "create"], ["created_at", 2017-02-02 15:45:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:45:48 UTC], ["updated_at", 2017-02-02 15:45:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 15:45:48 UTC], ["id", 12]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 12], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "cfb873ef-b7ae-4bc0-a185-c5a9760a2305"], ["action", "update"], ["created_at", 2017-02-02 15:45:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:45:48 UTC], ["updated_at", 2017-02-02 15:45:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 13]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 13], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "7873855a-a308-4913-9f84-cec17289e576"], ["action", "destroy"], ["created_at", 2017-02-02 15:45:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:45:48 UTC], ["updated_at", 2017-02-02 15:45:48 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 14], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "8e7d45ac-1e81-4479-aaa2-f05be2c3c6d5"], ["action", "create"], ["created_at", 2017-02-02 15:45:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:45:48 UTC], ["updated_at", 2017-02-02 15:45:48 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 15], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "057614ce-ae4b-4202-8fc5-56674dc3d264"], ["action", "create"], ["created_at", 2017-02-02 15:45:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:45:48 UTC], ["updated_at", 2017-02-02 15:45:48 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 16], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "519a30eb-65d3-4cf5-8f22-43ce7c2573e4"], ["action", "create"], ["created_at", 2017-02-02 15:45:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:45:48 UTC], ["updated_at", 2017-02-02 15:45:48 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 17], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "dee75abb-6ec7-4c61-8ed6-e26ce83c89cf"], ["action", "create"], ["created_at", 2017-02-02 15:45:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:45:48 UTC], ["updated_at", 2017-02-02 15:45:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:45:48 UTC], ["updated_at", 2017-02-02 15:45:48 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 19], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "99634c9c-d21c-40c2-9eab-4631e8bd23b1"], ["action", "create"], ["created_at", 2017-02-02 15:45:48 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 15:45:48 UTC], ["updated_at", 2017-02-02 15:45:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 2], ["created_at", 2017-02-02 15:45:48 UTC], ["updated_at", 2017-02-02 15:45:48 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 20], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,2]}}\""], ["record_uuid", "fc90c0cb-78e5-4ac0-8d9f-1889163b47ef"], ["action", "create"], ["created_at", 2017-02-02 15:45:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.2ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (28.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (5.1ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (3.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:47:08 UTC], ["updated_at", 2017-02-02 15:47:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:47:08 UTC], ["updated_at", 2017-02-02 15:47:08 UTC]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "17d20f68-03a6-474d-89e9-70904f2e816a"], ["action", "create"], ["created_at", 2017-02-02 15:47:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 31ms (Views: 0.2ms | ActiveRecord: 2.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:47:08 UTC], ["updated_at", 2017-02-02 15:47:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:47:08 UTC], ["updated_at", 2017-02-02 15:47:08 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "c8141d60-80f0-4a83-97cd-f854471abd29"], ["action", "register"], ["created_at", 2017-02-02 15:47:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 1.3ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:47:08 UTC], ["updated_at", 2017-02-02 15:47:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-02 15:47:08 UTC], ["updated_at", 2017-02-02 15:47:08 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["record_uuid", "9c96e009-29d5-48fd-b55f-9d0d3913dcdf"], ["action", "create"], ["created_at", 2017-02-02 15:47:08 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-02 15:47:08 UTC], ["updated_at", 2017-02-02 15:47:08 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "077344ce-98f9-4edb-b047-ef3e091554b3"], ["action", "create"], ["created_at", 2017-02-02 15:47:08 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-02 15:47:08 UTC], ["updated_at", 2017-02-02 15:47:08 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "d0271230-6da9-46ff-b4a2-42c684daa870"], ["action", "create"], ["created_at", 2017-02-02 15:47:08 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-02 15:47:08 UTC], ["updated_at", 2017-02-02 15:47:08 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "3c0c10f5-8550-41c7-9e0b-2687377eea7c"], ["action", "create"], ["created_at", 2017-02-02 15:47:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 59ms (Views: 0.1ms | ActiveRecord: 7.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 15:47:08 UTC], ["updated_at", 2017-02-02 15:47:08 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "f41e3f0c-6e24-4e06-b13e-547c238959ab"], ["created_at", 2017-02-02 15:47:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:47:08 UTC], ["updated_at", 2017-02-02 15:47:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:47:08 UTC], ["updated_at", 2017-02-02 15:47:08 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "14d78b5d-69ca-4bf3-b92a-9570b1c93ab8"], ["action", "create"], ["created_at", 2017-02-02 15:47:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:47:08 UTC], ["updated_at", 2017-02-02 15:47:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 15:47:08 UTC], ["id", 12]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 12], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "f2115879-be63-4aac-a30d-49eced1a808a"], ["action", "update"], ["created_at", 2017-02-02 15:47:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:47:08 UTC], ["updated_at", 2017-02-02 15:47:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 13]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 13], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "5dad51f4-9335-4ea6-88ae-cfc8c49b4242"], ["action", "destroy"], ["created_at", 2017-02-02 15:47:08 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:47:08 UTC], ["updated_at", 2017-02-02 15:47:08 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 14], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "6f5a4cd2-1b0c-4e81-ab1d-99c6c7d13885"], ["action", "create"], ["created_at", 2017-02-02 15:47:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (2.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:47:08 UTC], ["updated_at", 2017-02-02 15:47:08 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 15], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "4b8c193d-f6fb-4acb-9316-4872e7505aed"], ["action", "create"], ["created_at", 2017-02-02 15:47:08 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:47:08 UTC], ["updated_at", 2017-02-02 15:47:08 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 16], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "1765c3f5-240e-4799-be08-5f0188938cdb"], ["action", "create"], ["created_at", 2017-02-02 15:47:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:47:08 UTC], ["updated_at", 2017-02-02 15:47:08 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 17], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "0307a980-1c2f-47c9-a866-295680905e05"], ["action", "create"], ["created_at", 2017-02-02 15:47:08 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:47:08 UTC], ["updated_at", 2017-02-02 15:47:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:47:08 UTC], ["updated_at", 2017-02-02 15:47:08 UTC]]
  [1m[35mSQL (2.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 19], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "24de0935-42c6-41a7-92a7-1cc8d3544524"], ["action", "create"], ["created_at", 2017-02-02 15:47:08 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 15:47:08 UTC], ["updated_at", 2017-02-02 15:47:08 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 2], ["created_at", 2017-02-02 15:47:08 UTC], ["updated_at", 2017-02-02 15:47:08 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 20], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,2]}}\""], ["record_uuid", "785e3194-e27f-4df8-b21a-d428c6684b16"], ["action", "create"], ["created_at", 2017-02-02 15:47:08 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.8ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (24.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:47:55 UTC], ["updated_at", 2017-02-02 15:47:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:47:55 UTC], ["updated_at", 2017-02-02 15:47:55 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "47856fac-6cc6-4210-8db0-145f5f05b12e"], ["action", "create"], ["created_at", 2017-02-02 15:47:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 32ms (Views: 0.2ms | ActiveRecord: 2.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:47:55 UTC], ["updated_at", 2017-02-02 15:47:55 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:47:55 UTC], ["updated_at", 2017-02-02 15:47:55 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "f0ad28aa-b38b-4bab-9677-140f464c310a"], ["action", "register"], ["created_at", 2017-02-02 15:47:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:47:55 UTC], ["updated_at", 2017-02-02 15:47:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.1ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-02 15:47:55 UTC], ["updated_at", 2017-02-02 15:47:55 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["record_uuid", "4ba9a9e1-35b1-45fe-b077-fb2b9d391c77"], ["action", "create"], ["created_at", 2017-02-02 15:47:55 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-02 15:47:55 UTC], ["updated_at", 2017-02-02 15:47:55 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "bcbe0783-bf67-495a-b544-f7c6750a8a0d"], ["action", "create"], ["created_at", 2017-02-02 15:47:55 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-02 15:47:55 UTC], ["updated_at", 2017-02-02 15:47:55 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "413d4c7b-7254-4f9d-a341-c49f5d0ad445"], ["action", "create"], ["created_at", 2017-02-02 15:47:55 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-02 15:47:55 UTC], ["updated_at", 2017-02-02 15:47:55 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "b55d8bab-4448-41c2-b1ce-cf254a2ed12a"], ["action", "create"], ["created_at", 2017-02-02 15:47:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 58ms (Views: 0.1ms | ActiveRecord: 10.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-02 15:48:00 UTC], ["updated_at", 2017-02-02 15:48:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("record_uuid", "created_at") VALUES ($1, $2) RETURNING "id"[0m  [["record_uuid", "70a98b41-044a-4760-be27-5bda6a8803b2"], ["created_at", 2017-02-02 15:48:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:48:00 UTC], ["updated_at", 2017-02-02 15:48:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:48:00 UTC], ["updated_at", 2017-02-02 15:48:00 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 11], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["record_uuid", "406e55b3-a5d9-469d-a337-6ce8504e6660"], ["action", "create"], ["created_at", 2017-02-02 15:48:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:48:00 UTC], ["updated_at", 2017-02-02 15:48:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-02 15:48:00 UTC], ["id", 12]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 12], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["record_uuid", "60bbaa4f-a8c2-4ffc-901c-fe15c4f06dc8"], ["action", "update"], ["created_at", 2017-02-02 15:48:00 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:48:00 UTC], ["updated_at", 2017-02-02 15:48:00 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 13]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 13], ["record_changes", "\"{\\\"users\\\":{}}\""], ["record_uuid", "64517626-a245-41c7-a1db-d0e51161be37"], ["action", "destroy"], ["created_at", 2017-02-02 15:48:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:48:00 UTC], ["updated_at", 2017-02-02 15:48:00 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 14], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "74e8b16a-924d-4fb1-ab27-881c12ac8fdb"], ["action", "create"], ["created_at", 2017-02-02 15:48:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:48:00 UTC], ["updated_at", 2017-02-02 15:48:00 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 15], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "f7bdecff-e305-4c22-b336-bd22ef76d812"], ["action", "create"], ["created_at", 2017-02-02 15:48:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:48:00 UTC], ["updated_at", 2017-02-02 15:48:00 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 16], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "124669b1-7014-473e-91ae-fe36b62c916d"], ["action", "create"], ["created_at", 2017-02-02 15:48:00 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:48:00 UTC], ["updated_at", 2017-02-02 15:48:00 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 17], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["record_uuid", "b7e9e893-c3f8-42e2-9cea-fe732f55f4a6"], ["action", "create"], ["created_at", 2017-02-02 15:48:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:48:00 UTC], ["updated_at", 2017-02-02 15:48:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-02 15:48:00 UTC], ["updated_at", 2017-02-02 15:48:00 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 18], ["subject_type", "UserOnly"], ["subject_id", 19], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["record_uuid", "a09bae55-fef0-401e-af51-bb01609ea543"], ["action", "create"], ["created_at", 2017-02-02 15:48:00 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-02 15:48:00 UTC], ["updated_at", 2017-02-02 15:48:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 2], ["created_at", 2017-02-02 15:48:00 UTC], ["updated_at", 2017-02-02 15:48:00 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 20], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,2]}}\""], ["record_uuid", "7eb4bde4-a0e4-4372-b3d7-f000f5284293"], ["action", "create"], ["created_at", 2017-02-02 15:48:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (49.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (7.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:48:27 UTC], ["updated_at", 2017-02-02 15:48:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 73513ms (ActiveRecord: 0.2ms)
  [1m[35m (6.9ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (25.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:50:02 UTC], ["updated_at", 2017-02-02 15:50:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:50:02 UTC], ["updated_at", 2017-02-02 15:50:02 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "098d6001-1b57-4735-8e46-4e1cd9a49866"], ["action", "create"], ["created_at", 2017-02-02 15:50:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6245ms (Views: 0.3ms | ActiveRecord: 3.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:50:08 UTC], ["updated_at", 2017-02-02 15:50:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:50:08 UTC], ["updated_at", 2017-02-02 15:50:08 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "3788e095-bded-44b8-9c6f-2cc64d952f11"], ["action", "register"], ["created_at", 2017-02-02 15:50:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 913ms (Views: 0.1ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:50:09 UTC], ["updated_at", 2017-02-02 15:50:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-02 15:50:09 UTC], ["updated_at", 2017-02-02 15:50:09 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["record_uuid", "bb00e876-1b1d-4a04-ac6f-effc8e00035c"], ["action", "create"], ["created_at", 2017-02-02 15:50:09 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-02 15:50:10 UTC], ["updated_at", 2017-02-02 15:50:10 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "bb00e876-1b1d-4a04-ac6f-effc8e00035c"], ["action", "create"], ["created_at", 2017-02-02 15:50:10 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-02 15:50:12 UTC], ["updated_at", 2017-02-02 15:50:12 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "bb00e876-1b1d-4a04-ac6f-effc8e00035c"], ["action", "create"], ["created_at", 2017-02-02 15:50:12 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-02 15:50:12 UTC], ["updated_at", 2017-02-02 15:50:12 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "bb00e876-1b1d-4a04-ac6f-effc8e00035c"], ["action", "create"], ["created_at", 2017-02-02 15:50:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 2726ms (Views: 0.1ms | ActiveRecord: 7.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (15.7ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (32.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:51:25 UTC], ["updated_at", 2017-02-02 15:51:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:51:25 UTC], ["updated_at", 2017-02-02 15:51:25 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "dd051324-ccc2-4671-9e56-a048cd9d2e92"], ["action", "create"], ["created_at", 2017-02-02 15:51:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 23ms (Views: 0.2ms | ActiveRecord: 2.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:51:25 UTC], ["updated_at", 2017-02-02 15:51:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:51:25 UTC], ["updated_at", 2017-02-02 15:51:25 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "93a2c4ba-a5e9-43a0-9dfd-e8055adfd271"], ["action", "register"], ["created_at", 2017-02-02 15:51:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:51:25 UTC], ["updated_at", 2017-02-02 15:51:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-02 15:51:25 UTC], ["updated_at", 2017-02-02 15:51:25 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["record_uuid", "4c17df15-f859-4cb6-a0a0-4fb61a71d7cf"], ["action", "create"], ["created_at", 2017-02-02 15:51:25 UTC]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-02 15:51:25 UTC], ["updated_at", 2017-02-02 15:51:25 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 6], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "4c17df15-f859-4cb6-a0a0-4fb61a71d7cf"], ["action", "create"], ["created_at", 2017-02-02 15:51:25 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-02 15:51:25 UTC], ["updated_at", 2017-02-02 15:51:25 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 7], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "4c17df15-f859-4cb6-a0a0-4fb61a71d7cf"], ["action", "create"], ["created_at", 2017-02-02 15:51:25 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-02 15:51:25 UTC], ["updated_at", 2017-02-02 15:51:25 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "User"], ["subject_id", 8], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "4c17df15-f859-4cb6-a0a0-4fb61a71d7cf"], ["action", "create"], ["created_at", 2017-02-02 15:51:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 67ms (Views: 0.1ms | ActiveRecord: 9.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (3.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (8.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (29.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "record_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:52:43 UTC], ["updated_at", 2017-02-02 15:52:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:52:43 UTC], ["updated_at", 2017-02-02 15:52:43 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "6af389bc-8de4-4d0a-8f3a-0e8d0d973970"], ["action", "create"], ["created_at", 2017-02-02 15:52:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 31ms (Views: 0.2ms | ActiveRecord: 2.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:52:43 UTC], ["updated_at", 2017-02-02 15:52:43 UTC]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-02 15:52:43 UTC], ["updated_at", 2017-02-02 15:52:43 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["record_uuid", "6ce6631f-51db-4bc9-9acc-0c0ba27ce9d6"], ["action", "register"], ["created_at", 2017-02-02 15:52:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 15:52:43 UTC], ["updated_at", 2017-02-02 15:52:43 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-02 15:52:43 UTC], ["updated_at", 2017-02-02 15:52:43 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["record_uuid", "f3249161-7ea7-41f0-a470-c44d4e0408cf"], ["action", "create"], ["created_at", 2017-02-02 15:52:43 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-02 15:52:43 UTC], ["updated_at", 2017-02-02 15:52:43 UTC]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithCompany"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "f3249161-7ea7-41f0-a470-c44d4e0408cf"], ["action", "create"], ["created_at", 2017-02-02 15:52:43 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-02 15:52:43 UTC], ["updated_at", 2017-02-02 15:52:43 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithCompany"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "f3249161-7ea7-41f0-a470-c44d4e0408cf"], ["action", "create"], ["created_at", 2017-02-02 15:52:43 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-02 15:52:43 UTC], ["updated_at", 2017-02-02 15:52:43 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "record_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithCompany"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["record_uuid", "f3249161-7ea7-41f0-a470-c44d4e0408cf"], ["action", "create"], ["created_at", 2017-02-02 15:52:43 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 72ms (Views: 0.5ms | ActiveRecord: 6.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.7ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (26.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (9.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (5.1ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (124.8ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (24.2ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (8.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (19.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 16:24:07 UTC], ["updated_at", 2017-02-02 16:24:07 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (22.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (14.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (11.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 16:24:38 UTC], ["updated_at", 2017-02-02 16:24:38 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-02 16:24:38 UTC], ["updated_at", 2017-02-02 16:24:38 UTC]]
  [1m[35mSQL (6.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["request_uuid", "8c6b585b-df8e-4dc6-b531-5dd1ce201732"], ["action", "create"], ["created_at", 2017-02-02 16:24:38 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-02 16:24:38 UTC], ["updated_at", 2017-02-02 16:24:38 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["request_uuid", "8c6b585b-df8e-4dc6-b531-5dd1ce201732"], ["action", "create"], ["created_at", 2017-02-02 16:24:38 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-02 16:24:38 UTC], ["updated_at", 2017-02-02 16:24:38 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["request_uuid", "8c6b585b-df8e-4dc6-b531-5dd1ce201732"], ["action", "create"], ["created_at", 2017-02-02 16:24:38 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-02 16:24:38 UTC], ["updated_at", 2017-02-02 16:24:38 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["request_uuid", "8c6b585b-df8e-4dc6-b531-5dd1ce201732"], ["action", "create"], ["created_at", 2017-02-02 16:24:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "8c6b585b-df8e-4dc6-b531-5dd1ce201732"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "8c6b585b-df8e-4dc6-b531-5dd1ce201732"]]
Completed 200 OK in 86ms (Views: 0.2ms | ActiveRecord: 17.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.5ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (27.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (12.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 16:25:02 UTC], ["updated_at", 2017-02-02 16:25:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-02 16:25:03 UTC], ["updated_at", 2017-02-02 16:25:03 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["request_uuid", "ffa34843-076b-4f48-8b4f-e4f13fc3f642"], ["action", "create"], ["created_at", 2017-02-02 16:25:03 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-02 16:25:03 UTC], ["updated_at", 2017-02-02 16:25:03 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["request_uuid", "ffa34843-076b-4f48-8b4f-e4f13fc3f642"], ["action", "create"], ["created_at", 2017-02-02 16:25:03 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-02 16:25:03 UTC], ["updated_at", 2017-02-02 16:25:03 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["request_uuid", "ffa34843-076b-4f48-8b4f-e4f13fc3f642"], ["action", "create"], ["created_at", 2017-02-02 16:25:03 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-02 16:25:03 UTC], ["updated_at", 2017-02-02 16:25:03 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["request_uuid", "ffa34843-076b-4f48-8b4f-e4f13fc3f642"], ["action", "create"], ["created_at", 2017-02-02 16:25:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "ffa34843-076b-4f48-8b4f-e4f13fc3f642"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "ffa34843-076b-4f48-8b4f-e4f13fc3f642"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "ffa34843-076b-4f48-8b4f-e4f13fc3f642"]]
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "ffa34843-076b-4f48-8b4f-e4f13fc3f642"]]
Completed 200 OK in 55876ms (Views: 0.2ms | ActiveRecord: 6.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (26.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (27.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 16:26:48 UTC], ["updated_at", 2017-02-02 16:26:48 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-02 16:26:48 UTC], ["updated_at", 2017-02-02 16:26:48 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["request_uuid", "c0458a5a-ee99-4273-98b6-32dbaaf05d65"], ["action", "create"], ["created_at", 2017-02-02 16:26:48 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-02 16:26:48 UTC], ["updated_at", 2017-02-02 16:26:48 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "c0458a5a-ee99-4273-98b6-32dbaaf05d65"], ["action", "create"], ["created_at", 2017-02-02 16:26:48 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-02 16:26:48 UTC], ["updated_at", 2017-02-02 16:26:48 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "c0458a5a-ee99-4273-98b6-32dbaaf05d65"], ["action", "create"], ["created_at", 2017-02-02 16:26:48 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-02 16:26:48 UTC], ["updated_at", 2017-02-02 16:26:48 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "c0458a5a-ee99-4273-98b6-32dbaaf05d65"], ["action", "create"], ["created_at", 2017-02-02 16:26:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "c0458a5a-ee99-4273-98b6-32dbaaf05d65"]]
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "c0458a5a-ee99-4273-98b6-32dbaaf05d65"]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 22483ms (Views: 0.2ms | ActiveRecord: 18.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (5.0ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (12.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (14.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (12.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (13.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 16:27:28 UTC], ["updated_at", 2017-02-02 16:27:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-02 16:27:28 UTC], ["updated_at", 2017-02-02 16:27:28 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["request_uuid", "9dc224e9-1200-4510-998f-e1d3c85e14f6"], ["action", "create"], ["created_at", 2017-02-02 16:27:28 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-02 16:27:28 UTC], ["updated_at", 2017-02-02 16:27:28 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "9dc224e9-1200-4510-998f-e1d3c85e14f6"], ["action", "create"], ["created_at", 2017-02-02 16:27:28 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-02 16:27:28 UTC], ["updated_at", 2017-02-02 16:27:28 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "9dc224e9-1200-4510-998f-e1d3c85e14f6"], ["action", "create"], ["created_at", 2017-02-02 16:27:28 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-02 16:27:28 UTC], ["updated_at", 2017-02-02 16:27:28 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "9dc224e9-1200-4510-998f-e1d3c85e14f6"], ["action", "create"], ["created_at", 2017-02-02 16:27:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "9dc224e9-1200-4510-998f-e1d3c85e14f6"]]
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "9dc224e9-1200-4510-998f-e1d3c85e14f6"]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 18154ms (Views: 0.2ms | ActiveRecord: 8.2ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.2ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (18.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (35.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 16:28:27 UTC], ["updated_at", 2017-02-02 16:28:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (6.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-02 16:28:27 UTC], ["updated_at", 2017-02-02 16:28:27 UTC]]
  [1m[35mSQL (7.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["request_uuid", "fd08dc4a-d635-4a16-ba83-487582d003fa"], ["action", "create"], ["created_at", 2017-02-02 16:28:27 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-02 16:28:27 UTC], ["updated_at", 2017-02-02 16:28:27 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "fd08dc4a-d635-4a16-ba83-487582d003fa"], ["action", "create"], ["created_at", 2017-02-02 16:28:27 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-02 16:28:27 UTC], ["updated_at", 2017-02-02 16:28:27 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "fd08dc4a-d635-4a16-ba83-487582d003fa"], ["action", "create"], ["created_at", 2017-02-02 16:28:27 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-02 16:28:27 UTC], ["updated_at", 2017-02-02 16:28:27 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "fd08dc4a-d635-4a16-ba83-487582d003fa"], ["action", "create"], ["created_at", 2017-02-02 16:28:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "fd08dc4a-d635-4a16-ba83-487582d003fa"]]
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "fd08dc4a-d635-4a16-ba83-487582d003fa"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (11.6ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (46.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (11.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (3.9ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (37.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (15.8ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (74.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (12.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (14.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (18.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 16:45:56 UTC], ["updated_at", 2017-02-02 16:45:56 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-02 16:45:56 UTC], ["updated_at", 2017-02-02 16:45:56 UTC]]
  [1m[35mSQL (17.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["request_uuid", "f96fcbe8-f3cd-49d6-b549-4b3a7eebe817"], ["action", "create"], ["created_at", 2017-02-02 16:45:56 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-02 16:45:56 UTC], ["updated_at", 2017-02-02 16:45:56 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "f96fcbe8-f3cd-49d6-b549-4b3a7eebe817"], ["action", "create"], ["created_at", 2017-02-02 16:45:56 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-02 16:45:56 UTC], ["updated_at", 2017-02-02 16:45:56 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "f96fcbe8-f3cd-49d6-b549-4b3a7eebe817"], ["action", "create"], ["created_at", 2017-02-02 16:45:56 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-02 16:45:56 UTC], ["updated_at", 2017-02-02 16:45:56 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "f96fcbe8-f3cd-49d6-b549-4b3a7eebe817"], ["action", "create"], ["created_at", 2017-02-02 16:45:56 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "f96fcbe8-f3cd-49d6-b549-4b3a7eebe817"]]
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "f96fcbe8-f3cd-49d6-b549-4b3a7eebe817"]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 183445ms (Views: 0.2ms | ActiveRecord: 26.3ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.8ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (30.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (9.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-02 16:49:10 UTC], ["updated_at", 2017-02-02 16:49:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-02 16:49:10 UTC], ["updated_at", 2017-02-02 16:49:10 UTC]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"1\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}}\""], ["request_uuid", "f53326bb-8cef-4a29-b961-68e9f5501c35"], ["action", "create"], ["created_at", 2017-02-02 16:49:10 UTC]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-02 16:49:10 UTC], ["updated_at", 2017-02-02 16:49:10 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"2\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"2\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}}\""], ["request_uuid", "f53326bb-8cef-4a29-b961-68e9f5501c35"], ["action", "create"], ["created_at", 2017-02-02 16:49:10 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-02 16:49:10 UTC], ["updated_at", 2017-02-02 16:49:10 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"3\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"3\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}}\""], ["request_uuid", "f53326bb-8cef-4a29-b961-68e9f5501c35"], ["action", "create"], ["created_at", 2017-02-02 16:49:10 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-02 16:49:10 UTC], ["updated_at", 2017-02-02 16:49:10 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"4\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"4\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}}\""], ["request_uuid", "f53326bb-8cef-4a29-b961-68e9f5501c35"], ["action", "create"], ["created_at", 2017-02-02 16:49:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "f53326bb-8cef-4a29-b961-68e9f5501c35"]]
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "f53326bb-8cef-4a29-b961-68e9f5501c35"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (50.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 149399480ms (Views: 0.2ms | ActiveRecord: 62.0ms)
  [1m[35m (38.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (14.7ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (50.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (8.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (26.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 07:23:37 UTC], ["updated_at", 2017-02-06 07:23:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 07:23:38 UTC], ["updated_at", 2017-02-06 07:23:38 UTC]]
  [1m[35mSQL (6.9ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"1\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}}\""], ["request_uuid", "51938ea0-ef5a-4d0f-b21e-0319fd8f3514"], ["action", "create"], ["created_at", 2017-02-06 07:23:38 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 07:23:38 UTC], ["updated_at", 2017-02-06 07:23:38 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"2\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"2\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}}\""], ["request_uuid", "51938ea0-ef5a-4d0f-b21e-0319fd8f3514"], ["action", "create"], ["created_at", 2017-02-06 07:23:38 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 07:23:38 UTC], ["updated_at", 2017-02-06 07:23:38 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"3\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"3\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}}\""], ["request_uuid", "51938ea0-ef5a-4d0f-b21e-0319fd8f3514"], ["action", "create"], ["created_at", 2017-02-06 07:23:38 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 07:23:38 UTC], ["updated_at", 2017-02-06 07:23:38 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"4\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"4\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}}\""], ["request_uuid", "51938ea0-ef5a-4d0f-b21e-0319fd8f3514"], ["action", "create"], ["created_at", 2017-02-06 07:23:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "51938ea0-ef5a-4d0f-b21e-0319fd8f3514"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "51938ea0-ef5a-4d0f-b21e-0319fd8f3514"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 24992ms (Views: 0.2ms | ActiveRecord: 14.7ms)
  [1m[35m (4.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.9ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 07:24:13 UTC], ["updated_at", 2017-02-06 07:24:13 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 07:24:13 UTC], ["updated_at", 2017-02-06 07:24:13 UTC]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["request_uuid", "84301cbd-8da1-4f33-8224-bde086469348"], ["action", "create"], ["created_at", 2017-02-06 07:24:13 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 07:24:13 UTC], ["updated_at", 2017-02-06 07:24:13 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "84301cbd-8da1-4f33-8224-bde086469348"], ["action", "create"], ["created_at", 2017-02-06 07:24:13 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 07:24:13 UTC], ["updated_at", 2017-02-06 07:24:13 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "84301cbd-8da1-4f33-8224-bde086469348"], ["action", "create"], ["created_at", 2017-02-06 07:24:13 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 07:24:13 UTC], ["updated_at", 2017-02-06 07:24:13 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "84301cbd-8da1-4f33-8224-bde086469348"], ["action", "create"], ["created_at", 2017-02-06 07:24:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "84301cbd-8da1-4f33-8224-bde086469348"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "84301cbd-8da1-4f33-8224-bde086469348"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 1082460ms (Views: 0.2ms | ActiveRecord: 9.7ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.2ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (8.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (7.8ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (9.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 07:42:21 UTC], ["updated_at", 2017-02-06 07:42:21 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 07:42:21 UTC], ["updated_at", 2017-02-06 07:42:21 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["request_uuid", "5ba51925-c275-4df6-bd47-059aa0d04f15"], ["action", "create"], ["created_at", 2017-02-06 07:42:21 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 07:42:21 UTC], ["updated_at", 2017-02-06 07:42:21 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "5ba51925-c275-4df6-bd47-059aa0d04f15"], ["action", "create"], ["created_at", 2017-02-06 07:42:21 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 07:42:21 UTC], ["updated_at", 2017-02-06 07:42:21 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "5ba51925-c275-4df6-bd47-059aa0d04f15"], ["action", "create"], ["created_at", 2017-02-06 07:42:21 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 07:42:21 UTC], ["updated_at", 2017-02-06 07:42:21 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "5ba51925-c275-4df6-bd47-059aa0d04f15"], ["action", "create"], ["created_at", 2017-02-06 07:42:21 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "5ba51925-c275-4df6-bd47-059aa0d04f15"]]
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "5ba51925-c275-4df6-bd47-059aa0d04f15"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 79106ms (Views: 0.2ms | ActiveRecord: 7.9ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (17.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 07:43:50 UTC], ["updated_at", 2017-02-06 07:43:50 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 07:43:50 UTC], ["updated_at", 2017-02-06 07:43:50 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["request_uuid", "c000b90b-2239-4854-92e0-c2a593338b17"], ["action", "create"], ["created_at", 2017-02-06 07:43:50 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 07:43:50 UTC], ["updated_at", 2017-02-06 07:43:50 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "c000b90b-2239-4854-92e0-c2a593338b17"], ["action", "create"], ["created_at", 2017-02-06 07:43:50 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 07:43:50 UTC], ["updated_at", 2017-02-06 07:43:50 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "c000b90b-2239-4854-92e0-c2a593338b17"], ["action", "create"], ["created_at", 2017-02-06 07:43:50 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 07:43:50 UTC], ["updated_at", 2017-02-06 07:43:50 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "c000b90b-2239-4854-92e0-c2a593338b17"], ["action", "create"], ["created_at", 2017-02-06 07:43:51 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "c000b90b-2239-4854-92e0-c2a593338b17"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "c000b90b-2239-4854-92e0-c2a593338b17"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" WHERE "records"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1 WHERE "records"."id" = $2[0m  [["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]},\\\"users\\\":{\\\"2\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]},\\\"3\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]},\\\"4\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}}\""], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 982807ms (Views: 0.2ms | ActiveRecord: 10.5ms)
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.7ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:00:19 UTC], ["updated_at", 2017-02-06 08:00:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:00:19 UTC], ["updated_at", 2017-02-06 08:00:19 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["request_uuid", "8c756ada-10e2-429e-8266-f9095a961836"], ["action", "create"], ["created_at", 2017-02-06 08:00:19 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 08:00:19 UTC], ["updated_at", 2017-02-06 08:00:19 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "8c756ada-10e2-429e-8266-f9095a961836"], ["action", "create"], ["created_at", 2017-02-06 08:00:19 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 08:00:19 UTC], ["updated_at", 2017-02-06 08:00:19 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "8c756ada-10e2-429e-8266-f9095a961836"], ["action", "create"], ["created_at", 2017-02-06 08:00:19 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 08:00:19 UTC], ["updated_at", 2017-02-06 08:00:19 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "8c756ada-10e2-429e-8266-f9095a961836"], ["action", "create"], ["created_at", 2017-02-06 08:00:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "8c756ada-10e2-429e-8266-f9095a961836"]]
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "8c756ada-10e2-429e-8266-f9095a961836"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 88ms (Views: 0.2ms | ActiveRecord: 8.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.0ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (22.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:05:39 UTC], ["updated_at", 2017-02-06 08:05:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:05:40 UTC], ["updated_at", 2017-02-06 08:05:40 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["request_uuid", "9cb02ae2-7155-46a5-a874-dd6a36758272"], ["action", "create"], ["created_at", 2017-02-06 08:05:40 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 08:05:40 UTC], ["updated_at", 2017-02-06 08:05:40 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "9cb02ae2-7155-46a5-a874-dd6a36758272"], ["action", "create"], ["created_at", 2017-02-06 08:05:40 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 08:05:40 UTC], ["updated_at", 2017-02-06 08:05:40 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "9cb02ae2-7155-46a5-a874-dd6a36758272"], ["action", "create"], ["created_at", 2017-02-06 08:05:40 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 08:05:40 UTC], ["updated_at", 2017-02-06 08:05:40 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "9cb02ae2-7155-46a5-a874-dd6a36758272"], ["action", "create"], ["created_at", 2017-02-06 08:05:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "9cb02ae2-7155-46a5-a874-dd6a36758272"]]
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "9cb02ae2-7155-46a5-a874-dd6a36758272"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["request_uuid", "9cb02ae2-7155-46a5-a874-dd6a36758272"], ["created_at", 2017-02-06 08:12:52 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 464137ms (Views: 0.2ms | ActiveRecord: 11.7ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.5ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:13:40 UTC], ["updated_at", 2017-02-06 08:13:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:13:40 UTC], ["updated_at", 2017-02-06 08:13:40 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["request_uuid", "1a95d72f-0cf6-4cdf-a6c2-d28c1af661d2"], ["action", "create"], ["created_at", 2017-02-06 08:13:40 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 08:13:40 UTC], ["updated_at", 2017-02-06 08:13:40 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "1a95d72f-0cf6-4cdf-a6c2-d28c1af661d2"], ["action", "create"], ["created_at", 2017-02-06 08:13:40 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 08:13:40 UTC], ["updated_at", 2017-02-06 08:13:40 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "1a95d72f-0cf6-4cdf-a6c2-d28c1af661d2"], ["action", "create"], ["created_at", 2017-02-06 08:13:40 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 08:13:40 UTC], ["updated_at", 2017-02-06 08:13:40 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "1a95d72f-0cf6-4cdf-a6c2-d28c1af661d2"], ["action", "create"], ["created_at", 2017-02-06 08:13:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "1a95d72f-0cf6-4cdf-a6c2-d28c1af661d2"]]
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "1a95d72f-0cf6-4cdf-a6c2-d28c1af661d2"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 500 Internal Server Error in 92ms (Views: 0.2ms | ActiveRecord: 10.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.0ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (8.4ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:13:56 UTC], ["updated_at", 2017-02-06 08:13:56 UTC]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:13:56 UTC], ["updated_at", 2017-02-06 08:13:56 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["request_uuid", "79b62eb1-6673-443f-b711-31a2b1c72d95"], ["action", "create"], ["created_at", 2017-02-06 08:13:56 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 08:13:56 UTC], ["updated_at", 2017-02-06 08:13:56 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "79b62eb1-6673-443f-b711-31a2b1c72d95"], ["action", "create"], ["created_at", 2017-02-06 08:13:56 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 08:13:56 UTC], ["updated_at", 2017-02-06 08:13:56 UTC]]
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "79b62eb1-6673-443f-b711-31a2b1c72d95"], ["action", "create"], ["created_at", 2017-02-06 08:13:56 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 08:13:56 UTC], ["updated_at", 2017-02-06 08:13:56 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "79b62eb1-6673-443f-b711-31a2b1c72d95"], ["action", "create"], ["created_at", 2017-02-06 08:13:56 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "79b62eb1-6673-443f-b711-31a2b1c72d95"]]
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "79b62eb1-6673-443f-b711-31a2b1c72d95"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["request_uuid", "79b62eb1-6673-443f-b711-31a2b1c72d95"], ["created_at", 2017-02-06 08:14:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["request_uuid", "79b62eb1-6673-443f-b711-31a2b1c72d95"], ["created_at", 2017-02-06 08:17:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUserWithAll Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 275995ms (Views: 0.4ms | ActiveRecord: 15.5ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:18:40 UTC], ["updated_at", 2017-02-06 08:18:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:18:40 UTC], ["updated_at", 2017-02-06 08:18:40 UTC]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["request_uuid", "6a6154bf-45c4-48d5-ac03-e6d7fa085445"], ["action", "create"], ["created_at", 2017-02-06 08:18:40 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 08:18:40 UTC], ["updated_at", 2017-02-06 08:18:40 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "6a6154bf-45c4-48d5-ac03-e6d7fa085445"], ["action", "create"], ["created_at", 2017-02-06 08:18:40 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 08:18:40 UTC], ["updated_at", 2017-02-06 08:18:40 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "6a6154bf-45c4-48d5-ac03-e6d7fa085445"], ["action", "create"], ["created_at", 2017-02-06 08:18:40 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 08:18:40 UTC], ["updated_at", 2017-02-06 08:18:40 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "6a6154bf-45c4-48d5-ac03-e6d7fa085445"], ["action", "create"], ["created_at", 2017-02-06 08:18:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "6a6154bf-45c4-48d5-ac03-e6d7fa085445"]]
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "6a6154bf-45c4-48d5-ac03-e6d7fa085445"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["request_uuid", "6a6154bf-45c4-48d5-ac03-e6d7fa085445"], ["created_at", 2017-02-06 08:18:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUserWithAll Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 931131ms (Views: 0.2ms | ActiveRecord: 15.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (39.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (19.5ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:38:03 UTC], ["updated_at", 2017-02-06 08:38:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:38:03 UTC], ["updated_at", 2017-02-06 08:38:03 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "c6698f5d-b80a-4a7c-95f8-3a8c2c09de97"], ["action", "create"], ["created_at", 2017-02-06 08:38:03 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 08:38:03 UTC], ["updated_at", 2017-02-06 08:38:03 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "c6698f5d-b80a-4a7c-95f8-3a8c2c09de97"], ["action", "create"], ["created_at", 2017-02-06 08:38:03 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 08:38:03 UTC], ["updated_at", 2017-02-06 08:38:03 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "c6698f5d-b80a-4a7c-95f8-3a8c2c09de97"], ["action", "create"], ["created_at", 2017-02-06 08:38:03 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 08:38:03 UTC], ["updated_at", 2017-02-06 08:38:03 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "c6698f5d-b80a-4a7c-95f8-3a8c2c09de97"], ["action", "create"], ["created_at", 2017-02-06 08:38:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "c6698f5d-b80a-4a7c-95f8-3a8c2c09de97"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "c6698f5d-b80a-4a7c-95f8-3a8c2c09de97"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]},\\\"users\\\":{\\\"2\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]},\\\"3\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]},\\\"4\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"2\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"3\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"4\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}}\""], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9951ms (Views: 0.2ms | ActiveRecord: 9.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.9ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (20.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.8ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (13.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:38:35 UTC], ["updated_at", 2017-02-06 08:38:35 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:38:35 UTC], ["updated_at", 2017-02-06 08:38:35 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "64c013b1-ce77-4fce-9f4f-c1ee195a0375"], ["action", "create"], ["created_at", 2017-02-06 08:38:35 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 08:38:35 UTC], ["updated_at", 2017-02-06 08:38:35 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "64c013b1-ce77-4fce-9f4f-c1ee195a0375"], ["action", "create"], ["created_at", 2017-02-06 08:38:35 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 08:38:35 UTC], ["updated_at", 2017-02-06 08:38:35 UTC]]
  [1m[36mCompany Load (4.0ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "64c013b1-ce77-4fce-9f4f-c1ee195a0375"], ["action", "create"], ["created_at", 2017-02-06 08:38:35 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 08:38:35 UTC], ["updated_at", 2017-02-06 08:38:35 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "64c013b1-ce77-4fce-9f4f-c1ee195a0375"], ["action", "create"], ["created_at", 2017-02-06 08:38:35 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "64c013b1-ce77-4fce-9f4f-c1ee195a0375"]]
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "64c013b1-ce77-4fce-9f4f-c1ee195a0375"]]
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]},\\\"users\\\":{\\\"2\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]},\\\"3\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]},\\\"4\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"2\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"3\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"4\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}}\""], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 163ms (Views: 1.1ms | ActiveRecord: 18.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.8ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (23.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:39:02 UTC], ["updated_at", 2017-02-06 08:39:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:39:02 UTC], ["updated_at", 2017-02-06 08:39:02 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "958a63ac-2927-4c4d-b78b-0b0950501e9b"], ["action", "create"], ["created_at", 2017-02-06 08:39:02 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 08:39:02 UTC], ["updated_at", 2017-02-06 08:39:02 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "958a63ac-2927-4c4d-b78b-0b0950501e9b"], ["action", "create"], ["created_at", 2017-02-06 08:39:02 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 08:39:02 UTC], ["updated_at", 2017-02-06 08:39:02 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "958a63ac-2927-4c4d-b78b-0b0950501e9b"], ["action", "create"], ["created_at", 2017-02-06 08:39:03 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 08:39:03 UTC], ["updated_at", 2017-02-06 08:39:03 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "958a63ac-2927-4c4d-b78b-0b0950501e9b"], ["action", "create"], ["created_at", 2017-02-06 08:39:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "958a63ac-2927-4c4d-b78b-0b0950501e9b"]]
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "958a63ac-2927-4c4d-b78b-0b0950501e9b"]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]},\\\"users\\\":{\\\"2\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]},\\\"3\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]},\\\"4\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"2\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"3\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"4\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}}\""], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 3]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 4]]
Completed 200 OK in 89ms (Views: 0.2ms | ActiveRecord: 9.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (29.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.2ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:40:19 UTC], ["updated_at", 2017-02-06 08:40:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:40:19 UTC], ["updated_at", 2017-02-06 08:40:19 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "d1d501c9-f2c5-40d9-a883-d34d9c2c6c77"], ["action", "create"], ["created_at", 2017-02-06 08:40:19 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 08:40:19 UTC], ["updated_at", 2017-02-06 08:40:19 UTC]]
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "d1d501c9-f2c5-40d9-a883-d34d9c2c6c77"], ["action", "create"], ["created_at", 2017-02-06 08:40:19 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 08:40:19 UTC], ["updated_at", 2017-02-06 08:40:19 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "d1d501c9-f2c5-40d9-a883-d34d9c2c6c77"], ["action", "create"], ["created_at", 2017-02-06 08:40:19 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 08:40:19 UTC], ["updated_at", 2017-02-06 08:40:19 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "d1d501c9-f2c5-40d9-a883-d34d9c2c6c77"], ["action", "create"], ["created_at", 2017-02-06 08:40:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "d1d501c9-f2c5-40d9-a883-d34d9c2c6c77"]]
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "d1d501c9-f2c5-40d9-a883-d34d9c2c6c77"]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]},\\\"users\\\":{\\\"2\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]},\\\"3\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]},\\\"4\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"2\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"3\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"4\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}}\""], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 3]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 4]]
Completed 200 OK in 113ms (Views: 0.2ms | ActiveRecord: 13.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (6.8ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (13.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (9.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:40:55 UTC], ["updated_at", 2017-02-06 08:40:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:40:55 UTC], ["updated_at", 2017-02-06 08:40:55 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "8873da28-7c2c-4670-9583-e16f36490d36"], ["action", "create"], ["created_at", 2017-02-06 08:40:55 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 08:40:55 UTC], ["updated_at", 2017-02-06 08:40:55 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "8873da28-7c2c-4670-9583-e16f36490d36"], ["action", "create"], ["created_at", 2017-02-06 08:40:55 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 08:40:55 UTC], ["updated_at", 2017-02-06 08:40:55 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "8873da28-7c2c-4670-9583-e16f36490d36"], ["action", "create"], ["created_at", 2017-02-06 08:40:55 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 08:40:55 UTC], ["updated_at", 2017-02-06 08:40:55 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "8873da28-7c2c-4670-9583-e16f36490d36"], ["action", "create"], ["created_at", 2017-02-06 08:40:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "8873da28-7c2c-4670-9583-e16f36490d36"]]
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "8873da28-7c2c-4670-9583-e16f36490d36"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]},\\\"users\\\":{\\\"2\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]},\\\"3\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]},\\\"4\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"2\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"3\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"4\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}}\""], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 2]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 3]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 4]]
Completed 200 OK in 108ms (Views: 0.2ms | ActiveRecord: 13.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (17.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.4ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:42:23 UTC], ["updated_at", 2017-02-06 08:42:23 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:42:23 UTC], ["updated_at", 2017-02-06 08:42:23 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "41f94161-4eb3-4adf-9bf9-f86c49d7e03d"], ["action", "create"], ["created_at", 2017-02-06 08:42:23 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 08:42:23 UTC], ["updated_at", 2017-02-06 08:42:23 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "41f94161-4eb3-4adf-9bf9-f86c49d7e03d"], ["action", "create"], ["created_at", 2017-02-06 08:42:23 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 08:42:23 UTC], ["updated_at", 2017-02-06 08:42:23 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "41f94161-4eb3-4adf-9bf9-f86c49d7e03d"], ["action", "create"], ["created_at", 2017-02-06 08:42:23 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 08:42:23 UTC], ["updated_at", 2017-02-06 08:42:23 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "41f94161-4eb3-4adf-9bf9-f86c49d7e03d"], ["action", "create"], ["created_at", 2017-02-06 08:42:23 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "41f94161-4eb3-4adf-9bf9-f86c49d7e03d"]]
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "41f94161-4eb3-4adf-9bf9-f86c49d7e03d"]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]},\\\"users\\\":{\\\"2\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]},\\\"3\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]},\\\"4\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"2\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"3\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"4\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}}\""], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 3]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 4]]
Completed 200 OK in 90ms (Views: 0.2ms | ActiveRecord: 9.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (8.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (23.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (7.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:44:56 UTC], ["updated_at", 2017-02-06 08:44:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:44:57 UTC], ["updated_at", 2017-02-06 08:44:57 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "f0740b53-039e-44ca-82f3-ceed0529a1d2"], ["action", "create"], ["created_at", 2017-02-06 08:44:57 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 08:44:57 UTC], ["updated_at", 2017-02-06 08:44:57 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "f0740b53-039e-44ca-82f3-ceed0529a1d2"], ["action", "create"], ["created_at", 2017-02-06 08:44:57 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 08:44:57 UTC], ["updated_at", 2017-02-06 08:44:57 UTC]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "f0740b53-039e-44ca-82f3-ceed0529a1d2"], ["action", "create"], ["created_at", 2017-02-06 08:44:57 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 08:44:57 UTC], ["updated_at", 2017-02-06 08:44:57 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "f0740b53-039e-44ca-82f3-ceed0529a1d2"], ["action", "create"], ["created_at", 2017-02-06 08:44:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 84ms (Views: 0.2ms | ActiveRecord: 9.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (11.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (8.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:45:02 UTC], ["updated_at", 2017-02-06 08:45:02 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-06 08:45:02 UTC], ["updated_at", 2017-02-06 08:45:02 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "8a501509-e31c-4070-ae34-36c36d91ab18"], ["action", "create"], ["created_at", 2017-02-06 08:45:02 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 33ms (Views: 0.3ms | ActiveRecord: 3.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:45:02 UTC], ["updated_at", 2017-02-06 08:45:02 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-06 08:45:02 UTC], ["updated_at", 2017-02-06 08:45:02 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "2c129e23-1c07-4de9-ad40-de37307edcbb"], ["action", "register"], ["created_at", 2017-02-06 08:45:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:45:02 UTC], ["updated_at", 2017-02-06 08:45:02 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:45:02 UTC], ["updated_at", 2017-02-06 08:45:02 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "5dbca17f-de30-4281-923f-9eb6434201d1"], ["action", "create"], ["created_at", 2017-02-06 08:45:02 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 08:45:02 UTC], ["updated_at", 2017-02-06 08:45:02 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "5dbca17f-de30-4281-923f-9eb6434201d1"], ["action", "create"], ["created_at", 2017-02-06 08:45:02 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 08:45:02 UTC], ["updated_at", 2017-02-06 08:45:02 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "5dbca17f-de30-4281-923f-9eb6434201d1"], ["action", "create"], ["created_at", 2017-02-06 08:45:02 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 08:45:02 UTC], ["updated_at", 2017-02-06 08:45:02 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "5dbca17f-de30-4281-923f-9eb6434201d1"], ["action", "create"], ["created_at", 2017-02-06 08:45:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 56ms (Views: 0.1ms | ActiveRecord: 5.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:45:02 UTC], ["updated_at", 2017-02-06 08:45:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:45:02 UTC], ["updated_at", 2017-02-06 08:45:02 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "0c04c9a3-59a7-471e-879f-c70eed3a7b3c"], ["action", "create"], ["created_at", 2017-02-06 08:45:02 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", 2017-02-06 08:45:02 UTC], ["updated_at", 2017-02-06 08:45:02 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "0c04c9a3-59a7-471e-879f-c70eed3a7b3c"], ["action", "create"], ["created_at", 2017-02-06 08:45:02 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", 2017-02-06 08:45:02 UTC], ["updated_at", 2017-02-06 08:45:02 UTC]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "0c04c9a3-59a7-471e-879f-c70eed3a7b3c"], ["action", "create"], ["created_at", 2017-02-06 08:45:02 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", 2017-02-06 08:45:02 UTC], ["updated_at", 2017-02-06 08:45:02 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "0c04c9a3-59a7-471e-879f-c70eed3a7b3c"], ["action", "create"], ["created_at", 2017-02-06 08:45:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "0c04c9a3-59a7-471e-879f-c70eed3a7b3c"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "0c04c9a3-59a7-471e-879f-c70eed3a7b3c"]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]},\\\"users\\\":{\\\"10\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,2]},\\\"11\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,2]},\\\"12\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,2]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"10\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"11\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"12\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}}\""], ["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 10]]
Completed 200 OK in 49ms (Views: 0.1ms | ActiveRecord: 6.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:45:02 UTC], ["updated_at", 2017-02-06 08:45:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-06 08:45:02 UTC], ["updated_at", 2017-02-06 08:45:02 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", 2017-02-06 08:45:02 UTC], ["updated_at", 2017-02-06 08:45:02 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "a6de6ef1-0836-4240-9250-dc8c43e3c1f2"], ["action", "create"], ["created_at", 2017-02-06 08:45:02 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", 2017-02-06 08:45:02 UTC], ["updated_at", 2017-02-06 08:45:02 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "a6de6ef1-0836-4240-9250-dc8c43e3c1f2"], ["action", "create"], ["created_at", 2017-02-06 08:45:02 UTC]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", 2017-02-06 08:45:02 UTC], ["updated_at", 2017-02-06 08:45:02 UTC]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "a6de6ef1-0836-4240-9250-dc8c43e3c1f2"], ["action", "create"], ["created_at", 2017-02-06 08:45:02 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "a6de6ef1-0836-4240-9250-dc8c43e3c1f2"]]
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "a6de6ef1-0836-4240-9250-dc8c43e3c1f2"]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
Completed 500 Internal Server Error in 53ms (Views: 0.2ms | ActiveRecord: 6.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.6ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (9.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (7.1ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:45:32 UTC], ["updated_at", 2017-02-06 08:45:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-06 08:45:32 UTC], ["updated_at", 2017-02-06 08:45:32 UTC]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "7ee7733e-6e22-48d1-8c67-29bad74f996c"], ["action", "create"], ["created_at", 2017-02-06 08:45:32 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 31ms (Views: 0.2ms | ActiveRecord: 3.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:45:32 UTC], ["updated_at", 2017-02-06 08:45:32 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-06 08:45:32 UTC], ["updated_at", 2017-02-06 08:45:32 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "581814a3-3260-4802-b6fe-5c1741fb40a3"], ["action", "register"], ["created_at", 2017-02-06 08:45:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.3ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:45:32 UTC], ["updated_at", 2017-02-06 08:45:32 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:45:32 UTC], ["updated_at", 2017-02-06 08:45:32 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "31eb77fd-15eb-487f-a707-9318b2580b55"], ["action", "create"], ["created_at", 2017-02-06 08:45:32 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 08:45:32 UTC], ["updated_at", 2017-02-06 08:45:32 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "31eb77fd-15eb-487f-a707-9318b2580b55"], ["action", "create"], ["created_at", 2017-02-06 08:45:32 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 08:45:32 UTC], ["updated_at", 2017-02-06 08:45:32 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "31eb77fd-15eb-487f-a707-9318b2580b55"], ["action", "create"], ["created_at", 2017-02-06 08:45:32 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 08:45:32 UTC], ["updated_at", 2017-02-06 08:45:32 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "31eb77fd-15eb-487f-a707-9318b2580b55"], ["action", "create"], ["created_at", 2017-02-06 08:45:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 59ms (Views: 0.2ms | ActiveRecord: 5.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:45:32 UTC], ["updated_at", 2017-02-06 08:45:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:45:32 UTC], ["updated_at", 2017-02-06 08:45:32 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "9a92c0d4-799e-418f-bc66-dcb869ebf1fd"], ["action", "create"], ["created_at", 2017-02-06 08:45:32 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", 2017-02-06 08:45:32 UTC], ["updated_at", 2017-02-06 08:45:32 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "9a92c0d4-799e-418f-bc66-dcb869ebf1fd"], ["action", "create"], ["created_at", 2017-02-06 08:45:32 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", 2017-02-06 08:45:32 UTC], ["updated_at", 2017-02-06 08:45:32 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "9a92c0d4-799e-418f-bc66-dcb869ebf1fd"], ["action", "create"], ["created_at", 2017-02-06 08:45:32 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", 2017-02-06 08:45:32 UTC], ["updated_at", 2017-02-06 08:45:32 UTC]]
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "9a92c0d4-799e-418f-bc66-dcb869ebf1fd"], ["action", "create"], ["created_at", 2017-02-06 08:45:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "9a92c0d4-799e-418f-bc66-dcb869ebf1fd"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "9a92c0d4-799e-418f-bc66-dcb869ebf1fd"]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]},\\\"users\\\":{\\\"10\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,2]},\\\"11\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,2]},\\\"12\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,2]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"10\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"11\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"12\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}}\""], ["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 10]]
Completed 200 OK in 59ms (Views: 0.2ms | ActiveRecord: 7.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:45:32 UTC], ["updated_at", 2017-02-06 08:45:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-06 08:45:32 UTC], ["updated_at", 2017-02-06 08:45:32 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", 2017-02-06 08:45:32 UTC], ["updated_at", 2017-02-06 08:45:32 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "5fa506ac-658b-4b27-821b-7ef0d4ef2e4b"], ["action", "create"], ["created_at", 2017-02-06 08:45:32 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", 2017-02-06 08:45:33 UTC], ["updated_at", 2017-02-06 08:45:33 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "5fa506ac-658b-4b27-821b-7ef0d4ef2e4b"], ["action", "create"], ["created_at", 2017-02-06 08:45:33 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", 2017-02-06 08:45:33 UTC], ["updated_at", 2017-02-06 08:45:33 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "5fa506ac-658b-4b27-821b-7ef0d4ef2e4b"], ["action", "create"], ["created_at", 2017-02-06 08:45:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "5fa506ac-658b-4b27-821b-7ef0d4ef2e4b"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "5fa506ac-658b-4b27-821b-7ef0d4ef2e4b"]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
Completed 500 Internal Server Error in 46ms (Views: 0.1ms | ActiveRecord: 5.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.7ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.8ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:45:42 UTC], ["updated_at", 2017-02-06 08:45:42 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-06 08:45:42 UTC], ["updated_at", 2017-02-06 08:45:42 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "91d0bc5d-ede8-4e74-877c-d1227d184814"], ["action", "create"], ["created_at", 2017-02-06 08:45:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 34ms (Views: 0.2ms | ActiveRecord: 3.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:45:42 UTC], ["updated_at", 2017-02-06 08:45:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-06 08:45:42 UTC], ["updated_at", 2017-02-06 08:45:42 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "7dc32d7f-e665-40de-b4ea-7ae1b83c65cc"], ["action", "register"], ["created_at", 2017-02-06 08:45:42 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:45:42 UTC], ["updated_at", 2017-02-06 08:45:42 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:45:42 UTC], ["updated_at", 2017-02-06 08:45:42 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "43a65d2d-9769-400f-92f4-3c050e42804c"], ["action", "create"], ["created_at", 2017-02-06 08:45:42 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 08:45:42 UTC], ["updated_at", 2017-02-06 08:45:42 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "43a65d2d-9769-400f-92f4-3c050e42804c"], ["action", "create"], ["created_at", 2017-02-06 08:45:42 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 08:45:42 UTC], ["updated_at", 2017-02-06 08:45:42 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "43a65d2d-9769-400f-92f4-3c050e42804c"], ["action", "create"], ["created_at", 2017-02-06 08:45:42 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 08:45:42 UTC], ["updated_at", 2017-02-06 08:45:42 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "43a65d2d-9769-400f-92f4-3c050e42804c"], ["action", "create"], ["created_at", 2017-02-06 08:45:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 60ms (Views: 0.2ms | ActiveRecord: 5.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:45:42 UTC], ["updated_at", 2017-02-06 08:45:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:45:42 UTC], ["updated_at", 2017-02-06 08:45:42 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "1d7cbc96-67c3-4feb-ae0a-7607582b3f19"], ["action", "create"], ["created_at", 2017-02-06 08:45:42 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", 2017-02-06 08:45:42 UTC], ["updated_at", 2017-02-06 08:45:42 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "1d7cbc96-67c3-4feb-ae0a-7607582b3f19"], ["action", "create"], ["created_at", 2017-02-06 08:45:42 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", 2017-02-06 08:45:42 UTC], ["updated_at", 2017-02-06 08:45:42 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "1d7cbc96-67c3-4feb-ae0a-7607582b3f19"], ["action", "create"], ["created_at", 2017-02-06 08:45:42 UTC]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", 2017-02-06 08:45:42 UTC], ["updated_at", 2017-02-06 08:45:42 UTC]]
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "1d7cbc96-67c3-4feb-ae0a-7607582b3f19"], ["action", "create"], ["created_at", 2017-02-06 08:45:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "1d7cbc96-67c3-4feb-ae0a-7607582b3f19"]]
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "1d7cbc96-67c3-4feb-ae0a-7607582b3f19"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]},\\\"users\\\":{\\\"10\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,2]},\\\"11\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,2]},\\\"12\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,2]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"10\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"11\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"12\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}}\""], ["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 10]]
Completed 200 OK in 57ms (Views: 0.2ms | ActiveRecord: 8.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:45:42 UTC], ["updated_at", 2017-02-06 08:45:42 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-06 08:45:42 UTC], ["updated_at", 2017-02-06 08:45:42 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", 2017-02-06 08:45:42 UTC], ["updated_at", 2017-02-06 08:45:42 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "0a275ddd-40e2-4716-8e07-f1f9fe212be6"], ["action", "create"], ["created_at", 2017-02-06 08:45:42 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", 2017-02-06 08:45:42 UTC], ["updated_at", 2017-02-06 08:45:42 UTC]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "0a275ddd-40e2-4716-8e07-f1f9fe212be6"], ["action", "create"], ["created_at", 2017-02-06 08:45:42 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", 2017-02-06 08:45:42 UTC], ["updated_at", 2017-02-06 08:45:42 UTC]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "0a275ddd-40e2-4716-8e07-f1f9fe212be6"], ["action", "create"], ["created_at", 2017-02-06 08:45:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "0a275ddd-40e2-4716-8e07-f1f9fe212be6"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "0a275ddd-40e2-4716-8e07-f1f9fe212be6"]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"14\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,3]},\\\"15\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,3]},\\\"16\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,3]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"14\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":null},\\\"15\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":null},\\\"16\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":null}}}\""], ["request_uuid", "0a275ddd-40e2-4716-8e07-f1f9fe212be6"], ["created_at", 2017-02-06 08:45:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 11]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 12]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 13]]
Completed 200 OK in 47ms (Views: 0.2ms | ActiveRecord: 6.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.6ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (4.7ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (13.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:45:58 UTC], ["updated_at", 2017-02-06 08:45:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-06 08:45:58 UTC], ["updated_at", 2017-02-06 08:45:58 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 08:45:58 UTC], ["updated_at", 2017-02-06 08:45:58 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "778e120b-5c34-47cf-a6a0-6397d8ea878d"], ["action", "create"], ["created_at", 2017-02-06 08:45:58 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 08:45:58 UTC], ["updated_at", 2017-02-06 08:45:58 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "778e120b-5c34-47cf-a6a0-6397d8ea878d"], ["action", "create"], ["created_at", 2017-02-06 08:45:58 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 08:45:58 UTC], ["updated_at", 2017-02-06 08:45:58 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "778e120b-5c34-47cf-a6a0-6397d8ea878d"], ["action", "create"], ["created_at", 2017-02-06 08:45:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "778e120b-5c34-47cf-a6a0-6397d8ea878d"]]
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "778e120b-5c34-47cf-a6a0-6397d8ea878d"]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"2\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]},\\\"3\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]},\\\"4\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"2\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":null},\\\"3\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":null},\\\"4\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":null}}}\""], ["request_uuid", "778e120b-5c34-47cf-a6a0-6397d8ea878d"], ["created_at", 2017-02-06 08:46:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 3]]
Completed 200 OK in 11724ms (Views: 0.2ms | ActiveRecord: 9.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.7ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (4.4ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (19.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (19.3ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (12.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:46:28 UTC], ["updated_at", 2017-02-06 08:46:28 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-06 08:46:28 UTC], ["updated_at", 2017-02-06 08:46:28 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 08:46:28 UTC], ["updated_at", 2017-02-06 08:46:28 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "e08045e1-2a9c-4ccb-92c4-753c66e34923"], ["action", "create"], ["created_at", 2017-02-06 08:46:28 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 08:46:28 UTC], ["updated_at", 2017-02-06 08:46:28 UTC]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "e08045e1-2a9c-4ccb-92c4-753c66e34923"], ["action", "create"], ["created_at", 2017-02-06 08:46:28 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 08:46:28 UTC], ["updated_at", 2017-02-06 08:46:28 UTC]]
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 4], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "e08045e1-2a9c-4ccb-92c4-753c66e34923"], ["action", "create"], ["created_at", 2017-02-06 08:46:29 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "e08045e1-2a9c-4ccb-92c4-753c66e34923"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "e08045e1-2a9c-4ccb-92c4-753c66e34923"]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"2\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]},\\\"3\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]},\\\"4\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"2\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":null},\\\"3\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":null},\\\"4\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":null}}}\""], ["request_uuid", "e08045e1-2a9c-4ccb-92c4-753c66e34923"], ["created_at", 2017-02-06 08:46:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 2]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 3]]
Completed 200 OK in 126ms (Views: 0.2ms | ActiveRecord: 14.1ms)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (19.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (28.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (12.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:54:58 UTC], ["updated_at", 2017-02-06 08:54:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-06 08:54:58 UTC], ["updated_at", 2017-02-06 08:54:58 UTC]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "dbd952cd-3387-4fe1-a35a-2f694e299636"], ["action", "create"], ["created_at", 2017-02-06 08:54:58 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 41ms (Views: 0.2ms | ActiveRecord: 4.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:54:59 UTC], ["updated_at", 2017-02-06 08:54:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-06 08:54:59 UTC], ["updated_at", 2017-02-06 08:54:59 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "9a475cec-3b10-443f-919d-828c3f99a6db"], ["action", "register"], ["created_at", 2017-02-06 08:54:59 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.3ms | ActiveRecord: 1.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:54:59 UTC], ["updated_at", 2017-02-06 08:54:59 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:54:59 UTC], ["updated_at", 2017-02-06 08:54:59 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "c3f3bc0f-3514-47e1-b561-be09051f8059"], ["action", "create"], ["created_at", 2017-02-06 08:54:59 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 08:54:59 UTC], ["updated_at", 2017-02-06 08:54:59 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "c3f3bc0f-3514-47e1-b561-be09051f8059"], ["action", "create"], ["created_at", 2017-02-06 08:54:59 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 08:54:59 UTC], ["updated_at", 2017-02-06 08:54:59 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "c3f3bc0f-3514-47e1-b561-be09051f8059"], ["action", "create"], ["created_at", 2017-02-06 08:54:59 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 08:54:59 UTC], ["updated_at", 2017-02-06 08:54:59 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "c3f3bc0f-3514-47e1-b561-be09051f8059"], ["action", "create"], ["created_at", 2017-02-06 08:54:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 74ms (Views: 0.1ms | ActiveRecord: 10.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:54:59 UTC], ["updated_at", 2017-02-06 08:54:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:54:59 UTC], ["updated_at", 2017-02-06 08:54:59 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "c192dc4c-137d-4877-bba0-759f9828fc0a"], ["action", "create"], ["created_at", 2017-02-06 08:54:59 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", 2017-02-06 08:54:59 UTC], ["updated_at", 2017-02-06 08:54:59 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "c192dc4c-137d-4877-bba0-759f9828fc0a"], ["action", "create"], ["created_at", 2017-02-06 08:54:59 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", 2017-02-06 08:54:59 UTC], ["updated_at", 2017-02-06 08:54:59 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "c192dc4c-137d-4877-bba0-759f9828fc0a"], ["action", "create"], ["created_at", 2017-02-06 08:54:59 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", 2017-02-06 08:54:59 UTC], ["updated_at", 2017-02-06 08:54:59 UTC]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "c192dc4c-137d-4877-bba0-759f9828fc0a"], ["action", "create"], ["created_at", 2017-02-06 08:54:59 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "c192dc4c-137d-4877-bba0-759f9828fc0a"]]
Completed 500 Internal Server Error in 41ms (Views: 0.4ms | ActiveRecord: 5.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:54:59 UTC], ["updated_at", 2017-02-06 08:54:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-06 08:54:59 UTC], ["updated_at", 2017-02-06 08:54:59 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", 2017-02-06 08:54:59 UTC], ["updated_at", 2017-02-06 08:54:59 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "0ef9c4f6-e8d3-4c42-9cc2-ae808ccf7cbf"], ["action", "create"], ["created_at", 2017-02-06 08:54:59 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", 2017-02-06 08:54:59 UTC], ["updated_at", 2017-02-06 08:54:59 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "0ef9c4f6-e8d3-4c42-9cc2-ae808ccf7cbf"], ["action", "create"], ["created_at", 2017-02-06 08:54:59 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", 2017-02-06 08:54:59 UTC], ["updated_at", 2017-02-06 08:54:59 UTC]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "0ef9c4f6-e8d3-4c42-9cc2-ae808ccf7cbf"], ["action", "create"], ["created_at", 2017-02-06 08:54:59 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "0ef9c4f6-e8d3-4c42-9cc2-ae808ccf7cbf"]]
Completed 500 Internal Server Error in 47ms (Views: 1.1ms | ActiveRecord: 6.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (21.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.5ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:55:19 UTC], ["updated_at", 2017-02-06 08:55:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-06 08:55:19 UTC], ["updated_at", 2017-02-06 08:55:19 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "913950bf-6677-48fc-9587-f69fcc01eb81"], ["action", "create"], ["created_at", 2017-02-06 08:55:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 25ms (Views: 0.2ms | ActiveRecord: 2.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:55:19 UTC], ["updated_at", 2017-02-06 08:55:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-06 08:55:19 UTC], ["updated_at", 2017-02-06 08:55:19 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "f6c4246b-6516-4128-9700-0956004ca11b"], ["action", "register"], ["created_at", 2017-02-06 08:55:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:55:19 UTC], ["updated_at", 2017-02-06 08:55:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:55:19 UTC], ["updated_at", 2017-02-06 08:55:19 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "49986161-462f-46fa-897c-fe75c4d61549"], ["action", "create"], ["created_at", 2017-02-06 08:55:19 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 08:55:19 UTC], ["updated_at", 2017-02-06 08:55:19 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "49986161-462f-46fa-897c-fe75c4d61549"], ["action", "create"], ["created_at", 2017-02-06 08:55:19 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 08:55:19 UTC], ["updated_at", 2017-02-06 08:55:19 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "49986161-462f-46fa-897c-fe75c4d61549"], ["action", "create"], ["created_at", 2017-02-06 08:55:19 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 08:55:19 UTC], ["updated_at", 2017-02-06 08:55:19 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "49986161-462f-46fa-897c-fe75c4d61549"], ["action", "create"], ["created_at", 2017-02-06 08:55:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 54ms (Views: 0.1ms | ActiveRecord: 5.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:55:19 UTC], ["updated_at", 2017-02-06 08:55:19 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:55:19 UTC], ["updated_at", 2017-02-06 08:55:19 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "31cf739d-ca24-499e-afe8-35ffb9b3ed93"], ["action", "create"], ["created_at", 2017-02-06 08:55:19 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", 2017-02-06 08:55:19 UTC], ["updated_at", 2017-02-06 08:55:19 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "31cf739d-ca24-499e-afe8-35ffb9b3ed93"], ["action", "create"], ["created_at", 2017-02-06 08:55:19 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", 2017-02-06 08:55:19 UTC], ["updated_at", 2017-02-06 08:55:19 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "31cf739d-ca24-499e-afe8-35ffb9b3ed93"], ["action", "create"], ["created_at", 2017-02-06 08:55:19 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", 2017-02-06 08:55:19 UTC], ["updated_at", 2017-02-06 08:55:19 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "31cf739d-ca24-499e-afe8-35ffb9b3ed93"], ["action", "create"], ["created_at", 2017-02-06 08:55:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "31cf739d-ca24-499e-afe8-35ffb9b3ed93"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "31cf739d-ca24-499e-afe8-35ffb9b3ed93"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]},\\\"users\\\":{\\\"10\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,2]},\\\"11\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,2]},\\\"12\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,2]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"10\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"11\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"12\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}}\""], ["id", 7]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 10]]
Completed 200 OK in 49ms (Views: 0.4ms | ActiveRecord: 7.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:55:19 UTC], ["updated_at", 2017-02-06 08:55:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-06 08:55:19 UTC], ["updated_at", 2017-02-06 08:55:19 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", 2017-02-06 08:55:19 UTC], ["updated_at", 2017-02-06 08:55:19 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "c5e5dd6d-0fd6-42f0-8e2f-4b0bd9a55d66"], ["action", "create"], ["created_at", 2017-02-06 08:55:19 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", 2017-02-06 08:55:19 UTC], ["updated_at", 2017-02-06 08:55:19 UTC]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "c5e5dd6d-0fd6-42f0-8e2f-4b0bd9a55d66"], ["action", "create"], ["created_at", 2017-02-06 08:55:19 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", 2017-02-06 08:55:19 UTC], ["updated_at", 2017-02-06 08:55:19 UTC]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "c5e5dd6d-0fd6-42f0-8e2f-4b0bd9a55d66"], ["action", "create"], ["created_at", 2017-02-06 08:55:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "c5e5dd6d-0fd6-42f0-8e2f-4b0bd9a55d66"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "c5e5dd6d-0fd6-42f0-8e2f-4b0bd9a55d66"]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
Completed 500 Internal Server Error in 33ms (Views: 0.1ms | ActiveRecord: 4.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (24.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (8.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.0ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (8.5ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:59:06 UTC], ["updated_at", 2017-02-06 08:59:06 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-06 08:59:06 UTC], ["updated_at", 2017-02-06 08:59:06 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "4f7ded8d-f8a7-42c7-85a8-d09cbd01c3ce"], ["action", "create"], ["created_at", 2017-02-06 08:59:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 26ms (Views: 0.2ms | ActiveRecord: 2.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:59:06 UTC], ["updated_at", 2017-02-06 08:59:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-06 08:59:06 UTC], ["updated_at", 2017-02-06 08:59:06 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "2ce3a10b-d4ec-41a0-87d3-db99593f6cd4"], ["action", "register"], ["created_at", 2017-02-06 08:59:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:59:06 UTC], ["updated_at", 2017-02-06 08:59:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:59:06 UTC], ["updated_at", 2017-02-06 08:59:06 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "0dfec6c7-8692-4ed5-8e81-91c01456aebd"], ["action", "create"], ["created_at", 2017-02-06 08:59:06 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 08:59:06 UTC], ["updated_at", 2017-02-06 08:59:06 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "0dfec6c7-8692-4ed5-8e81-91c01456aebd"], ["action", "create"], ["created_at", 2017-02-06 08:59:06 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 08:59:06 UTC], ["updated_at", 2017-02-06 08:59:06 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "0dfec6c7-8692-4ed5-8e81-91c01456aebd"], ["action", "create"], ["created_at", 2017-02-06 08:59:06 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 08:59:06 UTC], ["updated_at", 2017-02-06 08:59:06 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "0dfec6c7-8692-4ed5-8e81-91c01456aebd"], ["action", "create"], ["created_at", 2017-02-06 08:59:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 62ms (Views: 0.1ms | ActiveRecord: 6.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:59:06 UTC], ["updated_at", 2017-02-06 08:59:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:59:06 UTC], ["updated_at", 2017-02-06 08:59:06 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "887d2d8f-d392-4054-bd93-fbc8567f9f69"], ["action", "create"], ["created_at", 2017-02-06 08:59:06 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", 2017-02-06 08:59:06 UTC], ["updated_at", 2017-02-06 08:59:06 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "887d2d8f-d392-4054-bd93-fbc8567f9f69"], ["action", "create"], ["created_at", 2017-02-06 08:59:06 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", 2017-02-06 08:59:06 UTC], ["updated_at", 2017-02-06 08:59:06 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "887d2d8f-d392-4054-bd93-fbc8567f9f69"], ["action", "create"], ["created_at", 2017-02-06 08:59:06 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", 2017-02-06 08:59:06 UTC], ["updated_at", 2017-02-06 08:59:06 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "887d2d8f-d392-4054-bd93-fbc8567f9f69"], ["action", "create"], ["created_at", 2017-02-06 08:59:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "887d2d8f-d392-4054-bd93-fbc8567f9f69"]]
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "887d2d8f-d392-4054-bd93-fbc8567f9f69"]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]},\\\"users\\\":{\\\"10\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,2]},\\\"11\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,2]},\\\"12\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,2]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"10\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"11\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"12\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}}\""], ["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 10]]
Completed 200 OK in 40ms (Views: 0.1ms | ActiveRecord: 5.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:59:06 UTC], ["updated_at", 2017-02-06 08:59:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-06 08:59:06 UTC], ["updated_at", 2017-02-06 08:59:06 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", 2017-02-06 08:59:06 UTC], ["updated_at", 2017-02-06 08:59:06 UTC]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "3d3f2c7c-aacc-4b1c-867c-e9c10b3abe39"], ["action", "create"], ["created_at", 2017-02-06 08:59:06 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", 2017-02-06 08:59:06 UTC], ["updated_at", 2017-02-06 08:59:06 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "3d3f2c7c-aacc-4b1c-867c-e9c10b3abe39"], ["action", "create"], ["created_at", 2017-02-06 08:59:06 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", 2017-02-06 08:59:06 UTC], ["updated_at", 2017-02-06 08:59:06 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "3d3f2c7c-aacc-4b1c-867c-e9c10b3abe39"], ["action", "create"], ["created_at", 2017-02-06 08:59:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "3d3f2c7c-aacc-4b1c-867c-e9c10b3abe39"]]
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "3d3f2c7c-aacc-4b1c-867c-e9c10b3abe39"]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"14\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,3]},\\\"15\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,3]},\\\"16\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,3]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"14\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":null},\\\"15\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":null},\\\"16\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":null}}}\""], ["request_uuid", "3d3f2c7c-aacc-4b1c-867c-e9c10b3abe39"], ["action", "create"], ["created_at", 2017-02-06 08:59:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 11]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 12]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 13]]
Completed 200 OK in 35ms (Views: 0.3ms | ActiveRecord: 5.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.5ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (21.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (8.5ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "e8b9440a-1ef4-418d-b197-a805b4f65400"], ["action", "create"], ["created_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 26ms (Views: 0.2ms | ActiveRecord: 2.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "333fa577-9e5f-49d9-b837-2a28ac2d8e85"], ["action", "register"], ["created_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "de9f0dde-822d-4051-bb9f-c195678e1b00"], ["action", "create"], ["created_at", 2017-02-06 08:59:24 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "de9f0dde-822d-4051-bb9f-c195678e1b00"], ["action", "create"], ["created_at", 2017-02-06 08:59:24 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "de9f0dde-822d-4051-bb9f-c195678e1b00"], ["action", "create"], ["created_at", 2017-02-06 08:59:24 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "de9f0dde-822d-4051-bb9f-c195678e1b00"], ["action", "create"], ["created_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 60ms (Views: 0.2ms | ActiveRecord: 6.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "5dfd3266-0885-49e2-9c19-a22c957ed283"], ["action", "create"], ["created_at", 2017-02-06 08:59:24 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "5dfd3266-0885-49e2-9c19-a22c957ed283"], ["action", "create"], ["created_at", 2017-02-06 08:59:24 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "5dfd3266-0885-49e2-9c19-a22c957ed283"], ["action", "create"], ["created_at", 2017-02-06 08:59:24 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "5dfd3266-0885-49e2-9c19-a22c957ed283"], ["action", "create"], ["created_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "5dfd3266-0885-49e2-9c19-a22c957ed283"]]
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "5dfd3266-0885-49e2-9c19-a22c957ed283"]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]},\\\"users\\\":{\\\"10\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,2]},\\\"11\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,2]},\\\"12\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,2]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"10\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"11\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"12\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}}\""], ["id", 7]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 10]]
Completed 200 OK in 45ms (Views: 0.1ms | ActiveRecord: 7.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "b1cb70c6-dbbd-4620-9700-8b86302c6fef"], ["action", "create"], ["created_at", 2017-02-06 08:59:24 UTC]]
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "b1cb70c6-dbbd-4620-9700-8b86302c6fef"], ["action", "create"], ["created_at", 2017-02-06 08:59:24 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "b1cb70c6-dbbd-4620-9700-8b86302c6fef"], ["action", "create"], ["created_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "b1cb70c6-dbbd-4620-9700-8b86302c6fef"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "b1cb70c6-dbbd-4620-9700-8b86302c6fef"]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"14\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,3]},\\\"15\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,3]},\\\"16\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,3]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"14\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":null},\\\"15\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":null},\\\"16\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":null}}}\""], ["request_uuid", "b1cb70c6-dbbd-4620-9700-8b86302c6fef"], ["action", "create"], ["created_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 11]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 12]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 13]]
Completed 200 OK in 36ms (Views: 0.1ms | ActiveRecord: 6.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("created_at") VALUES ($1) RETURNING "id"[0m  [["created_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 19], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{}\""], ["action", "create"], ["created_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-06 08:59:24 UTC], ["id", 20]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 20], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["meta", "\"{}\""], ["action", "update"], ["created_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 21]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 21], ["record_changes", "\"{\\\"users\\\":{}}\""], ["meta", "\"{}\""], ["action", "destroy"], ["created_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["meta", "\"{}\""], ["action", "create"], ["created_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 23], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["action", "create"], ["created_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 24], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["action", "create"], ["created_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 25], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["action", "create"], ["created_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 08:59:24 UTC], ["updated_at", 2017-02-06 08:59:24 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 08:59:25 UTC], ["updated_at", 2017-02-06 08:59:25 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 26], ["subject_type", "UserOnly"], ["subject_id", 27], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["meta", "\"{}\""], ["action", "create"], ["created_at", 2017-02-06 08:59:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (2.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-06 08:59:25 UTC], ["updated_at", 2017-02-06 08:59:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 4], ["created_at", 2017-02-06 08:59:25 UTC], ["updated_at", 2017-02-06 08:59:25 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 28], ["parent_type", "Company"], ["parent_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,4]}}\""], ["meta", "\"{}\""], ["action", "create"], ["created_at", 2017-02-06 08:59:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (20.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (8.6ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "1442105f-920f-4dac-bff5-b0fca85facc5"], ["action", "create"], ["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 26ms (Views: 0.2ms | ActiveRecord: 2.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "e17b732b-8a12-4820-9621-4c2360544f6f"], ["action", "register"], ["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "9ac86709-f6e7-4171-a19b-cd47fb548d30"], ["action", "create"], ["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "9ac86709-f6e7-4171-a19b-cd47fb548d30"], ["action", "create"], ["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "9ac86709-f6e7-4171-a19b-cd47fb548d30"], ["action", "create"], ["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "9ac86709-f6e7-4171-a19b-cd47fb548d30"], ["action", "create"], ["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 54ms (Views: 0.2ms | ActiveRecord: 5.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "316e1fb7-8f43-416f-b6fd-8a2681dbc94e"], ["action", "create"], ["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[36mCompany Load (3.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "316e1fb7-8f43-416f-b6fd-8a2681dbc94e"], ["action", "create"], ["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "316e1fb7-8f43-416f-b6fd-8a2681dbc94e"], ["action", "create"], ["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "316e1fb7-8f43-416f-b6fd-8a2681dbc94e"], ["action", "create"], ["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "316e1fb7-8f43-416f-b6fd-8a2681dbc94e"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "316e1fb7-8f43-416f-b6fd-8a2681dbc94e"]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]},\\\"users\\\":{\\\"10\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,2]},\\\"11\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,2]},\\\"12\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,2]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"10\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"11\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"12\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}}\""], ["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 10]]
Completed 200 OK in 45ms (Views: 0.1ms | ActiveRecord: 8.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (2.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[36mCompany Load (1.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "1aeb51d8-3500-4e32-8182-eefd7bf10607"], ["action", "create"], ["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "1aeb51d8-3500-4e32-8182-eefd7bf10607"], ["action", "create"], ["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "1aeb51d8-3500-4e32-8182-eefd7bf10607"], ["action", "create"], ["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "1aeb51d8-3500-4e32-8182-eefd7bf10607"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "1aeb51d8-3500-4e32-8182-eefd7bf10607"]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"14\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,3]},\\\"15\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,3]},\\\"16\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,3]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"14\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":null},\\\"15\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":null},\\\"16\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":null}}}\""], ["request_uuid", "1aeb51d8-3500-4e32-8182-eefd7bf10607"], ["action", "create"], ["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 11]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 12]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 13]]
Completed 200 OK in 42ms (Views: 0.3ms | ActiveRecord: 9.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("created_at") VALUES ($1) RETURNING "id"[0m  [["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 19], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{}\""], ["action", "create"], ["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-06 09:00:01 UTC], ["id", 20]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 20], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["meta", "\"{}\""], ["action", "update"], ["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 21]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 21], ["record_changes", "\"{\\\"users\\\":{}}\""], ["meta", "\"{}\""], ["action", "destroy"], ["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["meta", "\"{}\""], ["action", "create"], ["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 23], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["action", "create"], ["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 24], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["action", "create"], ["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 25], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["action", "create"], ["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 26], ["subject_type", "UserOnly"], ["subject_id", 27], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["meta", "\"{}\""], ["action", "create"], ["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 4], ["created_at", 2017-02-06 09:00:01 UTC], ["updated_at", 2017-02-06 09:00:01 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 28], ["parent_type", "Company"], ["parent_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,4]}}\""], ["meta", "\"{}\""], ["action", "create"], ["created_at", 2017-02-06 09:00:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (29.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.5ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "6d8beb30-3ea3-497e-9c21-6fc87ad0e17c"], ["action", "create"], ["created_at", 2017-02-06 10:17:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 37ms (Views: 0.2ms | ActiveRecord: 2.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "910637a6-07ac-47c6-88d0-f8e51215aed6"], ["action", "register"], ["created_at", 2017-02-06 10:17:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "0e2bc219-d2dd-419b-bfa5-46043b4b1bbc"], ["action", "create"], ["created_at", 2017-02-06 10:17:45 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "0e2bc219-d2dd-419b-bfa5-46043b4b1bbc"], ["action", "create"], ["created_at", 2017-02-06 10:17:45 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "0e2bc219-d2dd-419b-bfa5-46043b4b1bbc"], ["action", "create"], ["created_at", 2017-02-06 10:17:45 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "0e2bc219-d2dd-419b-bfa5-46043b4b1bbc"], ["action", "create"], ["created_at", 2017-02-06 10:17:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 70ms (Views: 0.3ms | ActiveRecord: 9.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "7a41aa8a-b82d-4eb8-86b3-7a6df13f48ec"], ["action", "create"], ["created_at", 2017-02-06 10:17:45 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "7a41aa8a-b82d-4eb8-86b3-7a6df13f48ec"], ["action", "create"], ["created_at", 2017-02-06 10:17:45 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "7a41aa8a-b82d-4eb8-86b3-7a6df13f48ec"], ["action", "create"], ["created_at", 2017-02-06 10:17:45 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "7a41aa8a-b82d-4eb8-86b3-7a6df13f48ec"], ["action", "create"], ["created_at", 2017-02-06 10:17:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "7a41aa8a-b82d-4eb8-86b3-7a6df13f48ec"]]
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "7a41aa8a-b82d-4eb8-86b3-7a6df13f48ec"]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]},\\\"users\\\":{\\\"10\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,2]},\\\"11\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,2]},\\\"12\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,2]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"10\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"11\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"12\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}}\""], ["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 10]]
Completed 200 OK in 56ms (Views: 0.2ms | ActiveRecord: 8.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "fda057f4-fa56-4f55-a661-57469b06f0f8"], ["action", "create"], ["created_at", 2017-02-06 10:17:45 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "fda057f4-fa56-4f55-a661-57469b06f0f8"], ["action", "create"], ["created_at", 2017-02-06 10:17:45 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "fda057f4-fa56-4f55-a661-57469b06f0f8"], ["action", "create"], ["created_at", 2017-02-06 10:17:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "fda057f4-fa56-4f55-a661-57469b06f0f8"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "fda057f4-fa56-4f55-a661-57469b06f0f8"]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"14\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,3]},\\\"15\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,3]},\\\"16\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,3]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"14\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":null},\\\"15\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":null},\\\"16\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":null}}}\""], ["request_uuid", "fda057f4-fa56-4f55-a661-57469b06f0f8"], ["action", "create"], ["created_at", 2017-02-06 10:17:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 11]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 12]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 13]]
Completed 200 OK in 53ms (Views: 0.2ms | ActiveRecord: 7.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("created_at") VALUES ($1) RETURNING "id"[0m  [["created_at", 2017-02-06 10:17:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 19], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{}\""], ["action", "create"], ["created_at", 2017-02-06 10:17:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-06 10:17:45 UTC], ["id", 20]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 20], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["meta", "\"{}\""], ["action", "update"], ["created_at", 2017-02-06 10:17:45 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:17:45 UTC], ["updated_at", 2017-02-06 10:17:45 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 21]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 21], ["record_changes", "\"{\\\"users\\\":{}}\""], ["meta", "\"{}\""], ["action", "destroy"], ["created_at", 2017-02-06 10:17:45 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:17:46 UTC], ["updated_at", 2017-02-06 10:17:46 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["meta", "\"{}\""], ["action", "create"], ["created_at", 2017-02-06 10:17:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:17:46 UTC], ["updated_at", 2017-02-06 10:17:46 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 23], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["action", "create"], ["created_at", 2017-02-06 10:17:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:17:46 UTC], ["updated_at", 2017-02-06 10:17:46 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 24], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["action", "create"], ["created_at", 2017-02-06 10:17:46 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.9ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:17:46 UTC], ["updated_at", 2017-02-06 10:17:46 UTC]]
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 25], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["action", "create"], ["created_at", 2017-02-06 10:17:46 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:17:46 UTC], ["updated_at", 2017-02-06 10:17:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:17:46 UTC], ["updated_at", 2017-02-06 10:17:46 UTC]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 26], ["subject_type", "UserOnly"], ["subject_id", 27], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["meta", "\"{}\""], ["action", "create"], ["created_at", 2017-02-06 10:17:46 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (3.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-06 10:17:46 UTC], ["updated_at", 2017-02-06 10:17:46 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 4], ["created_at", 2017-02-06 10:17:46 UTC], ["updated_at", 2017-02-06 10:17:46 UTC]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 28], ["parent_type", "Company"], ["parent_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,4]}}\""], ["meta", "\"{}\""], ["action", "create"], ["created_at", 2017-02-06 10:17:46 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.9ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (8.2ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (25.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (8.3ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (11.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 10:18:52 UTC], ["updated_at", 2017-02-06 10:18:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-06 10:18:52 UTC], ["updated_at", 2017-02-06 10:18:52 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "4c86d8d5-4e73-458b-8297-a40f815d27c6"], ["action", "create"], ["created_at", 2017-02-06 10:18:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "4c86d8d5-4e73-458b-8297-a40f815d27c6"]]
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "4c86d8d5-4e73-458b-8297-a40f815d27c6"]]
Completed 200 OK in 29ms (Views: 0.2ms | ActiveRecord: 2.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 10:18:52 UTC], ["updated_at", 2017-02-06 10:18:52 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-06 10:18:52 UTC], ["updated_at", 2017-02-06 10:18:52 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "0526c87d-2955-42cc-9174-5442ad0e46d7"], ["action", "register"], ["created_at", 2017-02-06 10:18:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "0526c87d-2955-42cc-9174-5442ad0e46d7"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "0526c87d-2955-42cc-9174-5442ad0e46d7"]]
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 10:18:52 UTC], ["updated_at", 2017-02-06 10:18:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 10:18:52 UTC], ["updated_at", 2017-02-06 10:18:52 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "ef0ec7f0-7fe4-4d18-abe2-87bb3df9ebdb"], ["action", "create"], ["created_at", 2017-02-06 10:18:52 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 10:18:52 UTC], ["updated_at", 2017-02-06 10:18:52 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "ef0ec7f0-7fe4-4d18-abe2-87bb3df9ebdb"], ["action", "create"], ["created_at", 2017-02-06 10:18:52 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 10:18:52 UTC], ["updated_at", 2017-02-06 10:18:52 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "ef0ec7f0-7fe4-4d18-abe2-87bb3df9ebdb"], ["action", "create"], ["created_at", 2017-02-06 10:18:52 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 10:18:52 UTC], ["updated_at", 2017-02-06 10:18:52 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "ef0ec7f0-7fe4-4d18-abe2-87bb3df9ebdb"], ["action", "create"], ["created_at", 2017-02-06 10:18:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "ef0ec7f0-7fe4-4d18-abe2-87bb3df9ebdb"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "ef0ec7f0-7fe4-4d18-abe2-87bb3df9ebdb"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]},\\\"users\\\":{\\\"6\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]},\\\"7\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]},\\\"8\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"6\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"7\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"8\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}}\""], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 6]]
Completed 200 OK in 87ms (Views: 0.2ms | ActiveRecord: 8.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 10:18:53 UTC], ["updated_at", 2017-02-06 10:18:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 10:18:53 UTC], ["updated_at", 2017-02-06 10:18:53 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "112fa5f6-02bf-48bb-8af4-1cc2b7697315"], ["action", "create"], ["created_at", 2017-02-06 10:18:53 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", 2017-02-06 10:18:53 UTC], ["updated_at", 2017-02-06 10:18:53 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "112fa5f6-02bf-48bb-8af4-1cc2b7697315"], ["action", "create"], ["created_at", 2017-02-06 10:18:53 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", 2017-02-06 10:18:53 UTC], ["updated_at", 2017-02-06 10:18:53 UTC]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "112fa5f6-02bf-48bb-8af4-1cc2b7697315"], ["action", "create"], ["created_at", 2017-02-06 10:18:53 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", 2017-02-06 10:18:53 UTC], ["updated_at", 2017-02-06 10:18:53 UTC]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "112fa5f6-02bf-48bb-8af4-1cc2b7697315"], ["action", "create"], ["created_at", 2017-02-06 10:18:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "112fa5f6-02bf-48bb-8af4-1cc2b7697315"]]
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "112fa5f6-02bf-48bb-8af4-1cc2b7697315"]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]},\\\"users\\\":{\\\"10\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,2]},\\\"11\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,2]},\\\"12\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,2]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"10\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"11\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"12\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}}\""], ["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 10]]
Completed 200 OK in 43ms (Views: 0.1ms | ActiveRecord: 5.8ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 10:18:53 UTC], ["updated_at", 2017-02-06 10:18:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-06 10:18:53 UTC], ["updated_at", 2017-02-06 10:18:53 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", 2017-02-06 10:18:53 UTC], ["updated_at", 2017-02-06 10:18:53 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "b39f842e-1f4c-4aa3-8aa9-5bc20f9426e1"], ["action", "create"], ["created_at", 2017-02-06 10:18:53 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", 2017-02-06 10:18:53 UTC], ["updated_at", 2017-02-06 10:18:53 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "b39f842e-1f4c-4aa3-8aa9-5bc20f9426e1"], ["action", "create"], ["created_at", 2017-02-06 10:18:53 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", 2017-02-06 10:18:53 UTC], ["updated_at", 2017-02-06 10:18:53 UTC]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "b39f842e-1f4c-4aa3-8aa9-5bc20f9426e1"], ["action", "create"], ["created_at", 2017-02-06 10:18:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "b39f842e-1f4c-4aa3-8aa9-5bc20f9426e1"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "b39f842e-1f4c-4aa3-8aa9-5bc20f9426e1"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"14\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,3]},\\\"15\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,3]},\\\"16\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,3]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"14\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":null},\\\"15\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":null},\\\"16\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":null}}}\""], ["request_uuid", "b39f842e-1f4c-4aa3-8aa9-5bc20f9426e1"], ["action", "create"], ["created_at", 2017-02-06 10:18:53 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 11]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 12]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 13]]
Completed 200 OK in 50ms (Views: 0.4ms | ActiveRecord: 6.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-06 10:18:53 UTC], ["updated_at", 2017-02-06 10:18:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("created_at") VALUES ($1) RETURNING "id"[0m  [["created_at", 2017-02-06 10:18:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:18:53 UTC], ["updated_at", 2017-02-06 10:18:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:18:53 UTC], ["updated_at", 2017-02-06 10:18:53 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 19], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{}\""], ["action", "create"], ["created_at", 2017-02-06 10:18:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:18:53 UTC], ["updated_at", 2017-02-06 10:18:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-06 10:18:53 UTC], ["id", 20]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 20], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["meta", "\"{}\""], ["action", "update"], ["created_at", 2017-02-06 10:18:53 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:18:53 UTC], ["updated_at", 2017-02-06 10:18:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 21]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 21], ["record_changes", "\"{\\\"users\\\":{}}\""], ["meta", "\"{}\""], ["action", "destroy"], ["created_at", 2017-02-06 10:18:53 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:18:53 UTC], ["updated_at", 2017-02-06 10:18:53 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["meta", "\"{}\""], ["action", "create"], ["created_at", 2017-02-06 10:18:53 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:18:53 UTC], ["updated_at", 2017-02-06 10:18:53 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 23], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["action", "create"], ["created_at", 2017-02-06 10:18:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:18:53 UTC], ["updated_at", 2017-02-06 10:18:53 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 24], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["action", "create"], ["created_at", 2017-02-06 10:18:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:18:53 UTC], ["updated_at", 2017-02-06 10:18:53 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 25], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["action", "create"], ["created_at", 2017-02-06 10:18:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:18:53 UTC], ["updated_at", 2017-02-06 10:18:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:18:53 UTC], ["updated_at", 2017-02-06 10:18:53 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 26], ["subject_type", "UserOnly"], ["subject_id", 27], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["meta", "\"{}\""], ["action", "create"], ["created_at", 2017-02-06 10:18:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-06 10:18:53 UTC], ["updated_at", 2017-02-06 10:18:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 4], ["created_at", 2017-02-06 10:18:53 UTC], ["updated_at", 2017-02-06 10:18:53 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 28], ["parent_type", "Company"], ["parent_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,4]}}\""], ["meta", "\"{}\""], ["action", "create"], ["created_at", 2017-02-06 10:18:53 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (21.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "6f9e6c0f-930a-4591-9947-2660400aca2a"], ["action", "create"], ["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 38ms (Views: 0.2ms | ActiveRecord: 2.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"Email\\\"],\\\"name\\\":[null,\\\"buja\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "c93adaeb-053a-4580-b4d7-005c73b44920"], ["action", "register"], ["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "5a212a15-3a08-4e05-b227-f9e66acf19b4"], ["action", "create"], ["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "5a212a15-3a08-4e05-b227-f9e66acf19b4"], ["action", "create"], ["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "5a212a15-3a08-4e05-b227-f9e66acf19b4"], ["action", "create"], ["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,1]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "5a212a15-3a08-4e05-b227-f9e66acf19b4"], ["action", "create"], ["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 67ms (Views: 0.2ms | ActiveRecord: 7.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]}}\""], ["meta", "\"{}\""], ["request_uuid", "cd53b258-229a-418e-8cba-e0ad8a04e032"], ["action", "create"], ["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "cd53b258-229a-418e-8cba-e0ad8a04e032"], ["action", "create"], ["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "cd53b258-229a-418e-8cba-e0ad8a04e032"], ["action", "create"], ["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,2]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}\""], ["request_uuid", "cd53b258-229a-418e-8cba-e0ad8a04e032"], ["action", "create"], ["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "cd53b258-229a-418e-8cba-e0ad8a04e032"]]
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "cd53b258-229a-418e-8cba-e0ad8a04e032"]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "\"{\\\"companies\\\":{\\\"name\\\":[null,\\\"Kopmanija\\\"]},\\\"users\\\":{\\\"10\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,2]},\\\"11\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,2]},\\\"12\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,2]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"10\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"11\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":\\\"Kopmanija\\\"},\\\"12\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":\\\"Kopmanija\\\"}}}\""], ["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 10]]
Completed 200 OK in 53ms (Views: 0.3ms | ActiveRecord: 7.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "a33af993-9d6e-4545-8759-30cc8a9cda45"], ["action", "create"], ["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "a33af993-9d6e-4545-8759-30cc8a9cda45"], ["action", "create"], ["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,3]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":null}}\""], ["request_uuid", "a33af993-9d6e-4545-8759-30cc8a9cda45"], ["action", "create"], ["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "a33af993-9d6e-4545-8759-30cc8a9cda45"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "a33af993-9d6e-4545-8759-30cc8a9cda45"]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "\"{\\\"users\\\":{\\\"14\\\":{\\\"email\\\":[null,\\\"user1@email.com\\\"],\\\"name\\\":[null,\\\"User1\\\"],\\\"company_id\\\":[null,3]},\\\"15\\\":{\\\"email\\\":[null,\\\"user2@email.com\\\"],\\\"name\\\":[null,\\\"User2\\\"],\\\"company_id\\\":[null,3]},\\\"16\\\":{\\\"email\\\":[null,\\\"user3@email.com\\\"],\\\"name\\\":[null,\\\"User3\\\"],\\\"company_id\\\":[null,3]}}}\""], ["meta", "\"{\\\"users\\\":{\\\"14\\\":{\\\"name\\\":\\\"User1\\\",\\\"company_name\\\":null},\\\"15\\\":{\\\"name\\\":\\\"User2\\\",\\\"company_name\\\":null},\\\"16\\\":{\\\"name\\\":\\\"User3\\\",\\\"company_name\\\":null}}}\""], ["request_uuid", "a33af993-9d6e-4545-8759-30cc8a9cda45"], ["action", "create"], ["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 11]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 12]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 13]]
Completed 200 OK in 49ms (Views: 0.2ms | ActiveRecord: 7.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("created_at") VALUES ($1) RETURNING "id"[0m  [["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 19], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{}\""], ["action", "create"], ["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-06 10:19:35 UTC], ["id", 20]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 20], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[\\\"test\\\",\\\"test1\\\"]}}\""], ["meta", "\"{}\""], ["action", "update"], ["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 21]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 21], ["record_changes", "\"{\\\"users\\\":{}}\""], ["meta", "\"{}\""], ["action", "destroy"], ["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["meta", "\"{}\""], ["action", "create"], ["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 23], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["action", "create"], ["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 24], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["action", "create"], ["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 25], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"]}}\""], ["meta", "\"{\\\"users\\\":{\\\"name\\\":\\\"test\\\",\\\"arbitraty\\\":\\\"arbitraty\\\"}}\""], ["action", "create"], ["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 26], ["subject_type", "UserOnly"], ["subject_id", 27], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"]}}\""], ["meta", "\"{}\""], ["action", "create"], ["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 4], ["created_at", 2017-02-06 10:19:35 UTC], ["updated_at", 2017-02-06 10:19:35 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 28], ["parent_type", "Company"], ["parent_id", 4], ["record_changes", "\"{\\\"users\\\":{\\\"email\\\":[null,\\\"test\\\"],\\\"name\\\":[null,\\\"test\\\"],\\\"address\\\":[null,\\\"nowere\\\"],\\\"company_id\\\":[null,4]}}\""], ["meta", "\"{}\""], ["action", "create"], ["created_at", 2017-02-06 10:19:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (128.2ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (279.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (5.4ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (9.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (31.1ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (35.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (17.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (28.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (6.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-08 13:08:02 UTC], ["updated_at", 2017-02-08 13:08:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-08 13:08:02 UTC], ["updated_at", 2017-02-08 13:08:02 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"users\":{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}}"], ["request_uuid", "3604e434-4b3a-4f9c-a669-f3e8d50c1a8d"], ["action", "create"], ["created_at", 2017-02-08 13:08:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 32ms (Views: 0.5ms | ActiveRecord: 3.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-08 13:08:02 UTC], ["updated_at", 2017-02-08 13:08:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-08 13:08:02 UTC], ["updated_at", 2017-02-08 13:08:02 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"users\":{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}}"], ["request_uuid", "a38b8d10-3fd4-403d-a153-f8387c0d6766"], ["action", "register"], ["created_at", 2017-02-08 13:08:02 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 1.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-08 13:08:02 UTC], ["updated_at", 2017-02-08 13:08:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-08 13:08:02 UTC], ["updated_at", 2017-02-08 13:08:02 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"companies\":{\"name\":[null,\"Kopmanija\"]}}"], ["request_uuid", "76522a95-d246-4381-bd33-50133357881b"], ["action", "create"], ["created_at", 2017-02-08 13:08:02 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-08 13:08:02 UTC], ["updated_at", 2017-02-08 13:08:02 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (6.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"users\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}}"], ["meta", "{\"users\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "76522a95-d246-4381-bd33-50133357881b"], ["action", "create"], ["created_at", 2017-02-08 13:08:02 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-08 13:08:02 UTC], ["updated_at", 2017-02-08 13:08:02 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"users\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}}"], ["meta", "{\"users\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "76522a95-d246-4381-bd33-50133357881b"], ["action", "create"], ["created_at", 2017-02-08 13:08:02 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-08 13:08:02 UTC], ["updated_at", 2017-02-08 13:08:02 UTC]]
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"users\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}}"], ["meta", "{\"users\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "76522a95-d246-4381-bd33-50133357881b"], ["action", "create"], ["created_at", 2017-02-08 13:08:02 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 81ms (Views: 0.2ms | ActiveRecord: 13.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-08 13:08:02 UTC], ["updated_at", 2017-02-08 13:08:02 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-08 13:08:02 UTC], ["updated_at", 2017-02-08 13:08:02 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"companies\":{\"name\":[null,\"Kopmanija\"]}}"], ["request_uuid", "2ffb35e1-97f7-4998-be31-3b11dc362784"], ["action", "create"], ["created_at", 2017-02-08 13:08:02 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", 2017-02-08 13:08:02 UTC], ["updated_at", 2017-02-08 13:08:02 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"users\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]}}"], ["meta", "{\"users\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "2ffb35e1-97f7-4998-be31-3b11dc362784"], ["action", "create"], ["created_at", 2017-02-08 13:08:02 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", 2017-02-08 13:08:02 UTC], ["updated_at", 2017-02-08 13:08:02 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"users\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]}}"], ["meta", "{\"users\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "2ffb35e1-97f7-4998-be31-3b11dc362784"], ["action", "create"], ["created_at", 2017-02-08 13:08:02 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", 2017-02-08 13:08:02 UTC], ["updated_at", 2017-02-08 13:08:02 UTC]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"users\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}"], ["meta", "{\"users\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "2ffb35e1-97f7-4998-be31-3b11dc362784"], ["action", "create"], ["created_at", 2017-02-08 13:08:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "2ffb35e1-97f7-4998-be31-3b11dc362784"]]
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "2ffb35e1-97f7-4998-be31-3b11dc362784"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 500 Internal Server Error in 50ms (Views: 0.2ms | ActiveRecord: 6.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-08 13:08:02 UTC], ["updated_at", 2017-02-08 13:08:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-08 13:08:02 UTC], ["updated_at", 2017-02-08 13:08:02 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", 2017-02-08 13:08:02 UTC], ["updated_at", 2017-02-08 13:08:02 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"users\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]}}"], ["meta", "{\"users\":{\"name\":\"User1\",\"company_name\":null}}"], ["request_uuid", "4c546402-5580-4ace-8dca-f44d3cdedff8"], ["action", "create"], ["created_at", 2017-02-08 13:08:02 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", 2017-02-08 13:08:02 UTC], ["updated_at", 2017-02-08 13:08:02 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"users\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]}}"], ["meta", "{\"users\":{\"name\":\"User2\",\"company_name\":null}}"], ["request_uuid", "4c546402-5580-4ace-8dca-f44d3cdedff8"], ["action", "create"], ["created_at", 2017-02-08 13:08:02 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", 2017-02-08 13:08:02 UTC], ["updated_at", 2017-02-08 13:08:02 UTC]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"users\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}"], ["meta", "{\"users\":{\"name\":\"User3\",\"company_name\":null}}"], ["request_uuid", "4c546402-5580-4ace-8dca-f44d3cdedff8"], ["action", "create"], ["created_at", 2017-02-08 13:08:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "4c546402-5580-4ace-8dca-f44d3cdedff8"]]
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "4c546402-5580-4ace-8dca-f44d3cdedff8"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 500 Internal Server Error in 69ms (Views: 0.3ms | ActiveRecord: 5.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-08 13:08:03 UTC], ["updated_at", 2017-02-08 13:08:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "records" ("created_at") VALUES ($1) RETURNING "id"[0m  [["created_at", 2017-02-08 13:08:03 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:08:03 UTC], ["updated_at", 2017-02-08 13:08:03 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:08:03 UTC], ["updated_at", 2017-02-08 13:08:03 UTC]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 19], ["record_changes", "{\"users\":{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}}"], ["action", "create"], ["created_at", 2017-02-08 13:08:03 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:08:03 UTC], ["updated_at", 2017-02-08 13:08:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-08 13:08:03 UTC], ["id", 20]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 20], ["record_changes", "{\"users\":{\"email\":[\"test\",\"test1\"]}}"], ["action", "update"], ["created_at", 2017-02-08 13:08:03 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:08:03 UTC], ["updated_at", 2017-02-08 13:08:03 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 21]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 21], ["record_changes", "{\"users\":{}}"], ["action", "destroy"], ["created_at", 2017-02-08 13:08:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:08:03 UTC], ["updated_at", 2017-02-08 13:08:03 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "{\"users\":{\"email\":[null,\"test\"]}}"], ["action", "create"], ["created_at", 2017-02-08 13:08:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:08:03 UTC], ["updated_at", 2017-02-08 13:08:03 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 23], ["record_changes", "{\"users\":{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}}"], ["meta", "{\"users\":{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}}"], ["action", "create"], ["created_at", 2017-02-08 13:08:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:08:03 UTC], ["updated_at", 2017-02-08 13:08:03 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 24], ["record_changes", "{\"users\":{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}}"], ["meta", "{\"users\":{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}}"], ["action", "create"], ["created_at", 2017-02-08 13:08:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:08:03 UTC], ["updated_at", 2017-02-08 13:08:03 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 25], ["record_changes", "{\"users\":{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}}"], ["meta", "{\"users\":{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}}"], ["action", "create"], ["created_at", 2017-02-08 13:08:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:08:03 UTC], ["updated_at", 2017-02-08 13:08:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:08:03 UTC], ["updated_at", 2017-02-08 13:08:03 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 26], ["subject_type", "UserOnly"], ["subject_id", 27], ["record_changes", "{\"users\":{\"email\":[null,\"test\"]}}"], ["action", "create"], ["created_at", 2017-02-08 13:08:03 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-08 13:08:03 UTC], ["updated_at", 2017-02-08 13:08:03 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 4], ["created_at", 2017-02-08 13:08:03 UTC], ["updated_at", 2017-02-08 13:08:03 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 28], ["parent_type", "Company"], ["parent_id", 4], ["record_changes", "{\"users\":{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,4]}}"], ["action", "create"], ["created_at", 2017-02-08 13:08:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (8.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (45.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (3.6ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (41.6ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (7.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"users\":{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}}"], ["request_uuid", "ec698de7-9a73-4dcc-a39d-773b8c0017b9"], ["action", "create"], ["created_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 38ms (Views: 0.2ms | ActiveRecord: 3.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"users\":{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}}"], ["request_uuid", "49116b84-1014-4d1b-9be8-44b8da3f32ee"], ["action", "register"], ["created_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"companies\":{\"name\":[null,\"Kopmanija\"]}}"], ["request_uuid", "13c35770-a1fe-46d5-a358-3d34023d67f0"], ["action", "create"], ["created_at", 2017-02-08 13:09:06 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"users\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}}"], ["meta", "{\"users\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "13c35770-a1fe-46d5-a358-3d34023d67f0"], ["action", "create"], ["created_at", 2017-02-08 13:09:06 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"users\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}}"], ["meta", "{\"users\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "13c35770-a1fe-46d5-a358-3d34023d67f0"], ["action", "create"], ["created_at", 2017-02-08 13:09:06 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"users\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}}"], ["meta", "{\"users\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "13c35770-a1fe-46d5-a358-3d34023d67f0"], ["action", "create"], ["created_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 69ms (Views: 0.1ms | ActiveRecord: 11.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"companies\":{\"name\":[null,\"Kopmanija\"]}}"], ["request_uuid", "4217a349-8894-462e-a5fe-ca679d04d6ce"], ["action", "create"], ["created_at", 2017-02-08 13:09:06 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"users\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]}}"], ["meta", "{\"users\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "4217a349-8894-462e-a5fe-ca679d04d6ce"], ["action", "create"], ["created_at", 2017-02-08 13:09:06 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"users\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]}}"], ["meta", "{\"users\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "4217a349-8894-462e-a5fe-ca679d04d6ce"], ["action", "create"], ["created_at", 2017-02-08 13:09:06 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"users\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}"], ["meta", "{\"users\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "4217a349-8894-462e-a5fe-ca679d04d6ce"], ["action", "create"], ["created_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "4217a349-8894-462e-a5fe-ca679d04d6ce"]]
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "4217a349-8894-462e-a5fe-ca679d04d6ce"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
Completed 200 OK in 47ms (Views: 0.1ms | ActiveRecord: 7.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"users\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]}}"], ["meta", "{\"users\":{\"name\":\"User1\",\"company_name\":null}}"], ["request_uuid", "37428152-a613-4269-8f60-40f68312c455"], ["action", "create"], ["created_at", 2017-02-08 13:09:06 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"users\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]}}"], ["meta", "{\"users\":{\"name\":\"User2\",\"company_name\":null}}"], ["request_uuid", "37428152-a613-4269-8f60-40f68312c455"], ["action", "create"], ["created_at", 2017-02-08 13:09:06 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"users\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}"], ["meta", "{\"users\":{\"name\":\"User3\",\"company_name\":null}}"], ["request_uuid", "37428152-a613-4269-8f60-40f68312c455"], ["action", "create"], ["created_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "37428152-a613-4269-8f60-40f68312c455"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "37428152-a613-4269-8f60-40f68312c455"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
Completed 200 OK in 47ms (Views: 0.2ms | ActiveRecord: 7.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("created_at") VALUES ($1) RETURNING "id"[0m  [["created_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 19], ["record_changes", "{\"users\":{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}}"], ["action", "create"], ["created_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-08 13:09:06 UTC], ["id", 20]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 20], ["record_changes", "{\"users\":{\"email\":[\"test\",\"test1\"]}}"], ["action", "update"], ["created_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 21]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 21], ["record_changes", "{\"users\":{}}"], ["action", "destroy"], ["created_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.0ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "{\"users\":{\"email\":[null,\"test\"]}}"], ["action", "create"], ["created_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 23], ["record_changes", "{\"users\":{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}}"], ["meta", "{\"users\":{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}}"], ["action", "create"], ["created_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 24], ["record_changes", "{\"users\":{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}}"], ["meta", "{\"users\":{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}}"], ["action", "create"], ["created_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 25], ["record_changes", "{\"users\":{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}}"], ["meta", "{\"users\":{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}}"], ["action", "create"], ["created_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 26], ["subject_type", "UserOnly"], ["subject_id", 27], ["record_changes", "{\"users\":{\"email\":[null,\"test\"]}}"], ["action", "create"], ["created_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 4], ["created_at", 2017-02-08 13:09:06 UTC], ["updated_at", 2017-02-08 13:09:06 UTC]]
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 28], ["parent_type", "Company"], ["parent_id", 4], ["record_changes", "{\"users\":{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,4]}}"], ["action", "create"], ["created_at", 2017-02-08 13:09:06 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (9.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (31.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (3.2ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (23.1ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (28.1ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-08 13:10:14 UTC], ["updated_at", 2017-02-08 13:10:14 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-08 13:10:14 UTC], ["updated_at", 2017-02-08 13:10:14 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"users\":{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}}"], ["request_uuid", "ecd8e9ef-48f1-409b-95dd-af78282c707a"], ["action", "create"], ["created_at", 2017-02-08 13:10:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 38ms (Views: 0.3ms | ActiveRecord: 2.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-08 13:10:14 UTC], ["updated_at", 2017-02-08 13:10:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-08 13:10:14 UTC], ["updated_at", 2017-02-08 13:10:14 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"users\":{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}}"], ["request_uuid", "e1374313-3778-402c-b28f-1c4812eeef39"], ["action", "register"], ["created_at", 2017-02-08 13:10:14 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 33ms (Views: 4.3ms | ActiveRecord: 1.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-08 13:10:14 UTC], ["updated_at", 2017-02-08 13:10:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (13.1ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-08 13:10:14 UTC], ["updated_at", 2017-02-08 13:10:14 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"companies\":{\"name\":[null,\"Kopmanija\"]}}"], ["request_uuid", "af6398c4-2719-4660-aac4-c2560fc51505"], ["action", "create"], ["created_at", 2017-02-08 13:10:14 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-08 13:10:14 UTC], ["updated_at", 2017-02-08 13:10:14 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"users\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}}"], ["meta", "{\"users\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "af6398c4-2719-4660-aac4-c2560fc51505"], ["action", "create"], ["created_at", 2017-02-08 13:10:14 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-08 13:10:14 UTC], ["updated_at", 2017-02-08 13:10:14 UTC]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"users\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}}"], ["meta", "{\"users\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "af6398c4-2719-4660-aac4-c2560fc51505"], ["action", "create"], ["created_at", 2017-02-08 13:10:14 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-08 13:10:14 UTC], ["updated_at", 2017-02-08 13:10:14 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"users\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}}"], ["meta", "{\"users\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "af6398c4-2719-4660-aac4-c2560fc51505"], ["action", "create"], ["created_at", 2017-02-08 13:10:14 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 111ms (Views: 0.4ms | ActiveRecord: 22.2ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-08 13:10:14 UTC], ["updated_at", 2017-02-08 13:10:14 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-08 13:10:14 UTC], ["updated_at", 2017-02-08 13:10:14 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"companies\":{\"name\":[null,\"Kopmanija\"]}}"], ["request_uuid", "487eb09d-aed2-4ce6-9797-e131afaf0d8e"], ["action", "create"], ["created_at", 2017-02-08 13:10:14 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", 2017-02-08 13:10:14 UTC], ["updated_at", 2017-02-08 13:10:14 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"users\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]}}"], ["meta", "{\"users\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "487eb09d-aed2-4ce6-9797-e131afaf0d8e"], ["action", "create"], ["created_at", 2017-02-08 13:10:14 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", 2017-02-08 13:10:14 UTC], ["updated_at", 2017-02-08 13:10:14 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"users\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]}}"], ["meta", "{\"users\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "487eb09d-aed2-4ce6-9797-e131afaf0d8e"], ["action", "create"], ["created_at", 2017-02-08 13:10:14 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", 2017-02-08 13:10:14 UTC], ["updated_at", 2017-02-08 13:10:14 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"users\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}"], ["meta", "{\"users\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "487eb09d-aed2-4ce6-9797-e131afaf0d8e"], ["action", "create"], ["created_at", 2017-02-08 13:10:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "487eb09d-aed2-4ce6-9797-e131afaf0d8e"]]
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "487eb09d-aed2-4ce6-9797-e131afaf0d8e"]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"companies\":{\"name\":[null,\"Kopmanija\"]},\"users\":{\"10\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"11\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"10\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"11\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["id", 7]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 10]]
Completed 200 OK in 89ms (Views: 0.2ms | ActiveRecord: 10.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-08 13:10:14 UTC], ["updated_at", 2017-02-08 13:10:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-08 13:10:14 UTC], ["updated_at", 2017-02-08 13:10:14 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", 2017-02-08 13:10:14 UTC], ["updated_at", 2017-02-08 13:10:14 UTC]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"users\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]}}"], ["meta", "{\"users\":{\"name\":\"User1\",\"company_name\":null}}"], ["request_uuid", "4e270348-5be3-40d0-b3ab-33b19f8535f7"], ["action", "create"], ["created_at", 2017-02-08 13:10:14 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", 2017-02-08 13:10:14 UTC], ["updated_at", 2017-02-08 13:10:14 UTC]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"users\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]}}"], ["meta", "{\"users\":{\"name\":\"User2\",\"company_name\":null}}"], ["request_uuid", "4e270348-5be3-40d0-b3ab-33b19f8535f7"], ["action", "create"], ["created_at", 2017-02-08 13:10:14 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", 2017-02-08 13:10:14 UTC], ["updated_at", 2017-02-08 13:10:14 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"users\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}"], ["meta", "{\"users\":{\"name\":\"User3\",\"company_name\":null}}"], ["request_uuid", "4e270348-5be3-40d0-b3ab-33b19f8535f7"], ["action", "create"], ["created_at", 2017-02-08 13:10:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "4e270348-5be3-40d0-b3ab-33b19f8535f7"]]
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "4e270348-5be3-40d0-b3ab-33b19f8535f7"]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
Completed 500 Internal Server Error in 78ms (Views: 0.1ms | ActiveRecord: 5.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-08 13:10:15 UTC], ["updated_at", 2017-02-08 13:10:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("created_at") VALUES ($1) RETURNING "id"[0m  [["created_at", 2017-02-08 13:10:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:10:15 UTC], ["updated_at", 2017-02-08 13:10:15 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:10:15 UTC], ["updated_at", 2017-02-08 13:10:15 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 19], ["record_changes", "{\"users\":{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}}"], ["action", "create"], ["created_at", 2017-02-08 13:10:15 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:10:15 UTC], ["updated_at", 2017-02-08 13:10:15 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-08 13:10:15 UTC], ["id", 20]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 20], ["record_changes", "{\"users\":{\"email\":[\"test\",\"test1\"]}}"], ["action", "update"], ["created_at", 2017-02-08 13:10:15 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:10:15 UTC], ["updated_at", 2017-02-08 13:10:15 UTC]]
  [1m[35m (2.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 21]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 21], ["record_changes", "{\"users\":{}}"], ["action", "destroy"], ["created_at", 2017-02-08 13:10:15 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (5.0ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:10:15 UTC], ["updated_at", 2017-02-08 13:10:15 UTC]]
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "{\"users\":{\"email\":[null,\"test\"]}}"], ["action", "create"], ["created_at", 2017-02-08 13:10:15 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (2.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:10:15 UTC], ["updated_at", 2017-02-08 13:10:15 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 23], ["record_changes", "{\"users\":{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}}"], ["meta", "{\"users\":{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}}"], ["action", "create"], ["created_at", 2017-02-08 13:10:15 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:10:15 UTC], ["updated_at", 2017-02-08 13:10:15 UTC]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 24], ["record_changes", "{\"users\":{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}}"], ["meta", "{\"users\":{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}}"], ["action", "create"], ["created_at", 2017-02-08 13:10:15 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:10:15 UTC], ["updated_at", 2017-02-08 13:10:15 UTC]]
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 25], ["record_changes", "{\"users\":{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}}"], ["meta", "{\"users\":{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}}"], ["action", "create"], ["created_at", 2017-02-08 13:10:15 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:10:15 UTC], ["updated_at", 2017-02-08 13:10:15 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:10:15 UTC], ["updated_at", 2017-02-08 13:10:15 UTC]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 26], ["subject_type", "UserOnly"], ["subject_id", 27], ["record_changes", "{\"users\":{\"email\":[null,\"test\"]}}"], ["action", "create"], ["created_at", 2017-02-08 13:10:15 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.0ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-08 13:10:15 UTC], ["updated_at", 2017-02-08 13:10:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 4], ["created_at", 2017-02-08 13:10:15 UTC], ["updated_at", 2017-02-08 13:10:15 UTC]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 28], ["parent_type", "Company"], ["parent_id", 4], ["record_changes", "{\"users\":{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,4]}}"], ["action", "create"], ["created_at", 2017-02-08 13:10:15 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.2ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (29.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (12.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"users\":{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}}"], ["request_uuid", "88b4986a-3979-4242-9bf5-e3ad4fd0b434"], ["action", "create"], ["created_at", 2017-02-08 13:12:17 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 34ms (Views: 0.3ms | ActiveRecord: 3.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"users\":{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}}"], ["request_uuid", "ede2937d-dd59-47d5-81d0-71782fb640c9"], ["action", "register"], ["created_at", 2017-02-08 13:12:17 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 2.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"companies\":{\"name\":[null,\"Kopmanija\"]}}"], ["request_uuid", "2564f3b0-a53f-4a6e-b21a-c2ae05b496ab"], ["action", "create"], ["created_at", 2017-02-08 13:12:17 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"users\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}}"], ["meta", "{\"users\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "2564f3b0-a53f-4a6e-b21a-c2ae05b496ab"], ["action", "create"], ["created_at", 2017-02-08 13:12:17 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"users\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}}"], ["meta", "{\"users\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "2564f3b0-a53f-4a6e-b21a-c2ae05b496ab"], ["action", "create"], ["created_at", 2017-02-08 13:12:17 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"users\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}}"], ["meta", "{\"users\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "2564f3b0-a53f-4a6e-b21a-c2ae05b496ab"], ["action", "create"], ["created_at", 2017-02-08 13:12:17 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 81ms (Views: 0.2ms | ActiveRecord: 7.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"companies\":{\"name\":[null,\"Kopmanija\"]}}"], ["request_uuid", "e34680af-535f-47c2-b8af-8cb174356f3e"], ["action", "create"], ["created_at", 2017-02-08 13:12:17 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"users\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]}}"], ["meta", "{\"users\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "e34680af-535f-47c2-b8af-8cb174356f3e"], ["action", "create"], ["created_at", 2017-02-08 13:12:17 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"users\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]}}"], ["meta", "{\"users\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "e34680af-535f-47c2-b8af-8cb174356f3e"], ["action", "create"], ["created_at", 2017-02-08 13:12:17 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"users\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}"], ["meta", "{\"users\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}"], ["request_uuid", "e34680af-535f-47c2-b8af-8cb174356f3e"], ["action", "create"], ["created_at", 2017-02-08 13:12:17 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "e34680af-535f-47c2-b8af-8cb174356f3e"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "e34680af-535f-47c2-b8af-8cb174356f3e"]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"companies\":{\"name\":[null,\"Kopmanija\"]},\"users\":{\"10\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"11\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"10\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"11\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["id", 7]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 10]]
Completed 200 OK in 50ms (Views: 0.2ms | ActiveRecord: 7.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"users\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]}}"], ["meta", "{\"users\":{\"name\":\"User1\",\"company_name\":null}}"], ["request_uuid", "d242dcd6-39a8-47a7-ab8e-889ada6f5310"], ["action", "create"], ["created_at", 2017-02-08 13:12:17 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"users\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]}}"], ["meta", "{\"users\":{\"name\":\"User2\",\"company_name\":null}}"], ["request_uuid", "d242dcd6-39a8-47a7-ab8e-889ada6f5310"], ["action", "create"], ["created_at", 2017-02-08 13:12:17 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"users\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}"], ["meta", "{\"users\":{\"name\":\"User3\",\"company_name\":null}}"], ["request_uuid", "d242dcd6-39a8-47a7-ab8e-889ada6f5310"], ["action", "create"], ["created_at", 2017-02-08 13:12:17 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "d242dcd6-39a8-47a7-ab8e-889ada6f5310"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "d242dcd6-39a8-47a7-ab8e-889ada6f5310"]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["record_changes", "{\"companies\":{},\"users\":{\"14\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"15\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"14\":{\"name\":\"User1\",\"company_name\":null},\"15\":{\"name\":\"User2\",\"company_name\":null},\"16\":{\"name\":\"User3\",\"company_name\":null}}}"], ["request_uuid", "d242dcd6-39a8-47a7-ab8e-889ada6f5310"], ["action", "create"], ["created_at", 2017-02-08 13:12:17 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 11]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 12]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 13]]
Completed 200 OK in 42ms (Views: 0.2ms | ActiveRecord: 8.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("created_at") VALUES ($1) RETURNING "id"[0m  [["created_at", 2017-02-08 13:12:17 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 19], ["record_changes", "{\"users\":{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}}"], ["action", "create"], ["created_at", 2017-02-08 13:12:17 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-08 13:12:17 UTC], ["id", 20]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 20], ["record_changes", "{\"users\":{\"email\":[\"test\",\"test1\"]}}"], ["action", "update"], ["created_at", 2017-02-08 13:12:17 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:12:17 UTC], ["updated_at", 2017-02-08 13:12:17 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 21]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 21], ["record_changes", "{\"users\":{}}"], ["action", "destroy"], ["created_at", 2017-02-08 13:12:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:12:18 UTC], ["updated_at", 2017-02-08 13:12:18 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "{\"users\":{\"email\":[null,\"test\"]}}"], ["action", "create"], ["created_at", 2017-02-08 13:12:18 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:12:18 UTC], ["updated_at", 2017-02-08 13:12:18 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 23], ["record_changes", "{\"users\":{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}}"], ["meta", "{\"users\":{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}}"], ["action", "create"], ["created_at", 2017-02-08 13:12:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:12:18 UTC], ["updated_at", 2017-02-08 13:12:18 UTC]]
  [1m[35mSQL (3.9ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 24], ["record_changes", "{\"users\":{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}}"], ["meta", "{\"users\":{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}}"], ["action", "create"], ["created_at", 2017-02-08 13:12:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:12:18 UTC], ["updated_at", 2017-02-08 13:12:18 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 25], ["record_changes", "{\"users\":{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}}"], ["meta", "{\"users\":{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}}"], ["action", "create"], ["created_at", 2017-02-08 13:12:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:12:18 UTC], ["updated_at", 2017-02-08 13:12:18 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-08 13:12:18 UTC], ["updated_at", 2017-02-08 13:12:18 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 26], ["subject_type", "UserOnly"], ["subject_id", 27], ["record_changes", "{\"users\":{\"email\":[null,\"test\"]}}"], ["action", "create"], ["created_at", 2017-02-08 13:12:18 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-08 13:12:18 UTC], ["updated_at", 2017-02-08 13:12:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 4], ["created_at", 2017-02-08 13:12:18 UTC], ["updated_at", 2017-02-08 13:12:18 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 28], ["parent_type", "Company"], ["parent_id", 4], ["record_changes", "{\"users\":{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,4]}}"], ["action", "create"], ["created_at", 2017-02-08 13:12:18 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (30.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (52.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (7.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (26.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "a29256df-73a3-4fe8-bdef-bfebd235d527"], ["action", "create"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 27ms (Views: 0.2ms | ActiveRecord: 2.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (8.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "ced4b942-7a06-4b6c-b428-159ece0940be"], ["action", "create"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (2.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "569696ed-5c4a-412e-840c-f540e14cec95"], ["action", "create"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "e84aa52f-9f5d-48e0-aaf5-46b3652ee7f9"], ["action", "create"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "e9388ce5-4f78-48d6-8beb-f1a86934e15d"], ["action", "create"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "a952629f-da81-406e-9e78-ae5585c16898"], ["action", "create"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 69ms (Views: 0.1ms | ActiveRecord: 7.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "e9f550fc-2b95-4f4b-a303-643036fcd65a"], ["action", "create"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "51c628d9-6716-4cd9-a446-49de4642b186"], ["action", "create"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "43ff0523-1788-4a51-8935-22242d584cc3"], ["action", "create"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "4d25ced2-fe51-48d4-8a23-0089adec0dbd"], ["action", "create"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 36ms (Views: 0.1ms | ActiveRecord: 4.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["request_uuid", "92a70838-3e9e-44e8-9997-04a85890e458"], ["action", "create"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "9b18af08-acb2-4c50-91b1-d72c64201934"], ["action", "create"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "f3e44bcb-6ecb-4572-a56c-b7bc9af07660"], ["action", "create"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User3\",\"company_name\":null}"], ["request_uuid", "02aa2580-066c-4c1e-8dd9-9268f3709419"], ["action", "create"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 39ms (Views: 0.1ms | ActiveRecord: 4.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["request_uuid", "e819eb19-9dcb-447f-9e59-ccf5996db73e"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 19], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "0a0a37b7-a49f-4645-886f-3c98d349f419"], ["action", "create"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-09 07:52:11 UTC], ["id", 20]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 20], ["record_changes", "{\"email\":[\"test\",\"test1\"]}"], ["request_uuid", "6a97f9a6-df05-49cc-97a6-9c89c177d22b"], ["action", "update"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 21]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 21], ["request_uuid", "dd233b06-3beb-4dbe-aa26-3d084f5039a5"], ["action", "destroy"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "851de2e8-3a8e-4587-872d-93ad6c541659"], ["action", "create"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "26bb31e6-60a8-4789-a20e-53e7bbc4c15e"], ["action", "create"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 24], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "f1b9f1e2-0540-4b2e-8acb-4595e1bb630c"], ["action", "create"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (7.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 25], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "b27f07b6-f8c5-4650-b5a0-66259b8b6ab8"], ["action", "create"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[35mSQL (7.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 26], ["subject_type", "UserOnly"], ["subject_id", 27], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "71074896-a157-455f-a8a3-b9268150660b"], ["action", "create"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 4], ["created_at", 2017-02-09 07:52:11 UTC], ["updated_at", 2017-02-09 07:52:11 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 28], ["parent_type", "Company"], ["parent_id", 4], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,4]}"], ["request_uuid", "5d566807-475f-487d-b78c-e5f906896d80"], ["action", "create"], ["created_at", 2017-02-09 07:52:11 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (10.7ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (42.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (20.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (27.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "79ce6816-20cb-49f8-97c5-8a87cb345229"], ["action", "create"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 27ms (Views: 0.2ms | ActiveRecord: 2.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "9669d365-2d8b-4ab7-aa5e-1baf78332eda"], ["action", "create"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "a0455395-49d5-404a-8712-2b09c04bcfbc"], ["action", "create"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "4f4458d7-a803-41a6-a022-14b0497daf36"], ["action", "create"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "7d43425b-92ce-46d7-8cfc-0096b916444a"], ["action", "create"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "17843ed7-a25a-4cea-9980-97425504c57d"], ["action", "create"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 68ms (Views: 0.1ms | ActiveRecord: 7.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "8914b7c1-870d-436c-8467-708adfb998c3"], ["action", "create"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "7ab96861-82f0-4d06-a781-b5c16ffb38ae"], ["action", "create"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "e7934260-c221-4f8f-b32c-9e18718f6a53"], ["action", "create"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35mSQL (2.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "76da3b87-b24c-4875-9e02-e814c31da4a5"], ["action", "create"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 50ms (Views: 0.2ms | ActiveRecord: 7.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["request_uuid", "3e93d921-f68c-4e3b-962c-5f1ed7248e3d"], ["action", "create"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35mSQL (3.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "22becbaa-d9da-4aa8-9479-b99f9a3089e3"], ["action", "create"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "71a14936-e914-4bbb-9bf8-c300c0dbbf69"], ["action", "create"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User3\",\"company_name\":null}"], ["request_uuid", "7628c6df-fe49-4efa-b407-42a221d3d7b8"], ["action", "create"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 39ms (Views: 0.2ms | ActiveRecord: 8.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["request_uuid", "93fa9944-d0e9-4309-a580-87b794b57c85"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 19], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "2dec506e-afaf-4508-aa51-4a0e0187c07f"], ["action", "create"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-09 07:53:18 UTC], ["id", 20]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 20], ["record_changes", "{\"email\":[\"test\",\"test1\"]}"], ["request_uuid", "64d8150b-f2c4-4752-bb17-13499e61d054"], ["action", "update"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 21]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 21], ["request_uuid", "72e0d9ad-c94f-4a76-b988-f39f89c57c9e"], ["action", "destroy"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "8de2a449-896d-4518-ba6d-d4d013850ba1"], ["action", "create"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "afee3ffc-3ef1-417b-b99c-b68689b7a0b8"], ["action", "create"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 24], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "d6dfc0ca-5075-4c50-adac-6562d2f761c9"], ["action", "create"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (2.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 25], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "0a780421-5bbb-4442-a60e-150c3dbe3702"], ["action", "create"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 26], ["subject_type", "UserOnly"], ["subject_id", 27], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "553b9d28-42e7-47fb-8d46-d902ca42fbd8"], ["action", "create"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 4], ["created_at", 2017-02-09 07:53:18 UTC], ["updated_at", 2017-02-09 07:53:18 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 28], ["parent_type", "Company"], ["parent_id", 4], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,4]}"], ["request_uuid", "b4688de3-84fb-49a4-a8b0-eb7393d16eda"], ["action", "create"], ["created_at", 2017-02-09 07:53:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (17.0ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (37.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.9ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (29.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (48.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "4d43e83c-2eba-4f2e-8811-629c8c7e2069"], ["action", "create"], ["created_at", 2017-02-09 07:54:10 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 32ms (Views: 1.0ms | ActiveRecord: 2.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "e1d965a9-e403-48c0-a64d-9cf6c3ca1509"], ["action", "register"], ["created_at", 2017-02-09 07:54:10 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.3ms | ActiveRecord: 1.8ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "808c4f4e-963b-4f80-9515-cde35cfb8d1a"], ["action", "create"], ["created_at", 2017-02-09 07:54:10 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "c53e8592-cfa6-4308-8f47-769d76735fce"], ["action", "create"], ["created_at", 2017-02-09 07:54:10 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "05650b48-f0eb-4d94-abfc-0b093dd09b5b"], ["action", "create"], ["created_at", 2017-02-09 07:54:10 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "853f1e77-febb-4ddc-9efd-aa23c09f9910"], ["action", "create"], ["created_at", 2017-02-09 07:54:10 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 92ms (Views: 0.2ms | ActiveRecord: 10.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "a71c51b8-6394-4ce9-bfe2-2157bfa4ad36"], ["action", "create"], ["created_at", 2017-02-09 07:54:10 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "2a7f4702-7b5c-4da4-aaba-d9563dabf2ce"], ["action", "create"], ["created_at", 2017-02-09 07:54:10 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "0e62460f-a874-4d3b-a31d-a9b5b07002da"], ["action", "create"], ["created_at", 2017-02-09 07:54:10 UTC]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "d610d18e-31bc-49aa-984a-37e50da182aa"], ["action", "create"], ["created_at", 2017-02-09 07:54:10 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 53ms (Views: 0.5ms | ActiveRecord: 7.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["request_uuid", "d8dbcdc4-a001-4724-8626-7b64461ce71d"], ["action", "create"], ["created_at", 2017-02-09 07:54:10 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "95681061-9d16-480f-b309-7aac03e41bd3"], ["action", "create"], ["created_at", 2017-02-09 07:54:10 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "13ba727c-1ce8-4b97-bb9e-51a5caa22b48"], ["action", "create"], ["created_at", 2017-02-09 07:54:10 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User3\",\"company_name\":null}"], ["request_uuid", "79cc9851-d627-459a-82e0-cdee6041a601"], ["action", "create"], ["created_at", 2017-02-09 07:54:10 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 60ms (Views: 0.3ms | ActiveRecord: 7.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["request_uuid", "4d498385-645d-4f26-b99a-a82a4ed981e4"], ["created_at", 2017-02-09 07:54:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 19], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "b6b0187c-648e-4b4a-b4fa-61e87f9eeb67"], ["action", "create"], ["created_at", 2017-02-09 07:54:10 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (7.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-09 07:54:10 UTC], ["id", 20]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 20], ["record_changes", "{\"email\":[\"test\",\"test1\"]}"], ["request_uuid", "cb94a07e-89a8-479c-9923-e7c0dced3cf3"], ["action", "update"], ["created_at", 2017-02-09 07:54:10 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 21]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 21], ["request_uuid", "3f6e4b37-7e17-4ff5-8efb-34027d62d613"], ["action", "destroy"], ["created_at", 2017-02-09 07:54:10 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:54:10 UTC], ["updated_at", 2017-02-09 07:54:10 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "be698776-0e6f-4d0a-8cdb-9b41e4219dd5"], ["action", "create"], ["created_at", 2017-02-09 07:54:10 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.0ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (14.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:54:11 UTC], ["updated_at", 2017-02-09 07:54:11 UTC]]
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "c556d126-51fb-4c87-8558-e7149c70f9df"], ["action", "create"], ["created_at", 2017-02-09 07:54:11 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:54:11 UTC], ["updated_at", 2017-02-09 07:54:11 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 24], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "085e610d-f6cd-47b1-83f2-247c8d01e44f"], ["action", "create"], ["created_at", 2017-02-09 07:54:11 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:54:11 UTC], ["updated_at", 2017-02-09 07:54:11 UTC]]
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 25], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "3d705bf3-aba8-48ca-b7f3-a1895365597e"], ["action", "create"], ["created_at", 2017-02-09 07:54:11 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.7ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:54:11 UTC], ["updated_at", 2017-02-09 07:54:11 UTC]]
  [1m[35m (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:54:11 UTC], ["updated_at", 2017-02-09 07:54:11 UTC]]
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 26], ["subject_type", "UserOnly"], ["subject_id", 27], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "678ec06b-7633-40ce-be00-c62aa3754377"], ["action", "create"], ["created_at", 2017-02-09 07:54:11 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-09 07:54:11 UTC], ["updated_at", 2017-02-09 07:54:11 UTC]]
  [1m[35m (2.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 4], ["created_at", 2017-02-09 07:54:11 UTC], ["updated_at", 2017-02-09 07:54:11 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 28], ["parent_type", "Company"], ["parent_id", 4], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,4]}"], ["request_uuid", "29ab0705-d1eb-4c65-9024-35a33e34322a"], ["action", "create"], ["created_at", 2017-02-09 07:54:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (11.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (47.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (7.7ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (8.8ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.2ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (24.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:55:44 UTC], ["updated_at", 2017-02-09 07:55:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-09 07:55:44 UTC], ["updated_at", 2017-02-09 07:55:44 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "8450fa66-46d9-4725-bf22-17c505a98b43"], ["action", "create"], ["created_at", 2017-02-09 07:55:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 29ms (Views: 0.2ms | ActiveRecord: 2.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:55:44 UTC], ["updated_at", 2017-02-09 07:55:44 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-09 07:55:44 UTC], ["updated_at", 2017-02-09 07:55:44 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "ea8e10a3-f2b4-42da-9d6c-9c111d8f3860"], ["action", "register"], ["created_at", 2017-02-09 07:55:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (2.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:55:44 UTC], ["updated_at", 2017-02-09 07:55:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-09 07:55:44 UTC], ["updated_at", 2017-02-09 07:55:44 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "58755004-7a5d-4b10-8f9a-749fa8f4dd72"], ["action", "create"], ["created_at", 2017-02-09 07:55:44 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-09 07:55:44 UTC], ["updated_at", 2017-02-09 07:55:44 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "0b367a7c-e9df-4c5d-8457-7bc1bfe04c38"], ["action", "create"], ["created_at", 2017-02-09 07:55:44 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-09 07:55:44 UTC], ["updated_at", 2017-02-09 07:55:44 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "055ce843-025b-4c65-94c1-64aa9dbfa0d6"], ["action", "create"], ["created_at", 2017-02-09 07:55:44 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-09 07:55:44 UTC], ["updated_at", 2017-02-09 07:55:44 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "df893800-6a9b-45ee-9856-687a4715fb6b"], ["action", "create"], ["created_at", 2017-02-09 07:55:44 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 67ms (Views: 0.1ms | ActiveRecord: 11.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:56:11 UTC], ["updated_at", 2017-02-09 07:56:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-09 07:56:11 UTC], ["updated_at", 2017-02-09 07:56:11 UTC]]
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "adecd02f-3c5d-4265-8531-fe84dd47eca6"], ["action", "create"], ["created_at", 2017-02-09 07:56:11 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", 2017-02-09 07:56:11 UTC], ["updated_at", 2017-02-09 07:56:11 UTC]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "f6073961-d92c-4c28-a077-8045ad0b48ab"], ["action", "create"], ["created_at", 2017-02-09 07:56:11 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", 2017-02-09 07:56:11 UTC], ["updated_at", 2017-02-09 07:56:11 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "a7b7fa7e-78c6-4c77-95ba-c341e1e1b65b"], ["action", "create"], ["created_at", 2017-02-09 07:56:11 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", 2017-02-09 07:56:11 UTC], ["updated_at", 2017-02-09 07:56:11 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "da60584d-a21c-482f-8f41-d951ddad4974"], ["action", "create"], ["created_at", 2017-02-09 07:56:11 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 68ms (Views: 0.2ms | ActiveRecord: 7.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:56:11 UTC], ["updated_at", 2017-02-09 07:56:11 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-09 07:56:12 UTC], ["updated_at", 2017-02-09 07:56:12 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["request_uuid", "6a2c9881-229f-452b-90e5-4e8e45cc8283"], ["action", "create"], ["created_at", 2017-02-09 07:56:12 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", 2017-02-09 07:56:12 UTC], ["updated_at", 2017-02-09 07:56:12 UTC]]
  [1m[36mCompany Load (1.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (4.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "1dd44ec5-8cd8-4772-a0f5-2f56e02625bd"], ["action", "create"], ["created_at", 2017-02-09 07:56:12 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", 2017-02-09 07:56:12 UTC], ["updated_at", 2017-02-09 07:56:12 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "14a52afc-861c-4e00-a984-3cb05d2a37e8"], ["action", "create"], ["created_at", 2017-02-09 07:56:12 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", 2017-02-09 07:56:12 UTC], ["updated_at", 2017-02-09 07:56:12 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User3\",\"company_name\":null}"], ["request_uuid", "11e2fcdf-8fe4-4c10-b09c-2d791128f674"], ["action", "create"], ["created_at", 2017-02-09 07:56:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 63ms (Views: 0.2ms | ActiveRecord: 10.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "admin"], ["created_at", 2017-02-09 07:56:12 UTC], ["updated_at", 2017-02-09 07:56:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "request_uuid", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 17], ["request_uuid", "cc7091aa-cde7-49de-bb61-12c891ffba0b"], ["created_at", 2017-02-09 07:56:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:56:12 UTC], ["updated_at", 2017-02-09 07:56:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:56:12 UTC], ["updated_at", 2017-02-09 07:56:12 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 19], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["request_uuid", "ef8976bc-38aa-4233-89f9-cc778e49b9a4"], ["action", "create"], ["created_at", 2017-02-09 07:56:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:56:12 UTC], ["updated_at", 2017-02-09 07:56:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "test1"], ["updated_at", 2017-02-09 07:56:12 UTC], ["id", 20]]
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 20], ["record_changes", "{\"email\":[\"test\",\"test1\"]}"], ["request_uuid", "930c530c-d445-4b1a-8410-022446cb19d0"], ["action", "update"], ["created_at", 2017-02-09 07:56:12 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:56:12 UTC], ["updated_at", 2017-02-09 07:56:12 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 21]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["subject_type", "User"], ["subject_id", 21], ["request_uuid", "c3d8b1b1-464e-4969-8a04-c7471ea75f3e"], ["action", "destroy"], ["created_at", 2017-02-09 07:56:12 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.9ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:56:12 UTC], ["updated_at", 2017-02-09 07:56:12 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["subject_type", "UserOnly"], ["subject_id", 22], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "2e3a7f9c-4c4c-42e7-9b78-43082ad2abac"], ["action", "create"], ["created_at", 2017-02-09 07:56:12 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:56:12 UTC], ["updated_at", 2017-02-09 07:56:12 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaTrue"], ["subject_id", 23], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "28d5c795-eb14-4b24-9899-3ac7b5867991"], ["action", "create"], ["created_at", 2017-02-09 07:56:12 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:56:12 UTC], ["updated_at", 2017-02-09 07:56:12 UTC]]
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaSymbol"], ["subject_id", 24], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "f9d4f8bc-1d23-439e-91ba-cb9afcb67fe8"], ["action", "create"], ["created_at", 2017-02-09 07:56:12 UTC]]
  [1m[35m (3.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.8ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (2.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:56:12 UTC], ["updated_at", 2017-02-09 07:56:12 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["subject_type", "UserMetaProc"], ["subject_id", 25], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"]}"], ["meta", "{\"name\":\"test\",\"arbitraty\":\"arbitraty\"}"], ["request_uuid", "afed8ac0-beae-4129-81a4-3c28e7056a17"], ["action", "create"], ["created_at", 2017-02-09 07:56:12 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:56:12 UTC], ["updated_at", 2017-02-09 07:56:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["created_at", 2017-02-09 07:56:12 UTC], ["updated_at", 2017-02-09 07:56:12 UTC]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 26], ["subject_type", "UserOnly"], ["subject_id", 27], ["record_changes", "{\"email\":[null,\"test\"]}"], ["request_uuid", "e1ae1a2d-f4a1-40ef-a310-02f2ac690590"], ["action", "create"], ["created_at", 2017-02-09 07:56:12 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.9ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "company"], ["created_at", 2017-02-09 07:56:12 UTC], ["updated_at", 2017-02-09 07:56:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "test"], ["name", "test"], ["address", "nowere"], ["company_id", 4], ["created_at", 2017-02-09 07:56:12 UTC], ["updated_at", 2017-02-09 07:56:12 UTC]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "records" ("subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["subject_type", "UserWithCompany"], ["subject_id", 28], ["parent_type", "Company"], ["parent_id", 4], ["record_changes", "{\"email\":[null,\"test\"],\"name\":[null,\"test\"],\"address\":[null,\"nowere\"],\"company_id\":[null,4]}"], ["request_uuid", "4bc59419-c730-4281-90a0-bb3a3b9f92f0"], ["action", "create"], ["created_at", 2017-02-09 07:56:12 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (9.6ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (14.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (52.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:56:22 UTC], ["updated_at", 2017-02-09 07:56:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 80233ms (ActiveRecord: 0.2ms)
  [1m[35m (10.2ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (46.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (7.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (14.0ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:57:52 UTC], ["updated_at", 2017-02-09 07:57:52 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-09 07:57:52 UTC], ["updated_at", 2017-02-09 07:57:52 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "dfe4e3d03a76202a9a1e4691d1084b55"], ["action", "create"], ["created_at", 2017-02-09 07:57:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 40ms (Views: 0.2ms | ActiveRecord: 5.2ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:57:52 UTC], ["updated_at", 2017-02-09 07:57:52 UTC]]
  [1m[35m (2.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-09 07:57:52 UTC], ["updated_at", 2017-02-09 07:57:52 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "32489e83f31e7a40913225731e6c4413"], ["action", "register"], ["created_at", 2017-02-09 07:57:52 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 2.0ms)
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (1.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:57:52 UTC], ["updated_at", 2017-02-09 07:57:52 UTC]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-09 07:57:52 UTC], ["updated_at", 2017-02-09 07:57:52 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "4d340f9ec3eeae7fc47b6ce36f087467"], ["action", "create"], ["created_at", 2017-02-09 07:57:52 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-09 07:57:52 UTC], ["updated_at", 2017-02-09 07:57:52 UTC]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "4d340f9ec3eeae7fc47b6ce36f087467"], ["action", "create"], ["created_at", 2017-02-09 07:57:52 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-09 07:57:52 UTC], ["updated_at", 2017-02-09 07:57:52 UTC]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (6.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "4d340f9ec3eeae7fc47b6ce36f087467"], ["action", "create"], ["created_at", 2017-02-09 07:57:52 UTC]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-09 07:57:52 UTC], ["updated_at", 2017-02-09 07:57:52 UTC]]
  [1m[36mCompany Load (4.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (8.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "4d340f9ec3eeae7fc47b6ce36f087467"], ["action", "create"], ["created_at", 2017-02-09 07:57:52 UTC]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 241ms (Views: 2.6ms | ActiveRecord: 29.9ms)
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:58:28 UTC], ["updated_at", 2017-02-09 07:58:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-09 07:58:28 UTC], ["updated_at", 2017-02-09 07:58:28 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "e3e1f33563f3e7828989f2c7ad6cc7ec"], ["action", "create"], ["created_at", 2017-02-09 07:58:28 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", 2017-02-09 07:58:28 UTC], ["updated_at", 2017-02-09 07:58:28 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "e3e1f33563f3e7828989f2c7ad6cc7ec"], ["action", "create"], ["created_at", 2017-02-09 07:58:28 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", 2017-02-09 07:58:28 UTC], ["updated_at", 2017-02-09 07:58:28 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "e3e1f33563f3e7828989f2c7ad6cc7ec"], ["action", "create"], ["created_at", 2017-02-09 07:58:28 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", 2017-02-09 07:58:28 UTC], ["updated_at", 2017-02-09 07:58:28 UTC]]
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "e3e1f33563f3e7828989f2c7ad6cc7ec"], ["action", "create"], ["created_at", 2017-02-09 07:58:28 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "e3e1f33563f3e7828989f2c7ad6cc7ec"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "e3e1f33563f3e7828989f2c7ad6cc7ec"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"10\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"11\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"10\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"11\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["id", 7]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 10]]
Completed 200 OK in 87ms (Views: 0.6ms | ActiveRecord: 10.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:58:28 UTC], ["updated_at", 2017-02-09 07:58:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-09 07:58:28 UTC], ["updated_at", 2017-02-09 07:58:28 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["request_uuid", "57e0efd362cbb5078c260b1cff35f2a5"], ["action", "create"], ["created_at", 2017-02-09 07:58:28 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", 2017-02-09 07:58:28 UTC], ["updated_at", 2017-02-09 07:58:28 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "57e0efd362cbb5078c260b1cff35f2a5"], ["action", "create"], ["created_at", 2017-02-09 07:58:28 UTC]]
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", 2017-02-09 07:58:28 UTC], ["updated_at", 2017-02-09 07:58:28 UTC]]
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "57e0efd362cbb5078c260b1cff35f2a5"], ["action", "create"], ["created_at", 2017-02-09 07:58:28 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", 2017-02-09 07:58:28 UTC], ["updated_at", 2017-02-09 07:58:28 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User3\",\"company_name\":null}"], ["request_uuid", "57e0efd362cbb5078c260b1cff35f2a5"], ["action", "create"], ["created_at", 2017-02-09 07:58:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "57e0efd362cbb5078c260b1cff35f2a5"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "57e0efd362cbb5078c260b1cff35f2a5"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"users\":{\"14\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"15\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"14\":{\"name\":\"User1\",\"company_name\":null},\"15\":{\"name\":\"User2\",\"company_name\":null},\"16\":{\"name\":\"User3\",\"company_name\":null}}}"], ["id", 11]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 12]]
  [1m[35mSQL (1.0ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 13]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 14]]
Completed 200 OK in 85ms (Views: 0.3ms | ActiveRecord: 12.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (22.9ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (61.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (4.7ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (8.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (24.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:59:18 UTC], ["updated_at", 2017-02-09 07:59:18 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-09 07:59:18 UTC], ["updated_at", 2017-02-09 07:59:18 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "b75f43efc11ace2b9a3124bab4fb2460"], ["action", "create"], ["created_at", 2017-02-09 07:59:19 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 48ms (Views: 0.2ms | ActiveRecord: 6.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:59:19 UTC], ["updated_at", 2017-02-09 07:59:19 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-09 07:59:19 UTC], ["updated_at", 2017-02-09 07:59:19 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "270e16ab7575f356e9a9820e3e228de9"], ["action", "register"], ["created_at", 2017-02-09 07:59:19 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.3ms | ActiveRecord: 2.0ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (2.5ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:59:19 UTC], ["updated_at", 2017-02-09 07:59:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-09 07:59:19 UTC], ["updated_at", 2017-02-09 07:59:19 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "54314a0ec4e7ee976ac3d2afa3b4012c"], ["action", "create"], ["created_at", 2017-02-09 07:59:19 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-09 07:59:19 UTC], ["updated_at", 2017-02-09 07:59:19 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "54314a0ec4e7ee976ac3d2afa3b4012c"], ["action", "create"], ["created_at", 2017-02-09 07:59:19 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-09 07:59:19 UTC], ["updated_at", 2017-02-09 07:59:19 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "54314a0ec4e7ee976ac3d2afa3b4012c"], ["action", "create"], ["created_at", 2017-02-09 07:59:19 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-09 07:59:19 UTC], ["updated_at", 2017-02-09 07:59:19 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "54314a0ec4e7ee976ac3d2afa3b4012c"], ["action", "create"], ["created_at", 2017-02-09 07:59:19 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 79ms (Views: 0.2ms | ActiveRecord: 9.1ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:59:19 UTC], ["updated_at", 2017-02-09 07:59:19 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-09 07:59:19 UTC], ["updated_at", 2017-02-09 07:59:19 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "52db333ceef2e1d6e2917b1d27777b37"], ["action", "create"], ["created_at", 2017-02-09 07:59:19 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", 2017-02-09 07:59:19 UTC], ["updated_at", 2017-02-09 07:59:19 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "52db333ceef2e1d6e2917b1d27777b37"], ["action", "create"], ["created_at", 2017-02-09 07:59:19 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", 2017-02-09 07:59:19 UTC], ["updated_at", 2017-02-09 07:59:19 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "52db333ceef2e1d6e2917b1d27777b37"], ["action", "create"], ["created_at", 2017-02-09 07:59:19 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", 2017-02-09 07:59:19 UTC], ["updated_at", 2017-02-09 07:59:19 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "52db333ceef2e1d6e2917b1d27777b37"], ["action", "create"], ["created_at", 2017-02-09 07:59:19 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "52db333ceef2e1d6e2917b1d27777b37"]]
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "52db333ceef2e1d6e2917b1d27777b37"]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"10\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"11\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"10\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"11\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["id", 7]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 10]]
Completed 200 OK in 85ms (Views: 0.3ms | ActiveRecord: 10.1ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:59:53 UTC], ["updated_at", 2017-02-09 07:59:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-09 07:59:53 UTC], ["updated_at", 2017-02-09 07:59:53 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["request_uuid", "9dfa442991e92ef02f0264f9a292d14b"], ["action", "create"], ["created_at", 2017-02-09 07:59:53 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", 2017-02-09 07:59:53 UTC], ["updated_at", 2017-02-09 07:59:53 UTC]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "9dfa442991e92ef02f0264f9a292d14b"], ["action", "create"], ["created_at", 2017-02-09 07:59:53 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", 2017-02-09 07:59:53 UTC], ["updated_at", 2017-02-09 07:59:53 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "9dfa442991e92ef02f0264f9a292d14b"], ["action", "create"], ["created_at", 2017-02-09 07:59:53 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", 2017-02-09 07:59:53 UTC], ["updated_at", 2017-02-09 07:59:53 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User3\",\"company_name\":null}"], ["request_uuid", "9dfa442991e92ef02f0264f9a292d14b"], ["action", "create"], ["created_at", 2017-02-09 07:59:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "9dfa442991e92ef02f0264f9a292d14b"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "9dfa442991e92ef02f0264f9a292d14b"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"users\":{\"14\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"15\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"14\":{\"name\":\"User1\",\"company_name\":null},\"15\":{\"name\":\"User2\",\"company_name\":null},\"16\":{\"name\":\"User3\",\"company_name\":null}}}"], ["id", 11]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 12]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 13]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 14]]
Completed 200 OK in 72ms (Views: 0.2ms | ActiveRecord: 13.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (43.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (9.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (24.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:59:59 UTC], ["updated_at", 2017-02-09 07:59:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-09 07:59:59 UTC], ["updated_at", 2017-02-09 07:59:59 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "99308dc9db80943f1b598ec6771202b0"], ["action", "create"], ["created_at", 2017-02-09 07:59:59 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 29ms (Views: 0.2ms | ActiveRecord: 2.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:59:59 UTC], ["updated_at", 2017-02-09 07:59:59 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-09 07:59:59 UTC], ["updated_at", 2017-02-09 07:59:59 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "dc0ecd816f0a0a4c330abf6cc136ae31"], ["action", "register"], ["created_at", 2017-02-09 07:59:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (2.6ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:59:59 UTC], ["updated_at", 2017-02-09 07:59:59 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (2.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-09 07:59:59 UTC], ["updated_at", 2017-02-09 07:59:59 UTC]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "c4cf300097eaf5cc7fce96e60cf50e15"], ["action", "create"], ["created_at", 2017-02-09 07:59:59 UTC]]
  [1m[35mSQL (5.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-09 07:59:59 UTC], ["updated_at", 2017-02-09 07:59:59 UTC]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "c4cf300097eaf5cc7fce96e60cf50e15"], ["action", "create"], ["created_at", 2017-02-09 07:59:59 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-09 07:59:59 UTC], ["updated_at", 2017-02-09 07:59:59 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "c4cf300097eaf5cc7fce96e60cf50e15"], ["action", "create"], ["created_at", 2017-02-09 07:59:59 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-09 07:59:59 UTC], ["updated_at", 2017-02-09 07:59:59 UTC]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "c4cf300097eaf5cc7fce96e60cf50e15"], ["action", "create"], ["created_at", 2017-02-09 07:59:59 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 353ms (Views: 0.4ms | ActiveRecord: 19.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 07:59:59 UTC], ["updated_at", 2017-02-09 07:59:59 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-09 08:00:00 UTC], ["updated_at", 2017-02-09 08:00:00 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "eed4b67e44ad271cf99ca24e1fb69d6f"], ["action", "create"], ["created_at", 2017-02-09 08:00:00 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", 2017-02-09 08:00:00 UTC], ["updated_at", 2017-02-09 08:00:00 UTC]]
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "eed4b67e44ad271cf99ca24e1fb69d6f"], ["action", "create"], ["created_at", 2017-02-09 08:00:00 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", 2017-02-09 08:00:00 UTC], ["updated_at", 2017-02-09 08:00:00 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "eed4b67e44ad271cf99ca24e1fb69d6f"], ["action", "create"], ["created_at", 2017-02-09 08:00:00 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", 2017-02-09 08:00:00 UTC], ["updated_at", 2017-02-09 08:00:00 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "eed4b67e44ad271cf99ca24e1fb69d6f"], ["action", "create"], ["created_at", 2017-02-09 08:00:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "eed4b67e44ad271cf99ca24e1fb69d6f"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "eed4b67e44ad271cf99ca24e1fb69d6f"]]
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.9ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"10\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"11\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"10\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"11\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["id", 7]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 10]]
Completed 200 OK in 115ms (Views: 0.1ms | ActiveRecord: 12.8ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 08:00:00 UTC], ["updated_at", 2017-02-09 08:00:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-09 08:00:00 UTC], ["updated_at", 2017-02-09 08:00:00 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["request_uuid", "05451740ab2e97cf270087e1d529b5bc"], ["action", "create"], ["created_at", 2017-02-09 08:00:00 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", 2017-02-09 08:00:00 UTC], ["updated_at", 2017-02-09 08:00:00 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "05451740ab2e97cf270087e1d529b5bc"], ["action", "create"], ["created_at", 2017-02-09 08:00:00 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", 2017-02-09 08:00:00 UTC], ["updated_at", 2017-02-09 08:00:00 UTC]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "05451740ab2e97cf270087e1d529b5bc"], ["action", "create"], ["created_at", 2017-02-09 08:00:00 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", 2017-02-09 08:00:00 UTC], ["updated_at", 2017-02-09 08:00:00 UTC]]
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User3\",\"company_name\":null}"], ["request_uuid", "05451740ab2e97cf270087e1d529b5bc"], ["action", "create"], ["created_at", 2017-02-09 08:00:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "05451740ab2e97cf270087e1d529b5bc"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "05451740ab2e97cf270087e1d529b5bc"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"users\":{\"14\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"15\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"14\":{\"name\":\"User1\",\"company_name\":null},\"15\":{\"name\":\"User2\",\"company_name\":null},\"16\":{\"name\":\"User3\",\"company_name\":null}}}"], ["id", 11]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 12]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 13]]
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 14]]
Completed 200 OK in 85ms (Views: 0.1ms | ActiveRecord: 10.7ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.8ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (37.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (12.4ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (15.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 08:00:12 UTC], ["updated_at", 2017-02-09 08:00:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-09 08:00:12 UTC], ["updated_at", 2017-02-09 08:00:12 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "User"], ["subject_id", 2], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "832ad626bfc746e5f071ae9b8132ca36"], ["action", "create"], ["created_at", 2017-02-09 08:00:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 28ms (Views: 0.2ms | ActiveRecord: 2.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 08:00:12 UTC], ["updated_at", 2017-02-09 08:00:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by UsersController#register as HTML
  Parameters: {"user"=>{"email"=>"Email", "name"=>"buja"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "Email"], ["name", "buja"], ["created_at", 2017-02-09 08:00:12 UTC], ["updated_at", 2017-02-09 08:00:12 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 3], ["subject_type", "User"], ["subject_id", 4], ["record_changes", "{\"email\":[null,\"Email\"],\"name\":[null,\"buja\"]}"], ["request_uuid", "4be01f7202a77c40a48f8f7885e957ca"], ["action", "register"], ["created_at", 2017-02-09 08:00:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 08:00:12 UTC], ["updated_at", 2017-02-09 08:00:12 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-09 08:00:12 UTC], ["updated_at", 2017-02-09 08:00:12 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "Company"], ["subject_id", 1], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "e0f36ab32db154ee4bb92f1cd6a6f59e"], ["action", "create"], ["created_at", 2017-02-09 08:00:12 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-09 08:00:12 UTC], ["updated_at", 2017-02-09 08:00:12 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 6], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "e0f36ab32db154ee4bb92f1cd6a6f59e"], ["action", "create"], ["created_at", 2017-02-09 08:00:12 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-09 08:00:12 UTC], ["updated_at", 2017-02-09 08:00:12 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 7], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "e0f36ab32db154ee4bb92f1cd6a6f59e"], ["action", "create"], ["created_at", 2017-02-09 08:00:12 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 1], ["created_at", 2017-02-09 08:00:12 UTC], ["updated_at", 2017-02-09 08:00:12 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 5], ["subject_type", "UserWithAll"], ["subject_id", 8], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "e0f36ab32db154ee4bb92f1cd6a6f59e"], ["action", "create"], ["created_at", 2017-02-09 08:00:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 61ms (Views: 0.1ms | ActiveRecord: 7.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 08:00:12 UTC], ["updated_at", 2017-02-09 08:00:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"name"=>"Kopmanija", "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Kopmanija"], ["created_at", 2017-02-09 08:00:12 UTC], ["updated_at", 2017-02-09 08:00:12 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "Company"], ["subject_id", 2], ["record_changes", "{\"name\":[null,\"Kopmanija\"]}"], ["request_uuid", "bd1f745f301035e96337a94c07b6fcee"], ["action", "create"], ["created_at", 2017-02-09 08:00:12 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 2], ["created_at", 2017-02-09 08:00:12 UTC], ["updated_at", 2017-02-09 08:00:12 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 10], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User1\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "bd1f745f301035e96337a94c07b6fcee"], ["action", "create"], ["created_at", 2017-02-09 08:00:12 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 2], ["created_at", 2017-02-09 08:00:12 UTC], ["updated_at", 2017-02-09 08:00:12 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 11], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User2\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "bd1f745f301035e96337a94c07b6fcee"], ["action", "create"], ["created_at", 2017-02-09 08:00:12 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 2], ["created_at", 2017-02-09 08:00:12 UTC], ["updated_at", 2017-02-09 08:00:12 UTC]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 9], ["subject_type", "UserWithAll"], ["subject_id", 12], ["parent_type", "Company"], ["parent_id", 2], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}"], ["meta", "{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}"], ["request_uuid", "bd1f745f301035e96337a94c07b6fcee"], ["action", "create"], ["created_at", 2017-02-09 08:00:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "bd1f745f301035e96337a94c07b6fcee"]]
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "bd1f745f301035e96337a94c07b6fcee"]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"name\":[null,\"Kopmanija\"],\"users\":{\"10\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,2]},\"11\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,2]},\"12\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,2]}}}"], ["meta", "{\"users\":{\"10\":{\"name\":\"User1\",\"company_name\":\"Kopmanija\"},\"11\":{\"name\":\"User2\",\"company_name\":\"Kopmanija\"},\"12\":{\"name\":\"User3\",\"company_name\":\"Kopmanija\"}}}"], ["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 10]]
Completed 200 OK in 50ms (Views: 0.1ms | ActiveRecord: 7.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 08:00:12 UTC], ["updated_at", 2017-02-09 08:00:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}, {"email"=>"user3@email.com", "name"=>"User3"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-09 08:00:12 UTC], ["updated_at", 2017-02-09 08:00:12 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "Company"], ["subject_id", 3], ["request_uuid", "82b7eb64478576d5b442f0f0009c787e"], ["action", "create"], ["created_at", 2017-02-09 08:00:12 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 3], ["created_at", 2017-02-09 08:00:12 UTC], ["updated_at", 2017-02-09 08:00:12 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 14], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "82b7eb64478576d5b442f0f0009c787e"], ["action", "create"], ["created_at", 2017-02-09 08:00:12 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 3], ["created_at", 2017-02-09 08:00:12 UTC], ["updated_at", 2017-02-09 08:00:12 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 15], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "82b7eb64478576d5b442f0f0009c787e"], ["action", "create"], ["created_at", 2017-02-09 08:00:12 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user3@email.com"], ["name", "User3"], ["company_id", 3], ["created_at", 2017-02-09 08:00:12 UTC], ["updated_at", 2017-02-09 08:00:12 UTC]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 13], ["subject_type", "UserWithAll"], ["subject_id", 16], ["parent_type", "Company"], ["parent_id", 3], ["record_changes", "{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}"], ["meta", "{\"name\":\"User3\",\"company_name\":null}"], ["request_uuid", "82b7eb64478576d5b442f0f0009c787e"], ["action", "create"], ["created_at", 2017-02-09 08:00:12 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "82b7eb64478576d5b442f0f0009c787e"]]
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "82b7eb64478576d5b442f0f0009c787e"]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"users\":{\"14\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,3]},\"15\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,3]},\"16\":{\"email\":[null,\"user3@email.com\"],\"name\":[null,\"User3\"],\"company_id\":[null,3]}}}"], ["meta", "{\"users\":{\"14\":{\"name\":\"User1\",\"company_name\":null},\"15\":{\"name\":\"User2\",\"company_name\":null},\"16\":{\"name\":\"User3\",\"company_name\":null}}}"], ["id", 11]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 12]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 13]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 14]]
Completed 200 OK in 49ms (Views: 0.1ms | ActiveRecord: 8.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (18.7ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (60.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (4.0ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (13.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 08:04:37 UTC], ["updated_at", 2017-02-09 08:04:37 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (8.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (17.9ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 08:04:47 UTC], ["updated_at", 2017-02-09 08:04:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"copmany_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameter: copmany_info_attributes
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-09 08:04:47 UTC], ["updated_at", 2017-02-09 08:04:47 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["request_uuid", "f2f9c661b4252f49e954a18f731509a5"], ["action", "create"], ["created_at", 2017-02-09 08:04:47 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-09 08:04:47 UTC], ["updated_at", 2017-02-09 08:04:47 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "f2f9c661b4252f49e954a18f731509a5"], ["action", "create"], ["created_at", 2017-02-09 08:04:47 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-09 08:04:47 UTC], ["updated_at", 2017-02-09 08:04:47 UTC]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "f2f9c661b4252f49e954a18f731509a5"], ["action", "create"], ["created_at", 2017-02-09 08:04:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "f2f9c661b4252f49e954a18f731509a5"]]
  [1m[36mLogBook::Record Load (0.1ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "f2f9c661b4252f49e954a18f731509a5"]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"users\":{\"2\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]},\"3\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}}}"], ["meta", "{\"users\":{\"2\":{\"name\":\"User1\",\"company_name\":null},\"3\":{\"name\":\"User2\",\"company_name\":null}}}"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 3]]
Completed 200 OK in 91ms (Views: 0.2ms | ActiveRecord: 9.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (8.5ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (12.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (9.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.1ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (8.6ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 08:05:45 UTC], ["updated_at", 2017-02-09 08:05:45 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"copmany_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameter: copmany_info_attributes
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-09 08:05:45 UTC], ["updated_at", 2017-02-09 08:05:45 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["request_uuid", "cb618bbed85643258555833ef7847cdc"], ["action", "create"], ["created_at", 2017-02-09 08:05:45 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-09 08:05:45 UTC], ["updated_at", 2017-02-09 08:05:45 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "cb618bbed85643258555833ef7847cdc"], ["action", "create"], ["created_at", 2017-02-09 08:05:45 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-09 08:05:45 UTC], ["updated_at", 2017-02-09 08:05:45 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "cb618bbed85643258555833ef7847cdc"], ["action", "create"], ["created_at", 2017-02-09 08:05:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (6.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "cb618bbed85643258555833ef7847cdc"]]
Completed 500 Internal Server Error in 41034ms (Views: 0.4ms | ActiveRecord: 36.6ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (13.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (8.5ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" serial primary key, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (4.9ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (12.0ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (9.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 08:06:32 UTC], ["updated_at", 2017-02-09 08:06:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"copmany_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameter: copmany_info_attributes
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-09 08:06:32 UTC], ["updated_at", 2017-02-09 08:06:32 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["request_uuid", "02c4e84c750c3cba4d94fb87a1aebf7b"], ["action", "create"], ["created_at", 2017-02-09 08:06:32 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-09 08:06:32 UTC], ["updated_at", 2017-02-09 08:06:32 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "02c4e84c750c3cba4d94fb87a1aebf7b"], ["action", "create"], ["created_at", 2017-02-09 08:06:32 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-09 08:06:32 UTC], ["updated_at", 2017-02-09 08:06:32 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "02c4e84c750c3cba4d94fb87a1aebf7b"], ["action", "create"], ["created_at", 2017-02-09 08:06:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCompanyInfo Load (0.3ms)[0m  [1m[34mSELECT  "company_infos".* FROM "company_infos" WHERE "company_infos"."company_id" = $1 LIMIT $2[0m  [["company_id", 1], ["LIMIT", 1]]
Unpermitted parameter: copmany_info_attributes
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "02c4e84c750c3cba4d94fb87a1aebf7b"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "02c4e84c750c3cba4d94fb87a1aebf7b"]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"users\":{\"2\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]},\"3\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}}}"], ["meta", "{\"users\":{\"2\":{\"name\":\"User1\",\"company_name\":null},\"3\":{\"name\":\"User2\",\"company_name\":null}}}"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 2]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 3]]
Completed 200 OK in 52095ms (Views: 0.4ms | ActiveRecord: 10.6ms)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.5ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (8.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE "company_infos"[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" serial primary key, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (9.3ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 08:07:30 UTC], ["updated_at", 2017-02-09 08:07:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"copmany_info_attributes"=>[{"address"=>"Negdje"}], "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameter: copmany_info_attributes
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-09 08:07:30 UTC], ["updated_at", 2017-02-09 08:07:30 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["request_uuid", "becb12346ec7c37083ffd772ec7df4b8"], ["action", "create"], ["created_at", 2017-02-09 08:07:30 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-09 08:07:30 UTC], ["updated_at", 2017-02-09 08:07:30 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "becb12346ec7c37083ffd772ec7df4b8"], ["action", "create"], ["created_at", 2017-02-09 08:07:30 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-09 08:07:30 UTC], ["updated_at", 2017-02-09 08:07:30 UTC]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "becb12346ec7c37083ffd772ec7df4b8"], ["action", "create"], ["created_at", 2017-02-09 08:07:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCompanyInfo Load (0.3ms)[0m  [1m[34mSELECT  "company_infos".* FROM "company_infos" WHERE "company_infos"."company_id" = $1 LIMIT $2[0m  [["company_id", 1], ["LIMIT", 1]]
  [1m[35m (6.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (8.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE "company_infos"[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" serial primary key, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 08:07:47 UTC], ["updated_at", 2017-02-09 08:07:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"copmany_info_attributes"=>[{"address"=>"Negdje"}], "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameter: copmany_info_attributes
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-09 08:07:47 UTC], ["updated_at", 2017-02-09 08:07:47 UTC]]
  [1m[35mSQL (2.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["request_uuid", "41739b92547f1804007ef0b5a3c90577"], ["action", "create"], ["created_at", 2017-02-09 08:07:47 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-09 08:07:47 UTC], ["updated_at", 2017-02-09 08:07:47 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "41739b92547f1804007ef0b5a3c90577"], ["action", "create"], ["created_at", 2017-02-09 08:07:47 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-09 08:07:47 UTC], ["updated_at", 2017-02-09 08:07:47 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "41739b92547f1804007ef0b5a3c90577"], ["action", "create"], ["created_at", 2017-02-09 08:07:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameter: copmany_info_attributes
Unpermitted parameter: copmany_info_attributes
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "41739b92547f1804007ef0b5a3c90577"]]
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "41739b92547f1804007ef0b5a3c90577"]]
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"users\":{\"2\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]},\"3\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}}}"], ["meta", "{\"users\":{\"2\":{\"name\":\"User1\",\"company_name\":null},\"3\":{\"name\":\"User2\",\"company_name\":null}}}"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 2]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 3]]
Completed 200 OK in 1913036ms (Views: 3.4ms | ActiveRecord: 14.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (11.0ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (28.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.1ms)[0m  [1m[35mDROP TABLE "company_infos"[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" serial primary key, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 08:39:46 UTC], ["updated_at", 2017-02-09 08:39:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>[{"address"=>"Negdje"}], "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 56ms (ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (31.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.8ms)[0m  [1m[35mDROP TABLE "company_infos"[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" serial primary key, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 08:40:09 UTC], ["updated_at", 2017-02-09 08:40:09 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-09 08:40:10 UTC], ["updated_at", 2017-02-09 08:40:10 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["request_uuid", "63b468dfaebc901ea3a5424d7e02f6e4"], ["action", "create"], ["created_at", 2017-02-09 08:40:10 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-09 08:40:10 UTC], ["updated_at", 2017-02-09 08:40:10 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "63b468dfaebc901ea3a5424d7e02f6e4"], ["action", "create"], ["created_at", 2017-02-09 08:40:10 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-09 08:40:10 UTC], ["updated_at", 2017-02-09 08:40:10 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "63b468dfaebc901ea3a5424d7e02f6e4"], ["action", "create"], ["created_at", 2017-02-09 08:40:10 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 1], ["created_at", 2017-02-09 08:40:10 UTC], ["updated_at", 2017-02-09 08:40:10 UTC]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,1]}"], ["request_uuid", "63b468dfaebc901ea3a5424d7e02f6e4"], ["action", "create"], ["created_at", 2017-02-09 08:40:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "63b468dfaebc901ea3a5424d7e02f6e4"]]
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "63b468dfaebc901ea3a5424d7e02f6e4"]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompanyInfo Load (0.3ms)[0m  [1m[34mSELECT  "company_infos".* FROM "company_infos" WHERE "company_infos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"users\":{\"2\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]},\"3\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}}}"], ["meta", "{\"users\":{\"2\":{\"name\":\"User1\",\"company_name\":null},\"3\":{\"name\":\"User2\",\"company_name\":null}}}"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 3]]
Completed 200 OK in 25797ms (Views: 0.6ms | ActiveRecord: 14.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.3ms)[0m  [1m[34mSELECT "records".* FROM "records"[0m
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (24.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial primary key, "email" character varying, "name" character varying, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (11.7ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_company_id" ON "users"  ("company_id")[0m
  [1m[35m (7.7ms)[0m  [1m[35mDROP TABLE "companies"[0m
  [1m[35m (9.5ms)[0m  [1m[35mCREATE TABLE "companies" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (5.3ms)[0m  [1m[35mDROP TABLE "company_infos"[0m
  [1m[35m (9.6ms)[0m  [1m[35mCREATE TABLE "company_infos" ("id" serial primary key, "address" character varying, "company_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE  INDEX  "index_company_infos_on_company_id" ON "company_infos"  ("company_id")[0m
  [1m[35m (3.7ms)[0m  [1m[35mDROP TABLE "records"[0m
  [1m[35m (8.7ms)[0m  [1m[35mCREATE TABLE "records" ("id" serial primary key, "author_type" character varying, "author_id" integer, "subject_type" character varying, "subject_id" integer, "parent_type" character varying, "parent_id" integer, "record_changes" json DEFAULT '{}', "meta" json DEFAULT '{}', "request_uuid" character varying, "action" character varying, "created_at" timestamp)[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_author_type_and_author_id" ON "records"  ("author_type", "author_id")[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_subject_type_and_subject_id" ON "records"  ("subject_type", "subject_id")[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE  INDEX  "index_records_on_parent_type_and_parent_id" ON "records"  ("parent_type", "parent_id")[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin"], ["name", "user"], ["created_at", 2017-02-09 08:42:04 UTC], ["updated_at", 2017-02-09 08:42:04 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
Processing by CompaniesController#create as HTML
  Parameters: {"company"=>{"company_info_attributes"=>{"address"=>"Negdje"}, "users_attributes"=>[{"email"=>"user1@email.com", "name"=>"User1"}, {"email"=>"user2@email.com", "name"=>"User2"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-02-09 08:42:04 UTC], ["updated_at", 2017-02-09 08:42:04 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "Company"], ["subject_id", 1], ["request_uuid", "9e8d73c25c8ec421df310e49e1ae4095"], ["action", "create"], ["created_at", 2017-02-09 08:42:04 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user1@email.com"], ["name", "User1"], ["company_id", 1], ["created_at", 2017-02-09 08:42:04 UTC], ["updated_at", 2017-02-09 08:42:04 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 2], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User1\",\"company_name\":null}"], ["request_uuid", "9e8d73c25c8ec421df310e49e1ae4095"], ["action", "create"], ["created_at", 2017-02-09 08:42:04 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "user2@email.com"], ["name", "User2"], ["company_id", 1], ["created_at", 2017-02-09 08:42:04 UTC], ["updated_at", 2017-02-09 08:42:04 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "meta", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "UserWithAll"], ["subject_id", 3], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}"], ["meta", "{\"name\":\"User2\",\"company_name\":null}"], ["request_uuid", "9e8d73c25c8ec421df310e49e1ae4095"], ["action", "create"], ["created_at", 2017-02-09 08:42:04 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "company_infos" ("address", "company_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "Negdje"], ["company_id", 1], ["created_at", 2017-02-09 08:42:04 UTC], ["updated_at", 2017-02-09 08:42:04 UTC]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "records" ("author_type", "author_id", "subject_type", "subject_id", "parent_type", "parent_id", "record_changes", "request_uuid", "action", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["author_type", "User"], ["author_id", 1], ["subject_type", "CompanyInfo"], ["subject_id", 1], ["parent_type", "Company"], ["parent_id", 1], ["record_changes", "{\"address\":[null,\"Negdje\"],\"company_id\":[null,1]}"], ["request_uuid", "9e8d73c25c8ec421df310e49e1ae4095"], ["action", "create"], ["created_at", 2017-02-09 08:42:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "9e8d73c25c8ec421df310e49e1ae4095"]]
  [1m[36mLogBook::Record Load (0.2ms)[0m  [1m[34mSELECT "records".* FROM "records" WHERE "records"."request_uuid" = $1[0m  [["request_uuid", "9e8d73c25c8ec421df310e49e1ae4095"]]
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserWithAll Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCompanyInfo Load (0.2ms)[0m  [1m[34mSELECT  "company_infos".* FROM "company_infos" WHERE "company_infos"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "records" SET "record_changes" = $1, "meta" = $2 WHERE "records"."id" = $3[0m  [["record_changes", "{\"users\":{\"2\":{\"email\":[null,\"user1@email.com\"],\"name\":[null,\"User1\"],\"company_id\":[null,1]},\"3\":{\"email\":[null,\"user2@email.com\"],\"name\":[null,\"User2\"],\"company_id\":[null,1]}}}"], ["meta", "{\"users\":{\"2\":{\"name\":\"User1\",\"company_name\":null},\"3\":{\"name\":\"User2\",\"company_name\":null}}}"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 2]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "records" WHERE "records"."id" = $1[0m  [["id", 3]]
Completed 200 OK in 1904ms (Views: 0.3ms | ActiveRecord: 14.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "records"[0m
  [1m[36mLogBook::Record Load (0.4ms)[0m  [1m[34mSELECT  "records".* FROM "records" ORDER BY "records"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
